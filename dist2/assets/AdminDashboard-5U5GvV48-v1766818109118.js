import{r as e,o as t,y as a,h as s,l as o,t as l,k as r}from"./vendor-mW7CftnD-v1766818109118.js";import{b as n}from"./index-CLGVF4nc-v1766818109118.js";import"./utils-MhcqYcpC-v1766818109118.js";import"./maps-CCq-KL9W-v1766818109118.js";const d={class:"min-h-screen bg-gray-100"},i={class:"bg-white shadow-lg"},u={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},c={class:"flex justify-between h-16"},g={class:"flex items-center space-x-4"},b={class:"text-sm text-gray-800 font-medium"},h={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},m={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},p={class:"bg-blue-50 p-6 rounded-lg"},v={class:"text-3xl font-bold text-blue-900"},w={class:"bg-purple-50 p-6 rounded-lg"},x={class:"text-3xl font-bold text-purple-900"},f={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},y={class:"bg-white p-6 rounded-lg shadow"},k=["disabled"],$={class:"bg-white p-6 rounded-lg shadow"},C={class:"space-y-2"},S=["disabled"],T={__name:"AdminDashboard",setup(T){const I=a(),j=e(!1),E=e(null),A=e({}),q=e(null),P=async()=>{var e;j.value=!0,q.value=null;try{const t=localStorage.getItem("adminToken");if(!t)return alert("–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞."),void I.push("/admin/login");const a=await fetch("/api/v1/diagnostics/full",{headers:{Authorization:`Bearer ${t}`}});if(!a.ok){if(404===a.status)return void alert("‚ö†Ô∏è –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é backend.");if(401===a.status)return localStorage.removeItem("adminToken"),localStorage.removeItem("admin"),void I.push("/admin/login");const e=await a.text().catch(()=>"");throw new Error(`HTTP ${a.status}${e?": "+e:""}`)}const s=await a.json();if(!s.success||!s.data)throw new Error(s.message||s.error||"–û—à–∏–±–∫–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏");{q.value=s.data;const a=await fetch("/api/v1/admin/dashboard",{headers:{Authorization:`Bearer ${t}`}});if(a.ok){const e=await a.json();e.success&&(A.value=e.dashboard||e.statistics||{})}n.info("–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ",{checks:(null==(e=s.data.checks)?void 0:e.length)||0}),z(s.data)}}catch(t){const e=(null==t?void 0:t.message)||(null==t?void 0:t.toString())||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞";n.error("Admin diagnostic error:",{error:t,message:e}),alert("‚ùå –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏: "+e)}finally{j.value=!1}},z=e=>{const t=e.checks||[],a=t.filter(e=>"passed"===e.status).length,s=t.filter(e=>"failed"===e.status).length,o=t.filter(e=>"warning"===e.status).length;let l="üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:\n\n";l+=`–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å: ${"healthy"===e.overall?"‚úÖ –ó–¥–æ—Ä–æ–≤":"warning"===e.overall?"‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è":"‚ùå –ü—Ä–æ–±–ª–µ–º—ã"}\n\n`,l+=`–ü—Ä–æ–≤–µ—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ: ${t.length}\n`,l+=`‚úÖ –£—Å–ø–µ—à–Ω–æ: ${a}\n`,l+=`‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è: ${o}\n`,l+=`‚ùå –û—à–∏–±–∫–∏: ${s}\n\n`,l+="–î–µ—Ç–∞–ª–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫:\n",t.forEach(e=>{const t="passed"===e.status?"‚úÖ":"warning"===e.status?"‚ö†Ô∏è":"‚ùå";l+=`${t} ${e.name}: ${e.status}\n`,e.details&&(e.details.message&&(l+=`   ${e.details.message}\n`),e.details.error&&(l+=`   –û—à–∏–±–∫–∞: ${e.details.error}\n`),e.details.warning&&(l+=`   –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: ${e.details.warning}\n`)),l+="\n"}),s>0&&(l+="\n‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:\n",t.filter(e=>"failed"===e.status).forEach(e=>{var t,a;const s=(null==(t=e.details)?void 0:t.error)||(null==(a=e.details)?void 0:a.message)||"–û—à–∏–±–∫–∞";l+=`  ‚Ä¢ ${e.name}: ${s}\n`})),o>0&&(l+="\n‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:\n",t.filter(e=>"warning"===e.status).forEach(e=>{var t,a;const s=(null==(t=e.details)?void 0:t.warning)||(null==(a=e.details)?void 0:a.message)||"–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ";l+=`  ‚Ä¢ ${e.name}: ${s}\n`})),alert(l)},B=()=>I.push("/"),D=()=>I.push("/admin/logs"),R=()=>I.push("/admin/users"),H=()=>I.push("/admin/requests"),U=()=>I.push("/admin/super"),_=()=>I.push("/admin/errors"),N=()=>I.push("/admin/backups"),O=()=>I.push("/admin/analytics"),J=()=>I.push("/admin/terminal"),L=()=>I.push("/admin/settings"),F=()=>I.push("/admin/bulk"),G=()=>I.push("/admin/chats-moderation"),K=()=>I.push("/admin/finance"),M=()=>I.push("/admin/notifications"),Q=()=>I.push("/admin/roles"),V=async()=>{j.value=!0;try{const e=localStorage.getItem("adminToken");if(!e)return alert("–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞."),void I.push("/admin/login");const t=await fetch("/api/v1/admin/backup/create",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok){if(404===t.status)return void alert("‚ö†Ô∏è –≠–Ω–¥–ø–æ–∏–Ω—Ç /api/v1/admin/backup/create –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é backend.");if(401===t.status)return localStorage.removeItem("adminToken"),localStorage.removeItem("admin"),void I.push("/admin/login");const e=await t.text().catch(()=>"");throw new Error(`HTTP ${t.status}${e?": "+e:""}`)}const a=await t.json();if(!a.success)throw new Error(a.error||a.message||"–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–∞");alert("‚úÖ –ë—ç–∫–∞–ø —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!")}catch(e){const t=(null==e?void 0:e.message)||(null==e?void 0:e.toString())||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞";n.error("Create backup error:",{error:e,message:t}),alert("‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–∞: "+t)}finally{j.value=!1}},W=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("admin"),I.push("/admin/login")};t(async()=>{const e=localStorage.getItem("admin");if(e)try{E.value=JSON.parse(e),await X()}catch(t){n.error("Admin dashboard mount error:",t),I.push("/admin/login")}else I.push("/admin/login")});const X=async()=>{try{const e=localStorage.getItem("adminToken");if(!e)return void n.warn("No admin token found");const t=await fetch("/api/v1/admin/dashboard",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok){if(401===t.status)return localStorage.removeItem("adminToken"),localStorage.removeItem("admin"),void I.push("/admin/login");if(404===t.status)return void n.warn("Dashboard endpoint not found (404)");const e=await t.text().catch(()=>"");throw new Error(`HTTP ${t.status}${e?": "+e:""}`)}const a=await t.json();a.success?(A.value=a.dashboard||a.statistics||{},n.info("Dashboard data loaded",A.value)):n.warn("Dashboard data load failed:",a.message||a.error)}catch(e){const t=(null==e?void 0:e.message)||(null==e?void 0:e.toString())||"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞";n.error("Load dashboard data error:",t,e),A.value={totalUsers:0,totalRequests:0,activeRequests:0,recentUsers:0,recentRequests:0,systemStatus:"unknown"}}};return(e,t)=>{var a,n,T;return r(),s("div",d,[o("nav",i,[o("div",u,[o("div",c,[o("div",{class:"flex items-center space-x-4"},[o("button",{class:"text-blue-600 hover:text-blue-800 font-medium",onClick:B}," üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é "),t[0]||(t[0]=o("h1",{class:"text-xl font-bold text-gray-900"}," üîß –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ",-1))]),o("div",g,[o("span",b,l(null==(a=E.value)?void 0:a.full_name),1),o("button",{class:"bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700",onClick:W}," –í—ã–π—Ç–∏ ")])])])]),o("div",h,[o("div",m,[t[3]||(t[3]=o("div",{class:"bg-green-50 p-6 rounded-lg"},[o("h3",{class:"text-lg font-medium text-green-800 mb-2"}," ‚úÖ –°–∏—Å—Ç–µ–º–∞ "),o("p",{class:"text-3xl font-bold text-green-900"}," –†–∞–±–æ—Ç–∞–µ—Ç ")],-1)),o("div",p,[t[1]||(t[1]=o("h3",{class:"text-lg font-medium text-blue-800 mb-2"}," üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ",-1)),o("p",v,l((null==(n=A.value)?void 0:n.totalUsers)||0),1)]),o("div",w,[t[2]||(t[2]=o("h3",{class:"text-lg font-medium text-purple-800 mb-2"}," üìã –ó–∞—è–≤–∫–∏ ",-1)),o("p",x,l((null==(T=A.value)?void 0:T.activeRequests)||0),1)])]),o("div",f,[o("div",y,[t[4]||(t[4]=o("h3",{class:"font-bold text-gray-900 mb-4"}," üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ ",-1)),o("button",{disabled:j.value,class:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:P}," –ó–∞–ø—É—Å—Ç–∏—Ç—å ",8,k)]),o("div",{class:"bg-white p-6 rounded-lg shadow"},[t[5]||(t[5]=o("h3",{class:"font-bold text-gray-900 mb-4"}," üìã –õ–æ–≥–∏ ",-1)),o("button",{class:"w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 mb-2",onClick:D}," –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å "),o("button",{class:"w-full bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",onClick:_}," üìä –û—à–∏–±–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ ")]),o("div",{class:"bg-white p-6 rounded-lg shadow"},[t[6]||(t[6]=o("h3",{class:"font-bold text-gray-900 mb-4"}," üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ",-1)),o("button",{class:"w-full bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700",onClick:R}," –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ")]),o("div",{class:"bg-white p-6 rounded-lg shadow border-2 border-orange-400"},[t[7]||(t[7]=o("h3",{class:"font-bold text-gray-900 mb-4"}," üöó –ó–∞—è–≤–∫–∏ ",-1)),t[8]||(t[8]=o("p",{class:"text-sm text-gray-700 mb-4"}," –ü—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ ",-1)),o("button",{class:"w-full bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 font-bold",onClick:H}," üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏ ")]),o("div",{class:"bg-white p-6 rounded-lg shadow border-2 border-blue-400"},[t[9]||(t[9]=o("h3",{class:"font-bold text-gray-900 mb-4"}," üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ",-1)),t[10]||(t[10]=o("p",{class:"text-sm text-gray-700 mb-4"}," –ì—Ä–∞—Ñ–∏–∫–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ç–æ–ø –ø–æ–º–æ—â–Ω–∏–∫–æ–≤ ",-1)),o("button",{class:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 font-bold",onClick:O}," üìà –û—Ç–∫—Ä—ã—Ç—å ")]),o("div",{class:"bg-white p-6 rounded-lg shadow border-2 border-yellow-400"},[t[11]||(t[11]=o("h3",{class:"font-bold text-gray-900 mb-4"}," üîß –°—É–ø–µ—Ä-–ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å ",-1)),t[12]||(t[12]=o("p",{class:"text-sm text-gray-700 mb-4"}," –ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–º: —Ñ–∞–π–ª—ã, –∫–æ–¥, —Å–∏—Å—Ç–µ–º–∞, –ë–î ",-1)),o("button",{class:"w-full bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700 font-bold",onClick:U}," üöÄ –û—Ç–∫—Ä—ã—Ç—å –°—É–ø–µ—Ä-–ê–¥–º–∏–Ω ")]),o("div",$,[t[13]||(t[13]=o("h3",{class:"font-bold text-gray-900 mb-4"}," üíæ –ë—ç–∫–∞–ø—ã ",-1)),o("div",C,[o("button",{disabled:j.value,class:"w-full bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700",onClick:V}," üì¶ –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø ",8,S),o("button",{class:"w-full bg-purple-600 text-white px-4 py-2 rounded text-sm hover:bg-purple-700",onClick:N}," üìã –°–ø–∏—Å–æ–∫ –±—ç–∫–∞–ø–æ–≤ ")])]),o("div",{class:"bg-white p-6 rounded-lg shadow border-2 border-green-500"},[t[14]||(t[14]=o("h3",{class:"font-bold text-gray-900 mb-4"}," üíª –¢–µ—Ä–º–∏–Ω–∞–ª ",-1)),t[15]||(t[15]=o("p",{class:"text-sm text-gray-700 mb-4"}," –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ",-1)),o("button",{class:"w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 font-bold",onClick:J}," üöÄ –û—Ç–∫—Ä—ã—Ç—å –¢–µ—Ä–º–∏–Ω–∞–ª ")]),o("div",{class:"bg-white p-6 rounded-lg shadow"},[t[16]||(t[16]=o("h3",{class:"font-bold text-gray-900 mb-4"}," ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ",-1)),o("button",{class:"w-full bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",onClick:L}," üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã ")]),o("div",{class:"bg-white p-6 rounded-lg shadow"},[t[17]||(t[17]=o("h3",{class:"font-bold text-gray-900 mb-4"}," üîÑ –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ ",-1)),o("button",{class:"w-full bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700",onClick:F}," üì¶ –ú–∞—Å—Å–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è ")]),o("div",{class:"bg-white p-6 rounded-lg shadow"},[t[18]||(t[18]=o("h3",{class:"font-bold text-gray-900 mb-4"}," üí¨ –ú–æ–¥–µ—Ä–∞—Ü–∏—è ",-1)),o("button",{class:"w-full bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700",onClick:G}," üõ°Ô∏è –ú–æ–¥–µ—Ä–∞—Ü–∏—è —á–∞—Ç–æ–≤ ")]),o("div",{class:"bg-white p-6 rounded-lg shadow"},[t[19]||(t[19]=o("h3",{class:"font-bold text-gray-900 mb-4"}," üí∞ –§–∏–Ω–∞–Ω—Å—ã ",-1)),o("button",{class:"w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",onClick:K}," üí≥ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ")]),o("div",{class:"bg-white p-6 rounded-lg shadow"},[t[20]||(t[20]=o("h3",{class:"font-bold text-gray-900 mb-4"}," üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ",-1)),o("button",{class:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:M}," üì§ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ")]),o("div",{class:"bg-white p-6 rounded-lg shadow"},[t[21]||(t[21]=o("h3",{class:"font-bold text-gray-900 mb-4"}," üëë –†–æ–ª–∏ ",-1)),o("button",{class:"w-full bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",onClick:Q}," üîê –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ ")])])])])}}};export{T as default};
