import{r as e,o as a,w as r,h as t,m as l,k as s,l as n,t as i,G as o,v as d,p as u}from"./vendor-mW7CftnD-v1766841819551.js";import{_ as v,a as c}from"./index-Y1ONQ0D2-v1766841819551.js";const g={key:0,class:"relative"},f=["src","alt"],p={class:"p-3"},y={class:"flex items-center gap-2 mb-1"},k=["src"],b={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},m={class:"font-semibold text-sm text-gray-900 dark:text-white line-clamp-2 mb-1"},h={key:0,class:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2"},w={key:1,class:"link-preview-loading mt-2 p-3 rounded-xl border border-gray-200 dark:border-gray-600 animate-pulse"},x=["href"],_=v({__name:"LinkPreview",props:{url:{type:String,required:!0}},setup(v){const _=v,L=e(null),j=e(!1),C=e(!0),M=new Map;async function E(){if(_.url)if(M.has(_.url))L.value=M.get(_.url);else try{j.value=!0;const e=await c.getLinkPreview(_.url);e.success&&e.data&&(L.value=e.data,M.set(_.url,e.data))}catch(e){console.warn("Failed to fetch link preview:",e),L.value=null}finally{j.value=!1}}function P(e){try{return new URL(e).hostname}catch{return e}}function q(){window.open(_.url,"_blank","noopener,noreferrer")}function B(e){e.target.style.display="none",C.value=!1}return a(()=>{E()}),r(()=>_.url,()=>{E()}),(e,a)=>L.value&&!L.value.error?(s(),t("div",{key:0,class:"link-preview mt-2 rounded-xl overflow-hidden border border-gray-200 dark:border-gray-600 bg-white/50 dark:bg-gray-700/50 hover:bg-white dark:hover:bg-gray-700 transition-all cursor-pointer",onClick:q},[L.value.image?(s(),t("div",g,[n("img",{src:L.value.image,alt:L.value.title,class:"w-full h-32 object-cover",onError:B},null,40,f),a[2]||(a[2]=n("div",{class:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"},null,-1))])):l("",!0),n("div",p,[n("div",y,[L.value.favicon?(s(),t("img",{key:0,src:L.value.favicon,class:"w-4 h-4 rounded",onError:a[0]||(a[0]=e=>e.target.style.display="none")},null,40,k)):l("",!0),n("span",b,i(L.value.siteName||P(v.url)),1)]),n("h4",m,i(L.value.title||"Ссылка"),1),L.value.description?(s(),t("p",h,i(L.value.description),1)):l("",!0)])])):j.value?(s(),t("div",w,[...a[3]||(a[3]=[o('<div class="flex items-center gap-2 mb-2" data-v-d06ef52f><div class="w-4 h-4 bg-gray-200 dark:bg-gray-600 rounded" data-v-d06ef52f></div><div class="w-24 h-3 bg-gray-200 dark:bg-gray-600 rounded" data-v-d06ef52f></div></div><div class="w-full h-4 bg-gray-200 dark:bg-gray-600 rounded mb-1" data-v-d06ef52f></div><div class="w-2/3 h-3 bg-gray-200 dark:bg-gray-600 rounded" data-v-d06ef52f></div>',3)])])):v.url&&!j.value?(s(),t("a",{key:2,href:v.url,target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center gap-1 text-blue-500 hover:text-blue-600 hover:underline text-sm mt-1",onClick:a[1]||(a[1]=u(()=>{},["stop"]))},[a[4]||(a[4]=n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)),d(" "+i(P(v.url)),1)],8,x)):l("",!0)}},[["__scopeId","data-v-d06ef52f"]]);export{_ as L};
