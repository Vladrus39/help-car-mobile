import{r as e,c as t,o as l,Y as s,a,s as n,H as o,h as r,f as i,l as u,m as d,g as c,x as p,t as v,F as m,i as g,u as x,p as b,I as f,J as y,G as h,y as w,k,v as _,n as I}from"./vendor-mW7CftnD-v1766841819551.js";import{u as $,a as j}from"./index-Y1ONQ0D2-v1766841819551.js";import{_ as q}from"./NavigationHeader-CU85bLe9-v1766841819551.js";import{u as C}from"./useRequestHelpers-BcrxoIB--v1766841819551.js";import"./utils-MqoAbdB_-v1766841819551.js";import"./maps-CCq-KL9W-v1766841819551.js";const R={class:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50"},z={class:"container mx-auto px-2 sm:px-4 py-4 sm:py-8"},O={class:"max-w-4xl mx-auto"},M={class:"mb-4 sm:mb-8"},T={class:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm mb-2 sm:mb-4 overflow-x-auto"},P={class:"text-2xl sm:text-3xl md:text-4xl font-black text-gray-900 mb-1 sm:mb-2"},E={key:0},H={key:1},U={key:2},S={class:"text-base sm:text-lg md:text-xl text-gray-600 font-semibold"},A={key:0},D={key:1},L={key:2},F={key:0,class:"text-center py-20"},V={key:1,class:"p-8 bg-red-50 border-2 border-red-200 rounded-2xl"},G={class:"text-red-700 text-lg font-bold"},W={key:2,class:"bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-6 md:p-8"},B={class:"mb-4 sm:mb-8 p-4 sm:p-6 bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl sm:rounded-2xl border-2 border-blue-200"},N={class:"text-lg sm:text-xl md:text-2xl font-black text-gray-900 mb-3 sm:mb-4"},J={key:0,class:"mb-4 overflow-x-auto"},K={class:"flex gap-2"},Y=["src","alt","onClick"],Q={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 text-xs sm:text-sm mb-4"},X={class:"ml-2 text-gray-900"},Z={class:"ml-2 text-green-600 font-black"},ee={key:0,class:"sm:col-span-2"},te={class:"ml-2 text-gray-900"},le={class:"ml-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-bold"},se={key:1,class:"flex flex-col sm:flex-row gap-2"},ae=["href"],ne=["href"],oe={class:"mb-4 sm:mb-6"},re={key:0,class:"mb-4 sm:mb-6 p-3 sm:p-4 bg-yellow-50 border-2 border-yellow-200 rounded-xl"},ie=["disabled"],ue={key:0},de={key:1},ce={key:3},pe={key:0,class:"text-center py-20"},ve={key:1,class:"space-y-3 sm:space-y-6"},me={class:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-4 mb-4 sm:mb-6"},ge={class:"flex items-start gap-3 sm:gap-4 flex-1 min-w-0"},xe={class:"w-12 h-12 sm:w-16 sm:h-16 md:w-20 md:h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg flex-shrink-0"},be={class:"text-xl sm:text-2xl md:text-4xl text-white font-black"},fe={class:"flex-1 min-w-0"},ye={class:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-2"},he={class:"flex flex-wrap items-center gap-2 sm:gap-4 mb-2 sm:mb-3"},we={class:"text-xs sm:text-sm md:text-base text-gray-600 font-semibold"},ke={key:0,class:"px-2 sm:px-3 py-1 bg-blue-100 text-blue-700 rounded-lg font-bold text-xs sm:text-sm"},_e={key:1,class:"px-2 sm:px-3 py-1 bg-green-100 text-green-700 rounded-lg font-bold text-xs sm:text-sm"},Ie={key:0,class:"text-sm sm:text-base text-gray-700 leading-relaxed bg-gray-50 p-3 sm:p-4 rounded-xl break-words"},$e={key:0,class:"flex flex-col sm:flex-row gap-2 sm:gap-4 mt-4 sm:mt-6 border-t-2 border-gray-200 pt-4 sm:pt-6"},je=["disabled","onClick"],qe=["disabled","onClick"],Ce={key:1,class:"mt-4 sm:mt-6 border-t-2 border-green-200 pt-4 sm:pt-6"},Re=["onClick"],ze={class:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] flex flex-col"},Oe={class:"p-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-t-3xl"},Me={class:"flex items-center justify-between"},Te={class:"text-2xl font-black"},Pe={class:"text-blue-100 font-semibold"},Ee={key:0},He={key:1},Ue={key:0,class:"text-center py-12"},Se={class:"text-base"},Ae={key:0,class:"p-4 border-t-2 border-gray-200 bg-yellow-50 rounded-b-3xl"},De={class:"text-center"},Le={class:"flex space-x-2"},Fe={key:1,class:"p-4 border-t-2 border-gray-200 bg-white rounded-b-3xl"},Ve=["disabled"],Ge={__name:"ResponsesView",setup(Ge){const We=n(),Be=w(),Ne=$(),{getProblemTypeName:Je,getProblemIcon:Ke}=C(),Ye=e(!0),Qe=e(!1),Xe=e(null),Ze=e([]),et=e(!1),tt=e(null),lt=e([]),st=e(""),at=e(null),nt=e(null),ot=e(null),rt=e(null),it=e(""),ut=e(!1),dt=t(()=>Ne.user),ct=t(()=>!(!dt.value||!rt.value)&&dt.value.id===rt.value.user_id);let pt=null;async function vt(){var e,t,l,s,a,n,r,i;const u=We.params.id||We.params.requestId;if(console.log("üîç loadResponses –≤—ã–∑–≤–∞–Ω –¥–ª—è requestId:",u),console.log("üîç –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:",{currentUser:null==(e=dt.value)?void 0:e.id,helpRequest:null==(t=rt.value)?void 0:t.id,helpRequestOwner:null==(l=rt.value)?void 0:l.user_id,isRequestOwner:ct.value}),Ye.value=!1,await o(),await new Promise(e=>setTimeout(e,150)),!ct.value)return console.log("‚ö†Ô∏è –ü–†–ï–î–û–¢–í–†–ê–©–ï–ù–û (computed): –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º"),Ze.value=[],void(Ye.value=!1);if(!dt.value||!rt.value)return console.log("‚ö†Ô∏è –ü–†–ï–î–û–¢–í–†–ê–©–ï–ù–û (–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö): –ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –∑–∞—è–≤–∫–∏"),Ze.value=[],void(Ye.value=!1);if(dt.value.id!==rt.value.user_id)return console.log("‚ö†Ô∏è –ü–†–ï–î–û–¢–í–†–ê–©–ï–ù–û (ID mismatch):",{currentUserId:dt.value.id,ownerId:rt.value.user_id}),Ze.value=[],void(Ye.value=!1);if(!ct.value)return console.log("‚ö†Ô∏è –ü–†–ï–î–û–¢–í–†–ê–©–ï–ù–û (computed check failed): isRequestOwner = false"),Ze.value=[],void(Ye.value=!1);const d=null==(s=dt.value)?void 0:s.id,c=null==(a=rt.value)?void 0:a.user_id;if(d!==c)return console.log("‚ö†Ô∏è –ü–†–ï–î–û–¢–í–†–ê–©–ï–ù–û (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ API):",{finalUserId:d,finalOwnerId:c}),Ze.value=[],void(Ye.value=!1);try{console.log("‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–∫–ª–∏–∫–æ–≤ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∑–∞—è–≤–∫–∏:",{requestId:u,userId:dt.value.id,ownerId:rt.value.user_id});const e=await j.getResponsesForRequest(u,!0);Ze.value=e.responses||[],Ye.value=!1,console.log("‚úÖ –û—Ç–∫–ª–∏–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:",Ze.value.length)}catch(p){if(console.error("‚ùå Error loading responses:",p),Ze.value=[],Ye.value=!1,403===(null==(n=p.response)?void 0:n.status))console.log("‚ö†Ô∏è 403 –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –æ—Ç–∫–ª–∏–∫–æ–≤ - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–ª–∞–¥–µ–ª–µ—Ü (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º)");else{(null==(r=dt.value)?void 0:r.id)===(null==(i=rt.value)?void 0:i.user_id)&&(Xe.value=p.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–∫–ª–∏–∫–æ–≤")}}}async function mt(){var e,t;if(dt.value)if(it.value.trim())try{ut.value=!0;const e=We.params.id||We.params.requestId;let t=null,s=null;if(navigator.geolocation)try{const e=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{timeout:5e3})});t=e.coords.latitude,s=e.coords.longitude}catch(l){console.warn("Could not get location:",l)}await j.createResponse(e,{message:it.value,latitude:t,longitude:s}),alert("‚úÖ –í–∞—à –æ—Ç–∫–ª–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –û–∂–∏–¥–∞–π—Ç–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –∞–≤—Ç–æ—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞."),it.value="",Be.push("/map")}catch(s){console.error("Error submitting response:",s),alert("–û—à–∏–±–∫–∞: "+((null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.error)||s.message||"–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∫–ª–∏–∫"))}finally{ut.value=!1}else alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ");else Be.push("/login")}async function gt(e){var t,l,s,a,n,o;if(!ct.value)return console.error("‚ùå –ü–†–ï–î–û–¢–í–†–ê–©–ï–ù–û: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –∑–∞–ø—Ä–æ—Å–∞"),void alert("‚ùå –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ—Ç–∫–ª–∏–∫–∏ –Ω–∞ —á—É–∂–æ–π –∑–∞–ø—Ä–æ—Å");if(!dt.value||!rt.value||dt.value.id!==rt.value.user_id)return console.error("‚ùå –ü–†–ï–î–û–¢–í–†–ê–©–ï–ù–û: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞",{currentUserId:null==(t=dt.value)?void 0:t.id,requestOwnerId:null==(l=rt.value)?void 0:l.user_id}),void alert("‚ùå –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –æ—Ç–∫–ª–∏–∫–∏ –Ω–∞ —á—É–∂–æ–π –∑–∞–ø—Ä–æ—Å");if(confirm("–ü—Ä–∏–Ω—è—Ç—å –ø–æ–º–æ—â—å –æ—Ç —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?"))try{Qe.value=!0,Xe.value=null,console.log("‚úÖ –ü—Ä–∏–Ω—è—Ç–∏–µ –æ—Ç–∫–ª–∏–∫–∞ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞):",{responseId:e,userId:dt.value.id,requestOwnerId:rt.value.user_id,isOwner:ct.value});const t=await j.acceptResponse(e);if(console.log("–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–Ω—è—Ç–∏—è:",t),!t||!t.success&&!t.response)throw new Error((null==t?void 0:t.error)||"–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–∏–Ω—è—Ç—å –æ—Ç–∫–ª–∏–∫");const l=Ze.value.find(t=>t.id===e);if(l){if(l.status="accepted",Ze.value.forEach(t=>{t.id!==e&&"pending"===t.status&&(t.status="rejected")}),t.helpRequest&&(rt.value={...rt.value,...t.helpRequest}),alert("‚úÖ –ü–æ–º–æ—â–Ω–∏–∫ –ø—Ä–∏–Ω—è—Ç! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å —á–∞—Ç —Å –ø–æ–º–æ—â–Ω–∏–∫–æ–º –∏ –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ."),l.helper_latitude&&l.helper_longitude&&t.helpRequest){console.log("üó∫Ô∏è –°—Ç—Ä–æ–∏–º –º–∞—Ä—à—Ä—É—Ç –¥–ª—è –ø–æ–º–æ—â–Ω–∏–∫–∞...");try{const e=await async function(e,t,l,s){try{console.log(`üó∫Ô∏è –ú–∞—Ä—à—Ä—É—Ç –æ—Ç [${e}, ${t}] –∫ [${l}, ${s}]`);const a=await fetch(`https://router.project-osrm.org/route/v1/driving/${t},${e};${s},${l}?overview=full&geometries=geojson&steps=true`);if(!a.ok)throw new Error("–û—à–∏–±–∫–∞ OSRM API");const n=await a.json();if(n.routes&&n.routes.length>0){const e=n.routes[0],t=(e.distance/1e3).toFixed(1),l=Math.ceil(e.duration/60);return console.log(`‚úÖ –ú–∞—Ä—à—Ä—É—Ç: ${t} –∫–º, ~${l} –º–∏–Ω—É—Ç`),bt.value={distance:t,duration:l,coordinates:e.geometry.coordinates},xt(`üó∫Ô∏è –ú–∞—Ä—à—Ä—É—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω: ${t} –∫–º, ~${l} –º–∏–Ω—É—Ç`),{distance:t,duration:l}}}catch(a){console.error("‚ùå –û—à–∏–±–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞:",a)}}(l.helper_latitude,l.helper_longitude,t.helpRequest.latitude,t.helpRequest.longitude);e&&function(e,t,l,s,a){const n=document.createElement("div");n.style.cssText="\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: white;\n    border-radius: 24px;\n    padding: 32px;\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n    z-index: 10001;\n    min-width: 400px;\n    max-width: 90vw;\n  ",n.innerHTML=`\n    <div style="text-align: center;">\n      <div style="font-size: 48px; margin-bottom: 16px;">üó∫Ô∏è</div>\n      <h3 style="font-size: 24px; font-weight: 900; color: #1f2937; margin-bottom: 8px;">\n        –ú–∞—Ä—à—Ä—É—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω!\n      </h3>\n      <p style="color: #6b7280; margin-bottom: 24px; font-size: 16px;">\n        üìè ${a.distance} –∫–º ‚Ä¢ ‚è±Ô∏è ~${a.duration} –º–∏–Ω—É—Ç\n      </p>\n      \n      <div style="display: grid; gap: 12px;">\n        <a \n          href="https://yandex.ru/maps/?rtext=${e},${t}~${l},${s}&rtt=auto"\n          target="_blank"\n          style="\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 12px;\n            padding: 16px;\n            background: linear-gradient(135deg, #ffdb4d, #ffc700);\n            color: #000;\n            border-radius: 16px;\n            font-weight: bold;\n            font-size: 18px;\n            text-decoration: none;\n            box-shadow: 0 4px 12px rgba(255, 199, 0, 0.3);\n          "\n        >\n          <span style="font-size: 24px;">üü°</span>\n          –Ø–Ω–¥–µ–∫—Å.–ù–∞–≤–∏–≥–∞—Ç–æ—Ä\n        </a>\n        \n        <a \n          href="https://www.google.com/maps/dir/?api=1&origin=${e},${t}&destination=${l},${s}&travelmode=driving"\n          target="_blank"\n          style="\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 12px;\n            padding: 16px;\n            background: linear-gradient(135deg, #4285f4, #1a73e8);\n            color: white;\n            border-radius: 16px;\n            font-weight: bold;\n            font-size: 18px;\n            text-decoration: none;\n            box-shadow: 0 4px 12px rgba(66, 133, 244, 0.3);\n          "\n        >\n          <span style="font-size: 24px;">üó∫Ô∏è</span>\n          Google Maps\n        </a>\n        \n        <a \n          href="https://2gis.ru/routeSearch/rsType/car/from/${t},${e}/to/${s},${l}"\n          target="_blank"\n          style="\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 12px;\n            padding: 16px;\n            background: linear-gradient(135deg, #31c754, #27a844);\n            color: white;\n            border-radius: 16px;\n            font-weight: bold;\n            font-size: 18px;\n            text-decoration: none;\n            box-shadow: 0 4px 12px rgba(49, 199, 84, 0.3);\n          "\n        >\n          <span style="font-size: 24px;">üó∫Ô∏è</span>\n          2–ì–ò–° –ù–∞–≤–∏–≥–∞—Ç–æ—Ä\n        </a>\n        \n        <button \n          onclick="this.closest('div').parentElement.remove()"\n          style="\n            padding: 12px;\n            background: #f3f4f6;\n            color: #6b7280;\n            border: none;\n            border-radius: 12px;\n            font-weight: bold;\n            cursor: pointer;\n            margin-top: 8px;\n          "\n        >\n          –ó–∞–∫—Ä—ã—Ç—å\n        </button>\n      </div>\n    </div>\n  `;const o=document.createElement("div");o.style.cssText="\n    position: fixed;\n    inset: 0;\n    background: rgba(0, 0, 0, 0.5);\n    z-index: 10000;\n  ",o.onclick=()=>{o.remove(),n.remove()},document.body.appendChild(o),document.body.appendChild(n)}(l.helper_latitude,l.helper_longitude,t.helpRequest.latitude,t.helpRequest.longitude,e)}catch(r){console.warn("–û—à–∏–±–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞:",r)}}t.chat&&(tt.value={...l,chat:t.chat},et.value=!0,wt(),ft()),xt("‚úÖ –ü–æ–º–æ—â–Ω–∏–∫ –ø—Ä–∏–Ω—è—Ç!");const n=null==(s=dt.value)?void 0:s.id,o=null==(a=rt.value)?void 0:a.user_id;n&&o&&n===o&&ct.value?await vt():console.log("‚ö†Ô∏è –ü–†–ï–î–û–¢–í–†–ê–©–ï–ù–û: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–∫–ª–∏–∫–æ–≤ –ø–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–ª–∞–¥–µ–ª–µ—Ü",{userId:n,ownerId:o})}}catch(i){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è –æ—Ç–∫–ª–∏–∫–∞:",i);const e=(null==(o=null==(n=i.response)?void 0:n.data)?void 0:o.error)||i.message||"–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–∏–Ω—è—Ç—å –ø–æ–º–æ—â—å";Xe.value=e,alert(`–û—à–∏–±–∫–∞: ${e}`)}finally{Qe.value=!1}}function xt(e){const t=document.createElement("div");t.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: linear-gradient(135deg, #10b981, #059669);\n    color: white;\n    padding: 16px 24px;\n    border-radius: 12px;\n    font-weight: bold;\n    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);\n    z-index: 10000;\n    animation: slideIn 0.3s ease-out;\n  ",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{t.remove()},5e3)}l(async()=>{var e,t;if(console.log("üìÑ ResponsesView mounted"),!Ne.user)try{await Ne.checkAuth(),console.log("‚úÖ User loaded from checkAuth:",null==(e=Ne.user)?void 0:e.id)}catch(l){console.error("Error checking auth:",l)}await new Promise(e=>setTimeout(e,300)),console.log("üë§ Current user before loadRequestInfo:",null==(t=dt.value)?void 0:t.id),await async function(){var e,t,s,a,n,r,i,u,d,c,p,v,m,g,x,b;try{Ye.value=!0,Xe.value=null;const l=We.params.id||We.params.requestId;if(console.log("üîç –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞—è–≤–∫–µ:",l),console.log("üë§ –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:",null==(e=dt.value)?void 0:e.id,null==(t=dt.value)?void 0:t.full_name),!dt.value){console.log("‚ö†Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –∑–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞—è–≤–∫–µ");try{const e=await j.getHelpRequest(l);if(e.success&&e.data)return rt.value=e.data,Ze.value=[],void(Ye.value=!1)}catch(f){return console.error("Error loading request for unauthorized user:",f),Xe.value="–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞—è–≤–∫–µ",void(Ye.value=!1)}}const r=await j.getHelpRequest(l);if(r.success&&r.data){rt.value=r.data,await o(),await new Promise(e=>setTimeout(e,300)),console.log("üìã –ó–∞—è–≤–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞:",{requestId:rt.value.id,ownerId:rt.value.user_id,currentUserId:null==(s=dt.value)?void 0:s.id,isOwner:ct.value});const e=null==(a=dt.value)?void 0:a.id,t=null==(n=rt.value)?void 0:n.user_id,l=e&&t&&e===t,i=ct.value;console.log("üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞:",{userId:e,ownerId:t,isOwner:l,isOwnerComputed:i,bothMatch:l&&i}),l&&i?(console.log("‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º, –∑–∞–≥—Ä—É–∂–∞–µ–º –æ—Ç–∫–ª–∏–∫–∏",{userId:e,ownerId:t}),await vt()):(console.log("‚ö†Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º, –ù–ï –∑–∞–≥—Ä—É–∂–∞–µ–º –æ—Ç–∫–ª–∏–∫–∏",{userId:e,ownerId:t,isOwner:l,isOwnerComputed:i}),Ze.value=[],Ye.value=!1)}else Xe.value="–ó–∞—è–≤–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞",Ye.value=!1}catch(l){if(console.error("‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∑–∞—è–≤–∫–∏:",l),console.error("‚ùå –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:",{message:l.message,response:null==(r=l.response)?void 0:r.data,status:null==(i=l.response)?void 0:i.status,requestId:We.params.id||We.params.requestId}),Ye.value=!1,403===(null==(u=l.response)?void 0:u.status)||404===(null==(d=l.response)?void 0:d.status))try{const e=We.params.id||We.params.requestId;console.log("üîÑ –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞–ø—Ä—è–º—É—é –ø–æ—Å–ª–µ 403/404:",e);const t=await j.getHelpRequest(e);if(t.success&&t.data){rt.value=t.data,console.log("‚úÖ –ó–∞—è–≤–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏:",{requestId:rt.value.id,ownerId:rt.value.user_id,currentUserId:null==(c=dt.value)?void 0:c.id,isOwner:ct.value}),await o(),await new Promise(e=>setTimeout(e,300));const e=null==(p=dt.value)?void 0:p.id,l=null==(v=rt.value)?void 0:v.user_id,s=e&&l&&e===l,a=ct.value;console.log("üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏:",{userId:e,ownerId:l,isOwner:s,isOwnerComputed:a}),s&&a?(console.log("‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º, –∑–∞–≥—Ä—É–∂–∞–µ–º –æ—Ç–∫–ª–∏–∫–∏",{userId:e,ownerId:l}),await vt()):(console.log("‚ö†Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï —è–≤–ª—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º, –ù–ï –∑–∞–≥—Ä—É–∂–∞–µ–º –æ—Ç–∫–ª–∏–∫–∏"),Ze.value=[],Ye.value=!1)}else Xe.value="–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞—è–≤–∫–µ",Ye.value=!1}catch(f){console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä—è–º–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –∑–∞—è–≤–∫–∏:",f),Xe.value=(null==(g=null==(m=l.response)?void 0:m.data)?void 0:g.error)||l.message||"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞—è–≤–∫–µ",Ye.value=!1}else Xe.value=(null==(b=null==(x=l.response)?void 0:x.data)?void 0:b.error)||l.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞—è–≤–∫–µ",Ye.value=!1}}(),console.log("WebSocket setup for responses")}),s(()=>{pt&&(clearInterval(pt),pt=null)}),a(()=>{pt&&clearInterval(pt)});const bt=e(null);async function ft(){var e,t;try{if(!(null==(t=null==(e=tt.value)?void 0:e.chat)?void 0:t.id))return console.warn("–ù–µ—Ç ID —á–∞—Ç–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π"),void(lt.value=[]);const l=await j.getChatMessages(tt.value.chat.id);l.success&&l.messages||l.messages?lt.value=l.messages:lt.value=[],await o(),ht()}catch(l){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π:",l),lt.value=[]}}async function yt(){var e,t,l;if(st.value.trim())if(null==(t=null==(e=tt.value)?void 0:e.chat)?void 0:t.id)try{const e=await j.sendChatMessage(tt.value.chat.id,st.value);if(e.success&&e.message)lt.value.push(e.message);else if(e.message)lt.value.push(e.message);else{const e={id:Date.now().toString(),sender_id:null==(l=dt.value)?void 0:l.id,content:st.value,created_at:(new Date).toISOString()};lt.value.push(e)}st.value="",await o(),ht()}catch(s){console.error("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:",s),alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: "+(s.message||"–û—à–∏–±–∫–∞"))}else alert("–ß–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω")}function ht(){at.value&&(at.value.scrollTop=at.value.scrollHeight)}function wt(){var e;pt&&clearInterval(pt),nt.value=tt.value.distance_km||0,ot.value=tt.value.eta_minutes||0;(null==(e=dt.value)?void 0:e.id)===tt.value.helper_id?navigator.geolocation?(console.log("–ù–∞—á–∞—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–æ–º–æ—â–Ω–∏–∫–∞"),pt=setInterval(async()=>{try{const t=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}),l=t.coords.latitude,s=t.coords.longitude;try{const e=await j.updateHelperLocation(tt.value.id,l,s);e.success&&(nt.value=parseFloat(e.distanceKm||nt.value),ot.value=parseInt(e.etaMinutes||ot.value),console.log(`üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ: ${nt.value} –∫–º, ~${ot.value} –º–∏–Ω`))}catch(e){console.warn("–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:",e)}}catch(t){console.warn("–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏:",t)}},1e4)):console.warn("–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è"):console.log("–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–æ–º–æ—â–Ω–∏–∫–∞ (–Ω–µ –ø–æ–º–æ—â–Ω–∏–∫)")}function kt(e){switch(e){case"pending":return"bg-white border-2 border-blue-200";case"accepted":return"bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-300";case"rejected":return"bg-gray-50 border-2 border-gray-200 opacity-75";default:return"bg-white"}}function _t(e){switch(e){case"pending":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-gray-100 text-gray-500";default:return"bg-gray-100 text-gray-700"}}function It(e){switch(e){case"pending":return"‚è≥ –û–∂–∏–¥–∞–µ—Ç";case"accepted":return"‚úÖ –ü—Ä–∏–Ω—è—Ç";case"rejected":return"‚ùå –û—Ç–∫–ª–æ–Ω—ë–Ω";default:return e}}function $t(e){if(!e)return"";if(e.startsWith("http://")||e.startsWith("https://"))return e;return`${"https://help-car.online/api/v1".replace("/api/v1","")}${e}`}return(e,t)=>{var l;const s=p("router-link");return k(),r("div",R,[i(q),u("div",z,[u("div",O,[u("div",M,[u("div",T,[i(s,{to:"/",class:"text-blue-600 hover:text-blue-800 font-semibold whitespace-nowrap"},{default:c(()=>[...t[4]||(t[4]=[_(" üè† –ì–ª–∞–≤–Ω–∞—è ",-1)])]),_:1}),t[6]||(t[6]=u("span",{class:"text-gray-400"},"/",-1)),i(s,{to:"/my-requests",class:"text-blue-600 hover:text-blue-800 font-semibold whitespace-nowrap"},{default:c(()=>[...t[5]||(t[5]=[_(" üìã –ú–æ–∏ –∑–∞–ø—Ä–æ—Å—ã ",-1)])]),_:1}),t[7]||(t[7]=u("span",{class:"text-gray-400"},"/",-1)),t[8]||(t[8]=u("span",{class:"text-gray-600 font-semibold whitespace-nowrap"},"–û—Ç–∫–ª–∏–∫–∏",-1))]),u("h1",P,[ct.value?(k(),r("span",E,"–û—Ç–∫–ª–∏–∫–∏ –Ω–∞ –≤–∞—à –∑–∞–ø—Ä–æ—Å")):rt.value?(k(),r("span",H,"–û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è –Ω–∞ –∑–∞—è–≤–∫—É")):(k(),r("span",U,"–ó–∞—è–≤–∫–∞"))]),u("p",S,[ct.value?(k(),r("span",A,"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≥–æ, –∫—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º")):rt.value?(k(),r("span",D,"–û—Å—Ç–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—É –∑–∞—è–≤–∫–∏")):(k(),r("span",L,"–ó–∞–≥—Ä—É–∑–∫–∞..."))])]),Ye.value?(k(),r("div",F,[...t[9]||(t[9]=[u("div",{class:"inline-block w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"},null,-1),u("p",{class:"mt-4 text-xl text-gray-600 font-semibold"}," –ó–∞–≥—Ä—É–∑–∫–∞... ",-1)])])):Xe.value?(k(),r("div",V,[u("p",G,v(Xe.value),1)])):!ct.value&&rt.value?(k(),r("div",W,[u("div",B,[u("h2",N,v(rt.value.description||"–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–º–æ—â—å"),1),rt.value.images&&rt.value.images.length>0?(k(),r("div",J,[u("div",K,[(k(!0),r(m,null,g(rt.value.images,(e,t)=>(k(),r("img",{key:t,src:$t(e.url||e.thumbnail_url||e),alt:`–§–æ—Ç–æ ${t+1}`,class:"h-24 w-24 object-cover rounded-lg border-2 border-gray-200 hover:border-blue-400 cursor-pointer transition",onClick:t=>{return l=$t(e.url||e),void window.open(l,"_blank");var l}},null,8,Y))),128))])])):d("",!0),u("div",Q,[u("div",null,[t[10]||(t[10]=u("span",{class:"font-bold text-gray-600"},"–¢–∏–ø:",-1)),u("span",X,v(x(Ke)(rt.value.problem_type))+" "+v(x(Je)(rt.value.problem_type)),1)]),u("div",null,[t[11]||(t[11]=u("span",{class:"font-bold text-gray-600"},"–°—É–º–º–∞:",-1)),u("span",Z,v(rt.value.amount||0)+" ‚ÇΩ",1)]),rt.value.address?(k(),r("div",ee,[t[12]||(t[12]=u("span",{class:"font-bold text-gray-600"},"–ê–¥—Ä–µ—Å:",-1)),u("span",te,v(rt.value.address),1)])):d("",!0),u("div",null,[t[13]||(t[13]=u("span",{class:"font-bold text-gray-600"},"–°—Ç–∞—Ç—É—Å:",-1)),u("span",le,v("active"===rt.value.status?"–ê–∫—Ç–∏–≤–Ω–∞":rt.value.status),1)])]),rt.value.latitude&&rt.value.longitude&&rt.value.address?(k(),r("div",se,[u("a",{href:`https://yandex.ru/maps/?rtext=~${rt.value.latitude},${rt.value.longitude}`,target:"_blank",class:"flex-1 px-4 py-3 bg-yellow-500 text-white rounded-xl font-bold text-center hover:bg-yellow-600 transition flex items-center justify-center gap-2"},[...t[14]||(t[14]=[u("span",null,"üó∫Ô∏è",-1),u("span",null,"–Ø–Ω–¥–µ–∫—Å.–ù–∞–≤–∏–≥–∞—Ç–æ—Ä",-1)])],8,ae),u("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${rt.value.latitude},${rt.value.longitude}`,target:"_blank",class:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-xl font-bold text-center hover:bg-blue-700 transition flex items-center justify-center gap-2"},[...t[15]||(t[15]=[u("span",null,"üó∫Ô∏è",-1),u("span",null,"Google Maps",-1)])],8,ne)])):d("",!0)]),u("form",{onSubmit:b(mt,["prevent"])},[u("div",oe,[t[16]||(t[16]=u("label",{class:"block text-base sm:text-lg font-black text-gray-900 mb-2 sm:mb-3"}," üí¨ –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—É –∑–∞—è–≤–∫–∏ ",-1)),f(u("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>it.value=e),required:"",rows:"4",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: –Ø —Ä—è–¥–æ–º, –º–æ–≥—É –ø–æ–º–æ—á—å —á–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç...",class:"w-full px-3 sm:px-5 py-3 sm:py-4 text-sm sm:text-base md:text-lg rounded-xl border-2 border-gray-300 focus:ring-4 focus:ring-blue-500 focus:border-blue-500 transition resize-none"},null,512),[[y,it.value]])]),dt.value?(k(),r("button",{key:1,type:"submit",disabled:ut.value||!it.value.trim(),class:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-black text-base sm:text-lg hover:from-blue-700 hover:to-purple-700 active:from-blue-800 active:to-purple-800 transition shadow-xl disabled:opacity-50 disabled:cursor-not-allowed"},[ut.value?(k(),r("span",ue,"‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...")):(k(),r("span",de,"‚úÖ –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è"))],8,ie)):(k(),r("div",re,[t[18]||(t[18]=u("p",{class:"text-yellow-800 font-bold mb-1 sm:mb-2 text-sm sm:text-base"}," üîí –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ",-1)),t[19]||(t[19]=u("p",{class:"text-xs sm:text-sm text-yellow-700 mb-2 sm:mb-3"}," –î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–∫–ª–∏–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É ",-1)),i(s,{to:"/login",class:"inline-block px-4 sm:px-6 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 active:bg-blue-800 transition text-sm sm:text-base"},{default:c(()=>[...t[17]||(t[17]=[_(" –í–æ–π—Ç–∏ ",-1)])]),_:1})]))],32)])):ct.value?(k(),r("div",ce,[0===Ze.value.length?(k(),r("div",pe,[...t[20]||(t[20]=[h('<div class="w-32 h-32 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-8"><svg class="w-16 h-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg></div><p class="text-gray-500 text-xl font-semibold"> –ü–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–µ –æ—Ç–∫–ª–∏–∫–Ω—É–ª—Å—è </p><p class="text-gray-400 mt-2"> –û–∂–∏–¥–∞–π—Ç–µ –æ—Ç–∫–ª–∏–∫–æ–≤ –æ—Ç –ø–æ–º–æ—â–Ω–∏–∫–æ–≤ —Ä—è–¥–æ–º —Å –≤–∞–º–∏ </p>',3)])])):(k(),r("div",ve,[(k(!0),r(m,null,g(Ze.value,e=>{return k(),r("div",{key:e.id,class:I(["p-4 sm:p-6 md:p-8 rounded-2xl sm:rounded-3xl shadow-xl transition-all transform hover:scale-[1.01] sm:hover:scale-102",kt(e.status)])},[u("div",me,[u("div",ge,[u("div",xe,[u("span",be,v((t=e.helper.full_name,t.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))),1)]),u("div",fe,[u("div",ye,[i(s,{to:`/user/${e.helper.id}`,class:"text-lg sm:text-xl md:text-2xl font-black text-gray-900 truncate hover:text-blue-600 transition"},{default:c(()=>[_(v(e.helper.full_name),1)]),_:2},1032,["to"]),u("div",{class:I(["px-3 sm:px-4 md:px-6 py-1.5 sm:py-2 md:py-3 rounded-xl sm:rounded-2xl font-black text-xs sm:text-sm md:text-lg flex-shrink-0",_t(e.status)])},v(It(e.status)),3)]),u("div",he,[u("p",we," üìû "+v(e.helper.phone),1),e.distance_km?(k(),r("span",ke," üìç "+v(e.distance_km)+" –∫–º ",1)):d("",!0),e.eta_minutes?(k(),r("span",_e," ‚è±Ô∏è ~"+v(e.eta_minutes)+" –º–∏–Ω ",1)):d("",!0)]),e.message?(k(),r("p",Ie," üí¨ "+v(e.message),1)):d("",!0)])])]),"pending"===e.status&&ct.value?(k(),r("div",$e,[u("button",{disabled:Qe.value,class:"flex-1 px-4 sm:px-6 py-3 sm:py-4 border-2 border-gray-300 text-gray-700 rounded-xl sm:rounded-2xl font-black text-sm sm:text-base md:text-lg hover:bg-gray-50 active:bg-gray-100 transition disabled:opacity-50",onClick:t=>async function(e){if(confirm("–û—Ç–∫–ª–æ–Ω–∏—Ç—å —ç—Ç–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞?"))try{Qe.value=!0,await j.rejectResponse(e,"–í—ã–±—Ä–∞–Ω –¥—Ä—É–≥–æ–π –ø–æ–º–æ—â–Ω–∏–∫");const t=Ze.value.find(t=>t.id===e);t&&(t.status="rejected")}catch(t){alert("–û—à–∏–±–∫–∞: "+(t.message||"–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –ø–æ–º–æ—â—å"))}finally{Qe.value=!1}}(e.id)}," ‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å ",8,je),u("button",{disabled:Qe.value,class:"flex-1 px-4 sm:px-6 py-3 sm:py-4 bg-gradient-to-r from-green-500 to-green-700 text-white rounded-xl sm:rounded-2xl font-black text-sm sm:text-base md:text-lg hover:from-green-600 hover:to-green-800 active:from-green-700 active:to-green-900 transition shadow-xl disabled:opacity-50",onClick:t=>gt(e.id)}," ‚úÖ –ü—Ä–∏–Ω—è—Ç—å –ø–æ–º–æ—â—å ",8,qe)])):d("",!0),"accepted"===e.status?(k(),r("div",Ce,[u("button",{class:"w-full px-4 sm:px-6 py-3 sm:py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl sm:rounded-2xl font-black text-sm sm:text-base md:text-lg hover:from-blue-600 hover:to-purple-700 active:from-blue-700 active:to-purple-800 transition shadow-xl",onClick:t=>function(e){tt.value=e,et.value=!0,wt(),ft()}(e)}," üí¨ –û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç —Å –ø–æ–º–æ—â–Ω–∏–∫–æ–º ",8,Re)])):d("",!0)],2);var t}),128))]))])):d("",!0)])]),et.value?(k(),r("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t[3]||(t[3]=b(e=>et.value=!1,["self"]))},[u("div",ze,[u("div",Oe,[u("div",Me,[u("div",null,[u("h3",Te,v(null==(l=tt.value)?void 0:l.helper.full_name),1),u("p",Pe,[nt.value?(k(),r("span",Ee,"üìç "+v(nt.value)+" –∫–º ‚Ä¢ ‚è±Ô∏è "+v(ot.value)+" –º–∏–Ω",1)):(k(),r("span",He,"üí¨ –ß–∞—Ç —Å –ø–æ–º–æ—â–Ω–∏–∫–æ–º"))])]),u("button",{class:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition",onClick:t[1]||(t[1]=e=>et.value=!1)},[...t[21]||(t[21]=[u("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),u("div",{ref_key:"chatContainer",ref:at,class:"flex-1 overflow-y-auto p-6 space-y-4 bg-gray-50"},[0===lt.value.length?(k(),r("div",Ue,[...t[22]||(t[22]=[u("p",{class:"text-gray-400 font-semibold"}," –ù–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ ",-1)])])):d("",!0),(k(!0),r(m,null,g(lt.value,e=>{var t,l,s,a;return k(),r("div",{key:e.id,class:I(["flex",e.sender_id===(null==(t=dt.value)?void 0:t.id)?"justify-end":"justify-start"])},[u("div",{class:I(["max-w-xs px-4 py-3 rounded-2xl",e.sender_id===(null==(l=dt.value)?void 0:l.id)?"bg-gradient-to-r from-blue-500 to-purple-600 text-white":"bg-white text-gray-900 shadow-md"])},[u("p",Se,v(e.content),1),u("p",{class:I(["text-xs mt-1",e.sender_id===(null==(s=dt.value)?void 0:s.id)?"text-blue-100":"text-gray-400"])},v((a=e.created_at,new Date(a).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}))),3)],2)],2)}),128))],512),dt.value?d("",!0):(k(),r("div",Ae,[u("div",De,[t[25]||(t[25]=u("h3",{class:"text-lg font-bold text-yellow-800 mb-2"}," üîí –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ",-1)),t[26]||(t[26]=u("p",{class:"text-sm text-yellow-700 mb-3"}," –î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É ",-1)),u("div",Le,[i(s,{to:"/login",class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-bold text-sm hover:bg-blue-700 transition"},{default:c(()=>[...t[23]||(t[23]=[_(" –í–æ–π—Ç–∏ ",-1)])]),_:1}),i(s,{to:"/register",class:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-bold text-sm hover:bg-green-700 transition"},{default:c(()=>[...t[24]||(t[24]=[_(" –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ",-1)])]),_:1})])])])),dt.value?(k(),r("div",Fe,[u("form",{class:"flex gap-3",onSubmit:b(yt,["prevent"])},[f(u("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>st.value=e),type:"text",placeholder:"–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...",class:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,512),[[y,st.value]]),u("button",{type:"submit",disabled:!st.value.trim(),class:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-bold hover:from-blue-600 hover:to-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed"}," –û—Ç–ø—Ä–∞–≤–∏—Ç—å ",8,Ve)],32)])):d("",!0)])])):d("",!0)])}}};export{Ge as default};
