import{r as e,h as s,l as a,G as r,p as t,m as l,I as o,J as n,t as u,v as d,f as i,g as m,x as c,y as p,k as v}from"./vendor-mW7CftnD-v1766841819551.js";import{l as f}from"./index-DeybhuSP-v1766841819551.js";import{b,a as g}from"./index-Y1ONQ0D2-v1766841819551.js";import"./utils-MqoAbdB_-v1766841819551.js";import"./maps-CCq-KL9W-v1766841819551.js";const x={class:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},y={class:"max-w-md w-full space-y-8"},w={class:"space-y-4"},h={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},k=["disabled"],j={key:0,class:"mr-2"},A={key:1,class:"mr-2"},S={class:"text-center"},q={__name:"AdminLogin",setup(q){const I=p(),T=e(!1),_=e(""),z=e({username:"",password:""}),J=async()=>{var e,s;T.value=!0,_.value="";try{b.info("Admin login attempt",{username:z.value.username});const a=await g.adminLogin({username:z.value.username,password:z.value.password});if(a.success){const r=a.token||(null==(e=a.data)?void 0:e.token),t=a.admin||(null==(s=a.data)?void 0:s.admin);if(!r)return _.value="–¢–æ–∫–µ–Ω –Ω–µ –ø–æ–ª—É—á–µ–Ω –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞",b.error("Admin login: token missing",{username:z.value.username,data:a}),void f.error("–¢–æ–∫–µ–Ω –Ω–µ –ø–æ–ª—É—á–µ–Ω –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞");localStorage.setItem("adminToken",r),localStorage.setItem("admin",JSON.stringify(t)),b.info("Admin login successful",{username:z.value.username}),I.push("/admin/dashboard")}else _.value=a.error||a.message||"–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞",b.warn("Admin login failed",{username:z.value.username,error:a.error||a.message}),f.error(a.error||a.message||"–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞")}catch(a){let e="–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É";if(a.response){const s=a.response.status,r=a.response.data||{};e=r.error||r.message||`HTTP ${s}`,401===s?e="–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å":500===s&&(e="–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")}else a.request?e="–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.":a.message&&(e=a.message);_.value=e,b.error("Admin login error:",{err:a,message:e,username:z.value.username}),f.error(e)}finally{T.value=!1}};return(e,p)=>{const f=c("router-link");return v(),s("div",x,[a("div",y,[p[5]||(p[5]=r('<div class="text-center"><div class="mx-auto h-16 w-16 bg-white rounded-full flex items-center justify-center mb-4"><span class="text-2xl">üîß</span></div><h2 class="text-3xl font-extrabold text-white"> –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å </h2><p class="mt-2 text-sm text-blue-200"> –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ </p></div>',1)),a("form",{class:"mt-8 space-y-6",onSubmit:t(J,["prevent"])},[a("div",w,[a("div",null,[p[2]||(p[2]=a("label",{for:"username",class:"block text-sm font-medium text-white mb-2"}," üë§ –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ",-1)),o(a("input",{id:"username","onUpdate:modelValue":p[0]||(p[0]=e=>z.value.username=e),type:"text",autocomplete:"username",required:"",class:"appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"},null,512),[[n,z.value.username]])]),a("div",null,[p[3]||(p[3]=a("label",{for:"password",class:"block text-sm font-medium text-white mb-2"}," üîí –ü–∞—Ä–æ–ª—å ",-1)),o(a("input",{id:"password","onUpdate:modelValue":p[1]||(p[1]=e=>z.value.password=e),type:"password",autocomplete:"current-password",required:"",class:"appearance-none rounded-lg relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"},null,512),[[n,z.value.password]])])]),_.value?(v(),s("div",h,u(_.value),1)):l("",!0),a("div",null,[a("button",{type:"submit",disabled:T.value,class:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[T.value?(v(),s("span",j,"‚è≥")):(v(),s("span",A,"üöÄ")),d(" "+u(T.value?"–í—Ö–æ–¥...":"–í–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"),1)],8,k)]),a("div",S,[i(f,{to:"/login",class:"text-blue-200 hover:text-white text-sm"},{default:m(()=>[...p[4]||(p[4]=[d(" ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–±—ã—á–Ω–æ–º—É –≤—Ö–æ–¥—É ",-1)])]),_:1})])],32)])])}}};export{q as default};
