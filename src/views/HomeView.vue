<template>
  <div class="min-h-screen bg-gray-50 dark:bg-slate-800">
    <!-- Hero Section -->
    <div class="relative min-h-screen bg-gradient-to-br from-slate-900 via-blue-950 to-indigo-950 text-white overflow-hidden">
      <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω —Å —á–∞—Å—Ç–∏—Ü–∞–º–∏ -->
      <div class="absolute inset-0">
        <div class="absolute inset-0 bg-[url('/assets/road-landscape.svg')] opacity-10 bg-cover bg-center" />
        <!-- –°–≤–µ—Ç—è—â–∏–µ—Å—è –∫—Ä—É–≥–∏ -->
        <div class="absolute top-20 left-10 w-72 h-72 bg-blue-500/30 rounded-full blur-3xl animate-pulse" />
        <div class="absolute bottom-20 right-10 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 2s;" />
        <div class="absolute top-1/2 left-1/2 w-64 h-64 bg-cyan-500/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;" />
      </div>

      <!-- –ê–Ω–∏–º–∞—Ü–∏—è –¥–æ—Ä–æ–≥–∏ -->
      <div
        class="absolute inset-0 opacity-20"
        style="
        background-image: 
          repeating-linear-gradient(90deg, transparent, transparent 40px, rgba(255,255,255,0.2) 40px, rgba(255,255,255,0.2) 50px),
          repeating-linear-gradient(0deg, transparent, transparent 100px, rgba(255,255,255,0.1) 100px, rgba(255,255,255,0.1) 110px);
        animation: road-scroll 60s linear infinite;
      "
      />

      <!-- Nav -->
      <nav class="relative z-10 container mx-auto px-4 sm:px-6 py-4 sm:py-6">
        <div class="flex items-center justify-between gap-2">
          <div class="flex items-center space-x-2 sm:space-x-3 group cursor-pointer">
            <div class="w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-2xl group-hover:scale-110 transition-transform flex-shrink-0">
              <svg
                class="w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 text-white"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z" />
              </svg>
            </div>
            <span class="text-lg sm:text-xl md:text-2xl lg:text-3xl font-black tracking-tight bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent">Help-Car</span>
          </div>
          
          <div class="flex items-center gap-2 sm:gap-4">
            <router-link
              to="/register"
              class="px-3 sm:px-6 md:px-8 py-2 sm:py-3 md:py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg sm:rounded-xl font-black text-xs sm:text-sm md:text-lg hover:from-blue-500 hover:to-purple-500 transition-all shadow-2xl hover:shadow-blue-500/50 hover:scale-105 text-center whitespace-nowrap"
            >
              <span class="hidden sm:inline">üöÄ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</span>
              <span class="sm:hidden">üöÄ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</span>
            </router-link>
            <router-link
              to="/login"
              class="px-3 sm:px-4 md:px-6 py-2 sm:py-3 md:py-4 bg-white/10 backdrop-blur-md hover:bg-white/20 rounded-lg sm:rounded-xl transition-all font-bold text-xs sm:text-sm md:text-lg border border-white/20 hover:scale-105 text-center whitespace-nowrap"
            >
              –í–æ–π—Ç–∏
            </router-link>
          </div>
        </div>
      </nav>

      <!-- Hero Content -->
      <div class="relative z-10 container mx-auto px-4 sm:px-6 py-12 sm:py-16 md:py-24">
        <!-- Badge -->
        <div class="flex justify-center mb-6 sm:mb-8">
          <div class="inline-flex items-center gap-2 px-4 sm:px-6 py-2 sm:py-3 bg-white/10 backdrop-blur-md rounded-full border border-white/20 text-xs sm:text-sm font-bold">
            <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse" />
            <span>üìç –ë–æ–ª–µ–µ {{ stats.totalUsers }} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–Ω–ª–∞–π–Ω</span>
          </div>
        </div>

        <!-- Main Title -->
        <div class="text-center max-w-6xl mx-auto">
          <h1 class="text-3xl sm:text-4xl md:text-6xl lg:text-7xl xl:text-8xl font-black mb-6 sm:mb-8 leading-tight px-2">
            <span class="inline-block animate-fade-in">–°–ª–æ–º–∞–ª—Å—è –≤ –ø—É—Ç–∏?</span><br>
            <span class="inline-block bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent animate-fade-in" style="animation-delay: 0.2s;">
              –ü–æ–º–æ—â—å —É–∂–µ —Ä—è–¥–æ–º!
            </span>
          </h1>
          
          <p class="text-base sm:text-lg md:text-2xl lg:text-3xl mb-8 sm:mb-12 text-blue-100 font-semibold max-w-4xl mx-auto leading-relaxed animate-fade-in px-4" style="animation-delay: 0.4s;">
            üöó –°–µ–ª –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä? –°–ø—É—Å—Ç–∏–ª–æ –∫–æ–ª–µ—Å–æ? –ó–∞–∫–æ–Ω—á–∏–ª—Å—è –±–µ–Ω–∑–∏–Ω?<br>
            <span class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-black text-white mt-2 sm:mt-4 inline-block">
              –ù–∞–π–¥–∏ –ø–æ–º–æ—â–Ω–∏–∫–∞ –∑–∞ 60 —Å–µ–∫—É–Ω–¥!
            </span>
          </p>

          <!-- CTA Buttons -->
          <div class="flex flex-col sm:flex-row gap-4 sm:gap-6 justify-center items-stretch sm:items-center mb-8 sm:mb-12 animate-fade-in px-4" style="animation-delay: 0.6s;">
            <router-link
              to="/register"
              class="group relative px-8 sm:px-10 md:px-12 py-4 sm:py-5 md:py-6 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl sm:rounded-2xl text-lg sm:text-xl md:text-2xl font-black hover:from-blue-500 hover:to-purple-500 transition-all transform hover:scale-105 sm:hover:scale-110 shadow-2xl hover:shadow-blue-500/50 overflow-hidden"
            >
              <div class="absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-400 opacity-0 group-hover:opacity-100 transition-opacity blur" />
              <span class="relative flex items-center justify-center gap-2 sm:gap-3">
                üöÄ –ù–∞—á–∞—Ç—å —Å–µ–π—á–∞—Å
                <svg class="w-5 h-5 sm:w-6 sm:h-6 group-hover:translate-x-2 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                </svg>
              </span>
            </router-link>
            <a
              href="#live-map"
              class="px-8 sm:px-10 md:px-12 py-4 sm:py-5 md:py-6 border-3 sm:border-4 border-white/50 backdrop-blur-md rounded-xl sm:rounded-2xl text-lg sm:text-xl md:text-2xl font-black hover:bg-white/10 hover:border-white transition-all hover:scale-105 flex items-center justify-center gap-2 sm:gap-3"
            >
              üó∫Ô∏è –°–º–æ—Ç—Ä–µ—Ç—å –∫–∞—Ä—Ç—É
            </a>
          </div>

          <!-- Stats Row -->
          <div class="grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 md:gap-6 max-w-5xl mx-auto animate-fade-in px-2" style="animation-delay: 0.8s;">
            <div class="bg-white/10 backdrop-blur-md rounded-xl sm:rounded-2xl p-4 sm:p-6 border border-white/20 hover:bg-white/20 transition-all hover:scale-105">
              <div class="text-3xl sm:text-4xl md:text-5xl font-black bg-gradient-to-r from-green-400 to-emerald-400 bg-clip-text text-transparent mb-1 sm:mb-2">
                {{ stats.totalHelpers }}+
              </div>
              <div class="text-xs sm:text-sm md:text-base font-bold text-blue-100">
                üë®‚Äçüîß –ü–æ–º–æ—â–Ω–∏–∫–æ–≤
              </div>
            </div>
            <div class="bg-white/10 backdrop-blur-md rounded-xl sm:rounded-2xl p-4 sm:p-6 border border-white/20 hover:bg-white/20 transition-all hover:scale-105">
              <div class="text-3xl sm:text-4xl md:text-5xl font-black bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent mb-1 sm:mb-2">
                {{ stats.completedRequests }}+
              </div>
              <div class="text-xs sm:text-sm md:text-base font-bold text-blue-100">
                ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ
              </div>
            </div>
            <div class="bg-white/10 backdrop-blur-md rounded-xl sm:rounded-2xl p-4 sm:p-6 border border-white/20 hover:bg-white/20 transition-all hover:scale-105">
              <div class="text-3xl sm:text-4xl md:text-5xl font-black bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent mb-1 sm:mb-2">
                &lt;5 –º–∏–Ω
              </div>
              <div class="text-xs sm:text-sm md:text-base font-bold text-blue-100">
                ‚è±Ô∏è –û—Ç–∫–ª–∏–∫
              </div>
            </div>
            <div class="bg-white/10 backdrop-blur-md rounded-xl sm:rounded-2xl p-4 sm:p-6 border border-white/20 hover:bg-white/20 transition-all hover:scale-105">
              <div class="text-3xl sm:text-4xl md:text-5xl font-black bg-gradient-to-r from-pink-400 to-rose-400 bg-clip-text text-transparent mb-1 sm:mb-2">
                24/7
              </div>
              <div class="text-xs sm:text-sm md:text-base font-bold text-blue-100">
                üåê –û–Ω–ª–∞–π–Ω
              </div>
            </div>
          </div>
        </div>

        <!-- Scroll indicator -->
        <div class="hidden sm:block absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce">
          <svg class="w-8 h-8 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
          </svg>
        </div>
      </div>
    </div>

    <!-- –ñ–ò–í–ê–Ø –ö–ê–†–¢–ê –ù–ê –ì–õ–ê–í–ù–û–ô -->
    <div
      id="live-map"
      class="py-12 sm:py-16 md:py-24 bg-gradient-to-br from-gray-50 to-blue-50 dark:from-slate-800 dark:to-slate-900"
    >
      <div class="container mx-auto px-4 sm:px-6">
        <div class="text-center mb-8 sm:mb-12 md:mb-16">
          <h2 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black mb-4 sm:mb-6 md:mb-8 text-gray-900 dark:text-white">
            üó∫Ô∏è –ñ–∏–≤–∞—è –∫–∞—Ä—Ç–∞ –ø–æ–º–æ—â–∏
          </h2>
          <p class="text-base sm:text-lg md:text-xl lg:text-2xl text-gray-700 dark:text-gray-200 max-w-4xl mx-auto font-bold leading-relaxed px-2">
            –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.<br>
            –ö–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –ø—Ä–æ—Å–∏—Ç –ø–æ–º–æ—â—å - –∫–∞—Ä—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ –Ω–µ–º—É!
          </p>
        </div>
        
        <!-- –ñ–∏–≤–∞—è –∫–∞—Ä—Ç–∞ —Å –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª—å—é -->
        <div class="relative">
          <div class="absolute -inset-1 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 rounded-3xl blur opacity-25 animate-pulse" />
          <div class="relative h-[500px] md:h-[700px] bg-white rounded-3xl overflow-hidden shadow-2xl flex">
            <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø–∞–Ω–µ–ª–∏ (—Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö) -->
            <button
              class="absolute top-4 left-4 md:hidden bg-white/90 backdrop-blur-sm p-3 rounded-xl shadow-lg hover:bg-white transition-all"
              :style="{ zIndex: Z_INDEX.TOGGLE_BUTTON }"
              aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫"
              @click="showSidebar = !showSidebar"
            >
              <svg
                v-if="!showSidebar"
                class="w-6 h-6 text-gray-700"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                />
              </svg>
              <svg
                v-else
                class="w-6 h-6 text-gray-700"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
            
            <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å–æ —Å–ø–∏—Å–∫–æ–º –∑–∞—è–≤–æ–∫ -->
            <div
              :class="[
                'absolute md:relative inset-y-0 left-0',
                'w-full sm:w-96',
                'bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm',
                'border-r-2 border-gray-200 dark:border-slate-600',
                'flex flex-col overflow-hidden',
                'transition-transform duration-300 ease-in-out',
                showSidebar ? 'translate-x-0' : '-translate-x-full md:translate-x-0'
              ]"
              :style="{ zIndex: Z_INDEX.SIDEBAR }"
            >
              <div class="p-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white">
                <div class="flex items-center space-x-2 mb-2">
                  <div class="w-3 h-3 bg-red-400 rounded-full animate-pulse" />
                  <h3 class="text-2xl font-black">
                    –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
                  </h3>
                </div>
                <p class="text-blue-100 font-semibold">
                  {{ filteredRequests.length }} —Ä—è–¥–æ–º —Å –≤–∞–º–∏
                </p>
                
                <!-- –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É -->
                <div class="mt-4 grid grid-cols-2 sm:grid-cols-3 gap-2">
                  <button 
                    v-for="t in typeOptions"
                    :key="t.value"
                    :class="['px-3 py-2 rounded-lg text-sm font-bold transition', activeType === t.value ? 'bg-white text-blue-600' : 'bg-white/20 text-white hover:bg-white/30']"
                    :aria-pressed="activeType === t.value"
                    @click="activeType = t.value"
                  >
                    {{ t.label }}
                  </button>
                </div>
              </div>
              
              <div class="flex-1 overflow-y-auto p-4 space-y-3">
                <!-- Skeleton —Å–ø–∏—Å–æ–∫ -->
                <template v-if="isLoadingList">
                  <div
                    v-for="i in 4"
                    :key="'s'+i"
                    class="p-4 border-2 border-gray-200 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700"
                  >
                    <div class="flex items-start space-x-3">
                      <div class="w-14 h-14 rounded-xl bg-gray-200 skeleton" />
                      <div class="flex-1 space-y-2">
                        <div class="h-4 bg-gray-200 rounded w-3/4 skeleton" />
                        <div class="h-3 bg-gray-200 rounded w-full skeleton" />
                        <div class="flex items-center justify-between mt-2">
                          <div class="h-4 bg-gray-200 rounded w-16 skeleton" />
                          <div class="h-3 bg-gray-200 rounded w-20 skeleton" />
                        </div>
                      </div>
                    </div>
                  </div>
                </template>

                <!-- –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫ -->
                <template v-else>
                  <div
                    v-for="request in filteredRequests"
                    :key="request.id"
                    class="group p-4 border-2 border-gray-200 dark:border-slate-600 rounded-xl hover:border-blue-500 dark:hover:border-blue-400 hover:shadow-xl transition-all cursor-pointer bg-white dark:bg-slate-700 hover:bg-gradient-to-br hover:from-white hover:to-blue-50 dark:hover:from-slate-700 dark:hover:to-slate-600 animate-fade-in"
                    @click="showRequestDetails(request)"
                  >
                    <div class="flex items-start space-x-3">
                      <div :class="['w-16 h-16 md:w-14 md:h-14 rounded-xl flex items-center justify-center shadow-md group-hover:shadow-lg transition-all', getIconGradient(request.type)]">
                        <span class="text-2xl">{{ getIcon(request.type) }}</span>
                      </div>
                      
                      <div class="flex-1 min-w-0">
                        <h4 class="text-base font-black text-gray-900 dark:text-white mb-1 truncate">
                          {{ request.title }}
                        </h4>
                        <p class="text-sm text-gray-600 dark:text-gray-300 line-clamp-2 mb-2">
                          {{ request.description }}
                        </p>
                        <div class="flex items-center justify-between">
                          <span class="text-lg font-black text-green-600 dark:text-green-400">{{ request.amount }}‚ÇΩ</span>
                          <span class="text-xs text-gray-500 dark:text-gray-300">üìç {{ request.distance }}</span>
                        </div>
                        <p class="text-xs text-gray-400 dark:text-gray-300 mt-1">
                          üïí {{ formatDate(request.created_at) }}
                        </p>
                      </div>
                    </div>
                  </div>
                </template>
              </div>
            </div>
            
            <!-- –ö–∞—Ä—Ç–∞ -->
            <div
              class="flex-1 relative"
              :style="{ zIndex: Z_INDEX.MAP }"
            >
              <!-- –õ–µ–Ω–∏–≤—ã–π —Ä–µ–Ω–¥–µ—Ä –∫–∞—Ä—Ç—ã —Å skeleton -->
              <Suspense>
                <template #default>
                  <LazyMap
                    ref="mapRef"
                    :requests="filteredRequests"
                    @ready="onMapReady"
                  />
                </template>
                <template #fallback>
                  <div class="w-full h-full grid place-items-center">
                    <div class="animate-pulse text-center">
                      <div class="w-24 h-24 rounded-full bg-gradient-to-br from-blue-200 to-purple-200 mx-auto mb-4" />
                      <div class="h-4 w-64 bg-gray-200 rounded mx-auto mb-2" />
                      <div class="h-4 w-48 bg-gray-200 rounded mx-auto" />
                    </div>
                  </div>
                </template>
              </Suspense>
            </div>
          </div>
        </div>
        
        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ –∑–∞–ø—Ä–æ—Å–∞ (–≤—ã–Ω–µ—Å–µ–Ω–æ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–∞—Ä—Ç—ã) -->
        <Transition name="modal">
          <div 
            v-if="selectedRequest" 
            class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4" 
            :style="{ zIndex: Z_INDEX.MODAL }"
            role="dialog"
            aria-modal="true" 
            :aria-labelledby="'request-title'" 
            @click.self="selectedRequest = null"
          >
            <div
              class="bg-white dark:bg-slate-800 rounded-2xl md:rounded-3xl p-4 md:p-8 max-w-2xl w-full shadow-2xl focus:outline-none"
              tabindex="-1"
            >
              <div class="flex items-start justify-between mb-4 md:mb-6">
                <div class="flex items-center space-x-3 md:space-x-4">
                  <div :class="['w-16 h-16 md:w-20 md:h-20 rounded-xl md:rounded-2xl flex items-center justify-center shadow-lg', getIconGradient(selectedRequest.type)]">
                    <span class="text-3xl md:text-4xl">{{ getIcon(selectedRequest.type) }}</span>
                  </div>
                  <div>
                    <h2
                      :id="'request-title'"
                      class="text-xl md:text-3xl font-black text-gray-900 dark:text-white"
                    >
                      {{ selectedRequest.title }}
                    </h2>
                    <p class="text-base md:text-lg text-gray-600 dark:text-gray-300 font-semibold">
                      {{ selectedRequest.distance }}
                    </p>
                  </div>
                </div>
                <button
                  class="text-gray-400 hover:text-gray-600 text-2xl md:text-3xl font-bold focus:outline-none focus:ring-4 focus:ring-gray-300 rounded-lg p-1"
                  aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ"
                  @click="selectedRequest = null"
                >
                  √ó
                </button>
              </div>
                
              <!-- Skeleton –º–æ–¥–∞–ª–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ -->
              <div
                v-if="isLoadingModal"
                class="space-y-4 mb-6"
              >
                <div class="bg-gray-50 rounded-2xl p-6">
                  <div class="h-5 w-40 bg-gray-200 rounded skeleton mb-3" />
                  <div class="h-4 w-full bg-gray-200 rounded skeleton mb-2" />
                  <div class="h-4 w-5/6 bg-gray-200 rounded skeleton" />
                </div>
                <div class="grid grid-cols-2 gap-4">
                  <div class="bg-green-50 rounded-2xl p-6 text-center">
                    <div class="h-4 w-24 bg-green-200 rounded mx-auto skeleton mb-2" />
                    <div class="h-8 w-20 bg-green-200 rounded mx-auto skeleton" />
                  </div>
                  <div class="bg-blue-50 rounded-2xl p-6 text-center">
                    <div class="h-4 w-24 bg-blue-200 rounded mx-auto skeleton mb-2" />
                    <div class="h-8 w-24 bg-blue-200 rounded mx-auto skeleton" />
                  </div>
                </div>
              </div>
                
              <div
                v-else
                class="space-y-4 mb-6"
              >
                <div class="bg-gray-50 dark:bg-slate-700 rounded-2xl p-6">
                  <h3 class="text-lg font-black text-gray-900 dark:text-white mb-3">
                    üìù –û–ø–∏—Å–∞–Ω–∏–µ
                  </h3>
                  <p class="text-base text-gray-700 dark:text-gray-200 leading-relaxed">
                    {{ selectedRequest.description }}
                  </p>
                </div>
                  
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4">
                  <div class="bg-green-50 dark:bg-green-900/20 rounded-xl md:rounded-2xl p-3 md:p-4 text-center">
                    <div class="text-xs md:text-sm font-semibold text-gray-600 dark:text-gray-300 mb-1">
                      –í–û–ó–ù–ê–ì–†–ê–ñ–î–ï–ù–ò–ï
                    </div>
                    <div class="text-2xl md:text-3xl font-black text-green-600 dark:text-green-400">
                      {{ selectedRequest.amount }}‚ÇΩ
                    </div>
                  </div>
                  <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl md:rounded-2xl p-3 md:p-4 text-center">
                    <div class="text-xs md:text-sm font-semibold text-gray-600 dark:text-gray-300 mb-1">
                      –†–ê–°–°–¢–û–Ø–ù–ò–ï
                    </div>
                    <div class="text-2xl md:text-3xl font-black text-blue-600 dark:text-blue-400">
                      {{ selectedRequest.distance }}
                    </div>
                  </div>
                </div>
              </div>
                
              <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 pb-safe">
                <!-- –ö–Ω–æ–ø–∫–∞ –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è - —Å–∫—Ä—ã—Ç–∞ –¥–ª—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫ -->
                <router-link 
                  v-if="currentUser?.id !== selectedRequest.user_id"
                  :to="`/responses/${selectedRequest.id}`"
                  class="px-4 md:px-6 py-3 md:py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-bold text-sm md:text-base text-center hover:from-blue-600 hover:to-purple-700 transition shadow-lg focus:outline-none focus:ring-4 focus:ring-blue-300"
                >
                  üëã –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è
                </router-link>
                <!-- –î–ª—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é -->
                <div
                  v-else
                  class="px-4 md:px-6 py-3 md:py-4 bg-gray-100 dark:bg-slate-700 text-gray-500 dark:text-gray-400 rounded-xl font-bold text-sm md:text-base text-center cursor-not-allowed"
                  title="–≠—Ç–æ –≤–∞—à–∞ –∑–∞—è–≤–∫–∞"
                >
                  ‚ÑπÔ∏è –í–∞—à–∞ –∑–∞—è–≤–∫–∞
                </div>
                <a
                  :href="`https://yandex.ru/maps/?text=${selectedRequest.lat},${selectedRequest.lon}`"
                  target="_blank"
                  class="px-4 md:px-6 py-3 md:py-4 bg-gradient-to-r from-yellow-400 to-yellow-500 text-black rounded-xl font-bold text-sm md:text-base text-center hover:from-yellow-500 hover:to-yellow-600 transition shadow-lg focus:outline-none focus:ring-4 focus:ring-yellow-300"
                >
                  üó∫Ô∏è –Ø–Ω–¥–µ–∫—Å
                </a>
                <router-link 
                  :to="`/chat/${selectedRequest.id}`"
                  class="px-4 md:px-6 py-3 md:py-4 bg-gray-100 dark:bg-slate-700 text-gray-900 dark:text-white rounded-xl font-bold text-sm md:text-base text-center hover:bg-gray-200 dark:hover:bg-slate-600 transition shadow-lg focus:outline-none focus:ring-4 focus:ring-gray-300"
                >
                  üí¨ –ß–∞—Ç –∑–∞—è–≤–∫–∏
                </router-link>
                <button
                  class="px-4 md:px-6 py-3 md:py-4 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-xl font-bold text-sm md:text-base text-center hover:bg-green-200 dark:hover:bg-green-900/50 transition shadow-lg focus:outline-none focus:ring-4 focus:ring-green-300"
                  @click="shareSelected()"
                >
                  üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
                </button>
              </div>
            </div>
          </div>
        </Transition>
      </div>
    </div>

    <!-- –û–°–¢–ê–õ–¨–ù–´–ï –°–ï–ö–¶–ò–ò -->
    <div class="py-12 sm:py-16 md:py-24 bg-white dark:bg-slate-800">
      <div class="container mx-auto px-4 sm:px-6">
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="mt-8 sm:mt-12 md:mt-16 grid md:grid-cols-3 gap-4 sm:gap-6 md:gap-8">
          <div 
            v-for="stat in statsCards" 
            :key="stat.id"
            :class="['p-4 sm:p-6 md:p-10 rounded-2xl sm:rounded-3xl shadow-2xl text-white transform hover:scale-105 transition cursor-pointer', stat.gradient]"
            @click="openInfoModal(stat)"
          >
            <div class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black mb-2 sm:mb-3">
              {{ stat.id === 'requests' ? liveRequests.length : stat.value }}
            </div>
            <div class="text-base sm:text-lg md:text-xl lg:text-2xl font-bold opacity-90">
              {{ stat.title }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç -->
    <div class="py-12 sm:py-16 md:py-24 bg-white dark:bg-slate-900">
      <div class="container mx-auto px-4 sm:px-6">
        <div class="text-center mb-8 sm:mb-12 md:mb-16">
          <span class="inline-block px-3 sm:px-4 py-1.5 sm:py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full text-xs sm:text-sm font-bold mb-3 sm:mb-4">–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢</span>
          <h2 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black text-gray-900 dark:text-white">
            3 –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–∞
          </h2>
        </div>
        
        <div class="grid md:grid-cols-3 gap-4 sm:gap-6 md:gap-8 relative">
          <!-- –°–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–∏–Ω–∏—è -->
          <div class="hidden md:block absolute top-24 left-1/6 right-1/6 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-green-500 rounded-full opacity-30" />
          
          <div 
            v-for="step in stepsCards" 
            :key="step.id"
            class="relative text-center p-4 sm:p-6 md:p-8 group cursor-pointer hover:bg-white/50 dark:hover:bg-slate-800/50 rounded-2xl sm:rounded-3xl transition-all"
            @click="openInfoModal(step)"
          >
            <div :class="['w-14 h-14 sm:w-16 sm:h-16 md:w-20 md:h-20 rounded-xl sm:rounded-2xl flex items-center justify-center mx-auto mb-4 sm:mb-6 shadow-xl group-hover:scale-110 transition-transform text-white text-xl sm:text-2xl md:text-3xl font-black', step.gradient]">
              {{ step.number }}
            </div>
            <div class="text-4xl sm:text-5xl md:text-6xl mb-3 sm:mb-4">
              {{ step.icon }}
            </div>
            <h3 class="text-lg sm:text-xl md:text-2xl font-black mb-2 sm:mb-4 text-gray-900 dark:text-white">
              {{ step.title }}
            </h3>
            <p class="text-gray-600 dark:text-gray-400 text-sm sm:text-base md:text-lg">
              {{ step.shortDesc }}
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Features -->
    <div class="py-12 sm:py-16 md:py-24 bg-gradient-to-br from-gray-50 to-blue-50 dark:from-slate-800 dark:to-slate-900">
      <div class="container mx-auto px-4 sm:px-6">
        <div class="text-center mb-8 sm:mb-12 md:mb-16">
          <span class="inline-block px-3 sm:px-4 py-1.5 sm:py-2 bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded-full text-xs sm:text-sm font-bold mb-3 sm:mb-4">–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê</span>
          <h2 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black text-gray-900 dark:text-white">
            –ü–æ—á–µ–º—É Help-Car?
          </h2>
        </div>
        
        <div class="grid md:grid-cols-3 gap-4 sm:gap-6 md:gap-8">
          <div 
            v-for="feature in featuresCards" 
            :key="feature.id"
            class="group bg-white dark:bg-slate-800 p-4 sm:p-6 md:p-10 rounded-2xl sm:rounded-3xl shadow-lg hover:shadow-2xl transition-all transform hover:-translate-y-2 cursor-pointer"
            @click="openInfoModal(feature)"
          >
            <div :class="['w-14 h-14 sm:w-16 sm:h-16 md:w-20 md:h-20 rounded-xl sm:rounded-2xl flex items-center justify-center mb-4 sm:mb-6 md:mb-8 shadow-lg group-hover:scale-110 transition-transform', feature.iconGradient]">
              <span class="text-2xl sm:text-3xl md:text-4xl">{{ feature.iconEmoji }}</span>
            </div>
            <h3 class="text-lg sm:text-xl md:text-2xl font-black mb-2 sm:mb-4 text-gray-900 dark:text-white">
              {{ feature.icon }} {{ feature.title }}
            </h3>
            <p class="text-gray-600 dark:text-gray-400 text-sm sm:text-base md:text-lg leading-relaxed">
              {{ feature.shortDesc }}
            </p>
          </div>
        </div>
        
        <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 md:gap-6 mt-8 sm:mt-10 md:mt-12">
          <div 
            v-for="extra in extraCards" 
            :key="extra.id"
            class="flex items-center gap-2 sm:gap-3 md:gap-4 p-3 sm:p-4 md:p-6 bg-white dark:bg-slate-800 rounded-xl sm:rounded-2xl shadow-md hover:shadow-xl hover:scale-105 transition-all cursor-pointer"
            @click="openInfoModal(extra)"
          >
            <div class="text-2xl sm:text-3xl md:text-4xl flex-shrink-0">
              {{ extra.icon }}
            </div>
            <div class="min-w-0">
              <div class="font-bold text-gray-900 dark:text-white text-xs sm:text-sm md:text-base truncate">
                {{ extra.title }}
              </div>
              <div class="text-xs text-gray-500 dark:text-gray-400 truncate">
                {{ extra.subtitle }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –û—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
    <div class="py-12 sm:py-16 md:py-24 bg-white dark:bg-slate-900">
      <div class="container mx-auto px-4 sm:px-6">
        <div class="text-center mb-8 sm:mb-12 md:mb-16">
          <span class="inline-block px-3 sm:px-4 py-1.5 sm:py-2 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-full text-xs sm:text-sm font-bold mb-3 sm:mb-4">–û–¢–ó–´–í–´</span>
          <h2 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black text-gray-900 dark:text-white">
            –ß—Ç–æ –≥–æ–≤–æ—Ä—è—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
          </h2>
        </div>
        
        <div class="grid md:grid-cols-3 gap-4 sm:gap-6 md:gap-8">
          <div class="bg-gradient-to-br from-blue-50 to-purple-50 dark:from-slate-800 dark:to-slate-700 p-4 sm:p-6 md:p-8 rounded-2xl sm:rounded-3xl">
            <div class="flex items-center gap-3 sm:gap-4 mb-4 sm:mb-6">
              <div class="w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-base sm:text-xl font-bold">
                –ê–ö
              </div>
              <div>
                <div class="font-bold text-gray-900 dark:text-white text-sm sm:text-base">
                  –ê–ª–µ–∫—Å–µ–π –ö.
                </div>
                <div class="text-yellow-500 text-sm sm:text-base">
                  ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
                </div>
              </div>
            </div>
            <p class="text-gray-700 dark:text-gray-300 text-sm sm:text-base md:text-lg italic">
              "–ó–∞—Å—Ç—Ä—è–ª –Ω–∞ —Ç—Ä–∞—Å—Å–µ —Å –ø—Ä–æ–±–∏—Ç—ã–º –∫–æ–ª–µ—Å–æ–º. –ß–µ—Ä–µ–∑ 20 –º–∏–Ω—É—Ç –ø–æ–¥—ä–µ—Ö–∞–ª –ø–æ–º–æ—â–Ω–∏–∫ –∏ –≤—Å—ë –ø–æ—á–∏–Ω–∏–ª. –°—É–ø–µ—Ä —Å–µ—Ä–≤–∏—Å!"
            </p>
            <div class="mt-3 sm:mt-4 text-xs sm:text-sm text-gray-500 dark:text-gray-400">
              –ú–æ—Å–∫–≤–∞ ‚Ä¢ –ü–æ–º–æ—â—å —Å –∫–æ–ª–µ—Å–æ–º
            </div>
          </div>
          
          <div class="bg-gradient-to-br from-green-50 to-blue-50 dark:from-slate-800 dark:to-slate-700 p-4 sm:p-6 md:p-8 rounded-2xl sm:rounded-3xl">
            <div class="flex items-center gap-3 sm:gap-4 mb-4 sm:mb-6">
              <div class="w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-green-500 to-teal-600 rounded-full flex items-center justify-center text-white text-base sm:text-xl font-bold">
                –ú–°
              </div>
              <div>
                <div class="font-bold text-gray-900 dark:text-white text-sm sm:text-base">
                  –ú–∞—Ä–∏–Ω–∞ –°.
                </div>
                <div class="text-yellow-500 text-sm sm:text-base">
                  ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
                </div>
              </div>
            </div>
            <p class="text-gray-700 dark:text-gray-300 text-sm sm:text-base md:text-lg italic">
              "–ó–∞–∫–æ–Ω—á–∏–ª—Å—è –±–µ–Ω–∑–∏–Ω –ø–æ—Å—Ä–µ–¥–∏ –≥–æ—Ä–æ–¥–∞. –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ –Ω–∞—à–ª–∞ –ø–æ–º–æ—â–Ω–∏–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–≤–µ–∑ –∫–∞–Ω–∏—Å—Ç—Ä—É. –°–ø–∞—Å–∏–±–æ!"
            </p>
            <div class="mt-3 sm:mt-4 text-xs sm:text-sm text-gray-500 dark:text-gray-400">
              –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ ‚Ä¢ –î–æ—Å—Ç–∞–≤–∫–∞ —Ç–æ–ø–ª–∏–≤–∞
            </div>
          </div>
          
          <div class="bg-gradient-to-br from-purple-50 to-pink-50 dark:from-slate-800 dark:to-slate-700 p-4 sm:p-6 md:p-8 rounded-2xl sm:rounded-3xl">
            <div class="flex items-center gap-3 sm:gap-4 mb-4 sm:mb-6">
              <div class="w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-purple-500 to-pink-600 rounded-full flex items-center justify-center text-white text-base sm:text-xl font-bold">
                –î–í
              </div>
              <div>
                <div class="font-bold text-gray-900 dark:text-white text-sm sm:text-base">
                  –î–º–∏—Ç—Ä–∏–π –í.
                </div>
                <div class="text-yellow-500 text-sm sm:text-base">
                  ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
                </div>
              </div>
            </div>
            <p class="text-gray-700 dark:text-gray-300 text-sm sm:text-base md:text-lg italic">
              "–°–∞–º –ø–æ–º–æ–≥–∞—é –ª—é–¥—è–º —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Ö–æ—Ä–æ—à–∏–µ –ª—é–¥–∏. –†–µ–∫–æ–º–µ–Ω–¥—É—é –≤—Å–µ–º –≤–æ–¥–∏—Ç–µ–ª—è–º!"
            </p>
            <div class="mt-3 sm:mt-4 text-xs sm:text-sm text-gray-500 dark:text-gray-400">
              –ö–∞–∑–∞–Ω—å ‚Ä¢ –ü–æ–º–æ—â–Ω–∏–∫
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –¢–∏–ø—ã –ø–æ–º–æ—â–∏ -->
    <div class="py-12 sm:py-16 md:py-24 bg-gradient-to-br from-slate-900 to-slate-800 text-white">
      <div class="container mx-auto px-4 sm:px-6">
        <div class="text-center mb-8 sm:mb-12 md:mb-16">
          <span class="inline-block px-3 sm:px-4 py-1.5 sm:py-2 bg-white/10 text-white rounded-full text-xs sm:text-sm font-bold mb-3 sm:mb-4">–í–ò–î–´ –ü–û–ú–û–©–ò</span>
          <h2 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black">
            –ß–µ–º –º—ã –º–æ–∂–µ–º –ø–æ–º–æ—á—å?
          </h2>
        </div>
        
        <div class="grid grid-cols-3 sm:grid-cols-3 md:grid-cols-6 gap-2 sm:gap-3 md:gap-4">
          <div 
            v-for="service in services" 
            :key="service.id"
            class="bg-white/10 backdrop-blur-sm p-3 sm:p-4 md:p-6 rounded-xl sm:rounded-2xl text-center hover:bg-white/20 hover:scale-105 transition-all cursor-pointer group"
            @click="openServiceModal(service)"
          >
            <div class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl mb-1 sm:mb-2 md:mb-3 group-hover:scale-110 transition-transform">
              {{ service.icon }}
            </div>
            <div class="font-bold text-xs sm:text-sm md:text-base">
              {{ service.title }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —É—Å–ª—É–≥–∏ -->
    <Transition name="service-modal">
      <div 
        v-if="selectedService" 
        class="fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center p-4 z-[9999]"
        @click.self="selectedService = null"
      >
        <div class="bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-3xl max-w-2xl w-full shadow-2xl overflow-hidden border border-white/10">
          <!-- –®–∞–ø–∫–∞ —Å –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–µ–π -->
          <div :class="['relative h-48 md:h-64 overflow-hidden', selectedService.gradient]">
            <!-- SVG –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è -->
            <div class="absolute inset-0 flex items-center justify-center">
              <div
                class="w-full h-full"
                v-html="selectedService.illustration"
              />
            </div>
            <!-- –û–≤–µ—Ä–ª–µ–π -->
            <div class="absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent" />
            <!-- –ò–∫–æ–Ω–∫–∞ -->
            <div class="absolute bottom-4 left-6 flex items-center gap-4">
              <div class="text-6xl md:text-7xl drop-shadow-lg">
                {{ selectedService.icon }}
              </div>
              <div>
                <h2 class="text-2xl md:text-4xl font-black text-white drop-shadow-lg">
                  {{ selectedService.title }}
                </h2>
                <p class="text-white/80 font-semibold">
                  {{ selectedService.subtitle }}
                </p>
              </div>
            </div>
            <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è -->
            <button 
              class="absolute top-4 right-4 w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/30 transition"
              @click="selectedService = null"
            >
              ‚úï
            </button>
          </div>
          
          <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
          <div class="p-6 md:p-8">
            <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
            <p class="text-lg md:text-xl text-gray-200 leading-relaxed mb-6">
              {{ selectedService.description }}
            </p>
            
            <!-- –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ -->
            <div class="bg-white/5 rounded-2xl p-5 mb-6">
              <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                <span class="text-2xl">‚ú®</span> –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ
              </h3>
              <ul class="space-y-3">
                <li 
                  v-for="(feature, idx) in selectedService.features" 
                  :key="idx"
                  class="flex items-start gap-3 text-gray-300"
                >
                  <span class="text-green-400 text-xl">‚úì</span>
                  <span>{{ feature }}</span>
                </li>
              </ul>
            </div>
            
            <!-- –¶–µ–Ω–∞ –∏ –≤—Ä–µ–º—è -->
            <div class="grid grid-cols-2 gap-4 mb-6">
              <div class="bg-gradient-to-br from-green-500/20 to-green-600/20 border border-green-500/30 rounded-xl p-4 text-center">
                <div class="text-sm text-green-300 font-semibold mb-1">
                  –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞
                </div>
                <div class="text-2xl font-black text-green-400">
                  {{ selectedService.price }}
                </div>
              </div>
              <div class="bg-gradient-to-br from-blue-500/20 to-blue-600/20 border border-blue-500/30 rounded-xl p-4 text-center">
                <div class="text-sm text-blue-300 font-semibold mb-1">
                  –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è
                </div>
                <div class="text-2xl font-black text-blue-400">
                  {{ selectedService.time }}
                </div>
              </div>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="flex flex-col sm:flex-row gap-3">
              <router-link 
                to="/register"
                class="flex-1 px-6 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-bold text-center hover:from-blue-600 hover:to-purple-700 transition shadow-lg"
              >
                üöÄ –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É
              </router-link>
              <router-link 
                to="/map"
                class="flex-1 px-6 py-4 bg-white/10 text-white rounded-xl font-bold text-center hover:bg-white/20 transition"
              >
                üó∫Ô∏è –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ
              </router-link>
            </div>
          </div>
        </div>
      </div>
    </Transition>

    <!-- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
    <Transition name="service-modal">
      <div 
        v-if="selectedInfo" 
        class="fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center p-4 z-[9999]"
        @click.self="selectedInfo = null"
      >
        <div class="bg-gradient-to-br from-slate-800 via-slate-900 to-slate-800 rounded-3xl max-w-2xl w-full shadow-2xl overflow-hidden border border-white/10 max-h-[90vh] overflow-y-auto">
          <!-- –®–∞–ø–∫–∞ -->
          <div :class="['relative p-8 overflow-hidden', selectedInfo.gradient || 'bg-gradient-to-br from-blue-600 to-purple-700']">
            <!-- SVG –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è -->
            <div
              v-if="selectedInfo.illustration"
              class="absolute inset-0 flex items-center justify-center"
            >
              <div
                class="w-full h-full"
                v-html="selectedInfo.illustration"
              />
            </div>
            <!-- –û–≤–µ—Ä–ª–µ–π -->
            <div class="absolute inset-0 bg-gradient-to-t from-slate-900/80 via-transparent to-transparent" />
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
            <div class="relative flex items-center gap-4">
              <div class="text-6xl md:text-7xl drop-shadow-lg">
                {{ selectedInfo.icon }}
              </div>
              <div>
                <h2 class="text-2xl md:text-4xl font-black text-white drop-shadow-lg">
                  {{ selectedInfo.title }}
                </h2>
                <p
                  v-if="selectedInfo.subtitle"
                  class="text-white/80 font-semibold"
                >
                  {{ selectedInfo.subtitle }}
                </p>
              </div>
            </div>
            <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è -->
            <button 
              class="absolute top-4 right-4 w-10 h-10 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-white/30 transition"
              @click="selectedInfo = null"
            >
              ‚úï
            </button>
          </div>
          
          <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
          <div class="p-6 md:p-8">
            <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
            <p class="text-lg md:text-xl text-gray-200 leading-relaxed mb-6">
              {{ selectedInfo.description }}
            </p>
            
            <!-- –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ -->
            <div
              v-if="selectedInfo.features && selectedInfo.features.length"
              class="bg-white/5 rounded-2xl p-5 mb-6"
            >
              <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                <span class="text-2xl">‚ú®</span> –ü–æ–¥—Ä–æ–±–Ω–µ–µ
              </h3>
              <ul class="space-y-3">
                <li 
                  v-for="(feature, idx) in selectedInfo.features" 
                  :key="idx"
                  class="flex items-start gap-3 text-gray-300"
                >
                  <span class="text-green-400 text-xl">‚úì</span>
                  <span>{{ feature }}</span>
                </li>
              </ul>
            </div>
            
            <!-- –î–æ–ø. –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div
              v-if="selectedInfo.stats"
              class="grid grid-cols-2 gap-4 mb-6"
            >
              <div 
                v-for="(stat, idx) in selectedInfo.stats" 
                :key="idx"
                :class="['border rounded-xl p-4 text-center', stat.bgClass || 'bg-blue-500/20 border-blue-500/30']"
              >
                <div :class="['text-sm font-semibold mb-1', stat.labelClass || 'text-blue-300']">
                  {{ stat.label }}
                </div>
                <div :class="['text-2xl font-black', stat.valueClass || 'text-blue-400']">
                  {{ stat.value }}
                </div>
              </div>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="flex flex-col sm:flex-row gap-3">
              <router-link 
                to="/register"
                class="flex-1 px-6 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-bold text-center hover:from-blue-600 hover:to-purple-700 transition shadow-lg"
              >
                üöÄ –ù–∞—á–∞—Ç—å —Å–µ–π—á–∞—Å
              </router-link>
              <button 
                class="flex-1 px-6 py-4 bg-white/10 text-white rounded-xl font-bold text-center hover:bg-white/20 transition"
                @click="selectedInfo = null"
              >
                –ó–∞–∫—Ä—ã—Ç—å
              </button>
            </div>
          </div>
        </div>
      </div>
    </Transition>

    <!-- CTA -->
    <div class="py-16 sm:py-24 md:py-32 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-700 text-white text-center relative overflow-hidden">
      <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏–≥—É—Ä—ã -->
      <div class="absolute inset-0 overflow-hidden">
        <div class="absolute -top-10 -left-10 w-40 h-40 bg-white/10 rounded-full blur-xl animate-float" />
        <div
          class="absolute top-1/2 -right-10 w-60 h-60 bg-white/5 rounded-full blur-2xl animate-float"
          style="animation-delay: 2s"
        />
        <div
          class="absolute -bottom-10 left-1/3 w-32 h-32 bg-white/10 rounded-full blur-xl animate-float"
          style="animation-delay: 4s"
        />
      </div>
      
      <div
        class="absolute inset-0 opacity-20"
        style="background-image: repeating-linear-gradient(90deg, transparent, transparent 40px, rgba(255,255,255,0.2) 40px, rgba(255,255,255,0.2) 50px);"
      />
      <div class="relative z-10 container mx-auto px-4 sm:px-6">
        <div class="inline-block px-4 sm:px-6 py-1.5 sm:py-2 bg-white/20 backdrop-blur-sm rounded-full text-sm sm:text-base md:text-lg font-bold mb-4 sm:mb-6 md:mb-8">
          üöÄ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –∏ –±–µ–∑ —Ä–µ–∫–ª–∞–º—ã
        </div>
        <h2 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black mb-4 sm:mb-6 md:mb-8">
          –ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å?
        </h2>
        <p class="text-lg sm:text-xl md:text-2xl lg:text-3xl mb-6 sm:mb-8 md:mb-12 font-bold opacity-90">
          –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É –≤–∑–∞–∏–º–æ–ø–æ–º–æ—â–∏
        </p>
        <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center">
          <router-link
            to="/register"
            class="inline-block px-8 sm:px-10 md:px-12 py-4 sm:py-5 md:py-6 bg-white text-blue-600 rounded-xl sm:rounded-2xl text-base sm:text-lg md:text-xl lg:text-2xl font-black hover:bg-gray-100 transition-all transform hover:scale-105 shadow-2xl"
          >
            –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç ‚Üí
          </router-link>
          <router-link
            to="/map"
            class="inline-block px-8 sm:px-10 md:px-12 py-4 sm:py-5 md:py-6 border-2 sm:border-3 border-white rounded-xl sm:rounded-2xl text-base sm:text-lg md:text-xl lg:text-2xl font-black hover:bg-white/20 transition-all"
          >
            üó∫Ô∏è –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞—Ä—Ç—É
          </router-link>
        </div>
      </div>
    </div>

    <!-- –ü–∞—Ä—Ç–Ω—ë—Ä—ã –∏ –¥–æ–≤–µ—Ä–∏–µ -->
    <div class="py-10 sm:py-12 md:py-16 bg-gray-50 dark:bg-slate-800">
      <div class="container mx-auto px-4 sm:px-6">
        <div class="text-center mb-6 sm:mb-8 md:mb-10">
          <p class="text-gray-500 dark:text-gray-400 text-sm sm:text-base md:text-lg font-bold">
            –ù–ê–ú –î–û–í–ï–†–Ø–Æ–¢
          </p>
        </div>
        <div class="flex flex-wrap items-center justify-center gap-4 sm:gap-6 md:gap-8 lg:gap-16 opacity-60">
          <div class="flex items-center gap-2 sm:gap-3 text-base sm:text-lg md:text-xl lg:text-2xl font-black text-gray-400 dark:text-gray-500">
            <span class="text-2xl sm:text-3xl md:text-4xl">üöó</span> AutoClub
          </div>
          <div class="flex items-center gap-2 sm:gap-3 text-base sm:text-lg md:text-xl lg:text-2xl font-black text-gray-400 dark:text-gray-500">
            <span class="text-2xl sm:text-3xl md:text-4xl">üõ†Ô∏è</span> DriveHelp
          </div>
          <div class="flex items-center gap-2 sm:gap-3 text-base sm:text-lg md:text-xl lg:text-2xl font-black text-gray-400 dark:text-gray-500">
            <span class="text-2xl sm:text-3xl md:text-4xl">‚õΩ</span> FuelFast
          </div>
          <div class="flex items-center gap-2 sm:gap-3 text-base sm:text-lg md:text-xl lg:text-2xl font-black text-gray-400 dark:text-gray-500">
            <span class="text-2xl sm:text-3xl md:text-4xl">üì±</span> TechAuto
          </div>
        </div>
      </div>
    </div>

    <!-- PWA –£–°–¢–ê–ù–û–í–ö–ê -->
    <div class="py-10 sm:py-12 md:py-16 bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-slate-900 dark:to-slate-800">
      <div class="container mx-auto px-4 sm:px-6">
        <InstallPWA />
      </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-400 py-16">
      <div class="container mx-auto px-6 text-center">
        <div class="flex items-center justify-center space-x-3 mb-6">
          <svg
            class="w-10 h-10 text-white"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z" />
          </svg>
          <span class="text-white font-black text-2xl">Help-Car</span>
        </div>
        <p class="text-lg mb-8">
          P2P –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–æ–±–∏–ª–∏—Å—Ç–æ–≤ –†–æ—Å—Å–∏–∏
        </p>

        <!-- –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ -->
        <div class="flex flex-wrap items-center justify-center gap-3 mb-8">
          <router-link
            to="/map"
            class="px-4 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-white font-bold transition"
          >
            üó∫ –ö–∞—Ä—Ç–∞
          </router-link>
          <router-link
            to="/create-request"
            class="px-4 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-white font-bold transition"
          >
            üÜò –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É
          </router-link>
          <router-link
            to="/city-chats"
            class="px-4 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-white font-bold transition"
          >
            üí¨ –ß–∞—Ç—ã –≥–æ—Ä–æ–¥–æ–≤
          </router-link>
          <router-link
            to="/profile"
            class="px-4 py-2 bg-white/5 hover:bg-white/10 rounded-xl text-white font-bold transition"
          >
            üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
          </router-link>
        </div>
        <p class="text-sm">
          &copy; 2025 Help-Car. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
        </p>
      </div>
    </footer>
  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted, computed } from 'vue'
import LazyMap from '@/components/OpenStreetMapWidget.vue'
import InstallPWA from '@/components/InstallPWA.vue'
import { useRequestHelpers } from '@/composables/useRequestHelpers'
import { apiService } from '@/services/api'
import { useAuthStore } from '@/stores/auth'
import Z_INDEX from '@/utils/zIndex'

const { formatDate, calculateDistance } = useRequestHelpers()
const authStore = useAuthStore()

// –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const currentUser = computed(() => authStore.user)

const liveRequests = ref([])

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è Hero —Å–µ–∫—Ü–∏–∏
const stats = ref({
  totalUsers: 1250,
  totalHelpers: 320,
  completedRequests: 4800
})

// const lastRequest = ref(liveRequests.value[0]) // –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
const mapRef = ref(null)
const selectedRequest = ref(null)
const selectedService = ref(null)
const selectedInfo = ref(null)

// –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
const statsCards = ref([
  {
    id: 'requests',
    icon: 'üìä',
    title: '–ó–∞–ø—Ä–æ—Å–æ–≤ —Å–µ–π—á–∞—Å',
    value: '0',
    subtitle: '–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞—è–≤–∫–∏',
    gradient: 'bg-gradient-to-br from-blue-500 to-blue-700',
    description: '–≠—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ –ø–æ–º–æ—â–∏ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å. –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å - —ç—Ç–æ —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä–æ–º—É –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å –Ω–∞ –¥–æ—Ä–æ–≥–µ. –ó–∞—è–≤–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.',
    features: [
      '–ó–∞—è–≤–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏',
      '–û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–µ',
      '–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –ø–æ–º–æ—â–∏',
      '–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é –∏ –≤—Ä–µ–º–µ–Ω–∏'
    ],
    illustration: `<svg viewBox="0 0 400 200" class="w-full h-full opacity-20"><circle cx="100" cy="100" r="60" fill="#3b82f6"/><circle cx="200" cy="80" r="40" fill="#60a5fa"/><circle cx="300" cy="120" r="50" fill="#93c5fd"/></svg>`
  },
  {
    id: 'online',
    icon: 'üë•',
    title: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–Ω–ª–∞–π–Ω',
    value: '247',
    subtitle: '–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–º–æ—â–Ω–∏–∫–∏',
    gradient: 'bg-gradient-to-br from-green-500 to-green-700',
    description: '–≠—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Å–µ–π—á–∞—Å –≥–æ—Ç–æ–≤—ã –ø–æ–º–æ—á—å. –û–Ω–∏ –≤–∏–¥—è—Ç –≤–∞—à–∏ –∑–∞—è–≤–∫–∏ –∏ –º–æ–≥—É—Ç –±—ã—Å—Ç—Ä–æ –ø—Ä–∏–µ—Ö–∞—Ç—å –Ω–∞ –ø–æ–º–æ—â—å.',
    features: [
      '–ü–æ–º–æ—â–Ω–∏–∫–∏ –ø–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏',
      '–†–µ–π—Ç–∏–Ω–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ–≤–µ—Ä–∏—è',
      '–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã',
      '–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏'
    ],
    illustration: `<svg viewBox="0 0 400 200" class="w-full h-full opacity-20"><circle cx="120" cy="100" r="30" fill="#22c55e"/><circle cx="200" cy="100" r="30" fill="#22c55e"/><circle cx="280" cy="100" r="30" fill="#22c55e"/><circle cx="160" cy="60" r="20" fill="#4ade80"/><circle cx="240" cy="140" r="20" fill="#4ade80"/></svg>`
  },
  {
    id: 'radius',
    icon: 'üìç',
    title: '–°—Ä–µ–¥–Ω–∏–π —Ä–∞–¥–∏—É—Å',
    value: '1.2 –∫–º',
    subtitle: '–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞',
    gradient: 'bg-gradient-to-br from-purple-500 to-purple-700',
    description: '–°—Ä–µ–¥–Ω–µ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞. –ë–ª–∞–≥–æ–¥–∞—Ä—è –±–æ–ª—å—à–æ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É, –ø–æ–º–æ—â—å –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º!',
    features: [
      '–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏',
      '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö',
      '–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ',
      '–†–∞—Å—á—ë—Ç –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–±—ã—Ç–∏—è'
    ],
    illustration: `<svg viewBox="0 0 400 200" class="w-full h-full opacity-20"><circle cx="200" cy="100" r="80" fill="none" stroke="#a855f7" stroke-width="4" stroke-dasharray="10,5"/><circle cx="200" cy="100" r="50" fill="none" stroke="#c084fc" stroke-width="3" stroke-dasharray="8,4"/><circle cx="200" cy="100" r="20" fill="#a855f7"/></svg>`
  }
])

// –î–∞–Ω–Ω—ã–µ –¥–ª—è —à–∞–≥–æ–≤ "–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç"
const stepsCards = ref([
  {
    id: 'step1',
    number: 1,
    icon: 'üì±',
    title: '–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É',
    shortDesc: '–£–∫–∞–∂–∏—Ç–µ —Ç–∏–ø –ø–æ–º–æ—â–∏, –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ –∂–µ–ª–∞–µ–º—É—é —Å—É–º–º—É –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è',
    subtitle: '–®–∞–≥ 1 –∏–∑ 3',
    gradient: 'bg-gradient-to-br from-blue-500 to-blue-700',
    description: '–°–æ–∑–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –∑–∞ –º–∏–Ω—É—Ç—É! –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø—Ä–æ–±–ª–µ–º—ã (–±–∞—Ç–∞—Ä–µ—è, —Ç–æ–ø–ª–∏–≤–æ, –∫–æ–ª–µ—Å–æ), —É–∫–∞–∂–∏—Ç–µ –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ —Å—É–º–º—É, –∫–æ—Ç–æ—Ä—É—é –≥–æ—Ç–æ–≤—ã –∑–∞–ø–ª–∞—Ç–∏—Ç—å –∑–∞ –ø–æ–º–æ—â—å.',
    features: [
      '–í—ã–±–æ—Ä —Ç–∏–ø–∞ –ø–æ–º–æ—â–∏ –∏–∑ —Å–ø–∏—Å–∫–∞',
      '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏',
      '–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ –ø—Ä–æ–±–ª–µ–º—ã',
      '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–≤–æ–µ–π —Ü–µ–Ω—ã'
    ]
  },
  {
    id: 'step2',
    number: 2,
    icon: 'üîî',
    title: '–ü–æ–ª—É—á–∏—Ç–µ –æ—Ç–∫–ª–∏–∫–∏',
    shortDesc: '–í–æ–¥–∏—Ç–µ–ª–∏ —Ä—è–¥–æ–º —É–≤–∏–¥—è—Ç –≤–∞—à—É –∑–∞—è–≤–∫—É –∏ –ø—Ä–µ–¥–ª–æ–∂–∞—Ç –ø–æ–º–æ—â—å',
    subtitle: '–®–∞–≥ 2 –∏–∑ 3',
    gradient: 'bg-gradient-to-br from-purple-500 to-purple-700',
    description: '–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏, –≤—Å–µ –ø–æ–º–æ—â–Ω–∏–∫–∏ –≤ —Ä–∞–¥–∏—É—Å–µ –ø–æ–ª—É—á–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. –û–Ω–∏ —Å–º–æ–≥—É—Ç –æ—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è –∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–≤–æ—é –ø–æ–º–æ—â—å.',
    features: [
      '–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–º–æ—â–Ω–∏–∫–∞–º',
      '–ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–π—Ç–∏–Ω–≥–∞ –∏ –æ—Ç–∑—ã–≤–æ–≤',
      '–ß–∞—Ç —Å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º–∏ –ø–æ–º–æ—â–Ω–∏–∫–∞–º–∏',
      '–í—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è'
    ]
  },
  {
    id: 'step3',
    number: 3,
    icon: 'ü§ù',
    title: '–ü–æ–ª—É—á–∏—Ç–µ –ø–æ–º–æ—â—å',
    shortDesc: '–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–º–æ—â–Ω–∏–∫–∞, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –µ–≥–æ –Ω–∞ –∫–∞—Ä—Ç–µ –∏ –æ–ø–ª–∞—Ç–∏—Ç–µ –ø–æ—Å–ª–µ',
    subtitle: '–®–∞–≥ 3 –∏–∑ 3',
    gradient: 'bg-gradient-to-br from-green-500 to-green-700',
    description: '–ü—Ä–∏–º–∏—Ç–µ –æ—Ç–∫–ª–∏–∫ –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–∏–±—ã—Ç–∏–µ–º –ø–æ–º–æ—â–Ω–∏–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–µ. –ü–æ—Å–ª–µ –æ–∫–∞–∑–∞–Ω–∏—è –ø–æ–º–æ—â–∏ - –æ–ø–ª–∞—Ç–∏—Ç–µ –∏ –æ—Å—Ç–∞–≤—å—Ç–µ –æ—Ç–∑—ã–≤.',
    features: [
      '–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–º–æ—â–Ω–∏–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–µ',
      '–û–ø–ª–∞—Ç–∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–º–æ—â–∏',
      '–°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–æ–∫ –∏ –æ—Ç–∑—ã–≤–æ–≤',
      '–ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø–æ–µ–∑–¥–æ–∫'
    ]
  }
])

// –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤
const featuresCards = ref([
  {
    id: 'fast',
    icon: '‚ö°',
    iconEmoji: '‚ö°',
    title: '–ë—ã—Å—Ç—Ä–æ',
    shortDesc: '–ü–æ–º–æ—â—å –ø—Ä–∏–µ–¥–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 15-30 –º–∏–Ω—É—Ç. –ë–ª–∏–∂–∞–π—à–∏–µ –≤–æ–¥–∏—Ç–µ–ª–∏ —Å—Ä–∞–∑—É –≤–∏–¥—è—Ç –≤–∞—à—É –∑–∞—è–≤–∫—É.',
    subtitle: '–°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è',
    iconGradient: 'bg-gradient-to-br from-blue-400 to-blue-600',
    gradient: 'bg-gradient-to-br from-blue-500 to-blue-700',
    description: '–ú—ã –ø–æ–Ω–∏–º–∞–µ–º, —á—Ç–æ –∫–æ–≥–¥–∞ –≤—ã –∑–∞—Å—Ç—Ä—è–ª–∏ –Ω–∞ –¥–æ—Ä–æ–≥–µ, –∫–∞–∂–¥–∞—è –º–∏–Ω—É—Ç–∞ –Ω–∞ —Å—á–µ—Ç—É. –ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –≤—Å–µ—Ö –±–ª–∏–∂–∞–π—à–∏—Ö –ø–æ–º–æ—â–Ω–∏–∫–æ–≤.',
    features: [
      '–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è 15-30 –º–∏–Ω—É—Ç',
      'Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–º–æ—â–Ω–∏–∫–∞–º',
      '–†–∞—Å—á—ë—Ç ETA –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏',
      '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –±–ª–∏–∂–∞–π—à–∏–º –ø–æ–º–æ—â–Ω–∏–∫–∞–º'
    ]
  },
  {
    id: 'cheap',
    icon: 'üí∞',
    iconEmoji: 'üí∞',
    title: '–í—ã–≥–æ–¥–Ω–æ',
    shortDesc: '–í—ã —Å–∞–º–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ —Ü–µ–Ω—É. –ù–∏–∫–∞–∫–∏—Ö —Å–∫—Ä—ã—Ç—ã—Ö –∫–æ–º–∏—Å—Å–∏–π –∏ –Ω–∞—Ü–µ–Ω–æ–∫ —Å–µ—Ä–≤–∏—Å–∞.',
    subtitle: '–ü—Ä–æ–∑—Ä–∞—á–Ω–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ',
    iconGradient: 'bg-gradient-to-br from-green-400 to-green-600',
    gradient: 'bg-gradient-to-br from-green-500 to-green-700',
    description: '–ù–∏–∫–∞–∫–∏—Ö —Å–∫—Ä—ã—Ç—ã—Ö –∫–æ–º–∏—Å—Å–∏–π –∏ –Ω–∞—Ü–µ–Ω–æ–∫! –í—ã –¥–æ–≥–æ–≤–∞—Ä–∏–≤–∞–µ—Ç–µ—Å—å —Å –ø–æ–º–æ—â–Ω–∏–∫–æ–º –Ω–∞–ø—Ä—è–º—É—é, –±–µ–∑ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤.',
    features: [
      '–í—ã —Å–∞–º–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ —Ü–µ–Ω—É',
      '–ù–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏ —Å–µ—Ä–≤–∏—Å–∞',
      '–û–ø–ª–∞—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é –ø–æ–º–æ—â–Ω–∏–∫—É',
      '–ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω'
    ]
  },
  {
    id: 'reliable',
    icon: 'üõ°Ô∏è',
    iconEmoji: 'üõ°Ô∏è',
    title: '–ù–∞–¥—ë–∂–Ω–æ',
    shortDesc: '–°–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –∏ –æ—Ç–∑—ã–≤–æ–≤. –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –ø–æ–º–æ—â–Ω–∏–∫–∏.',
    subtitle: '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –¥–æ–≤–µ—Ä–∏–µ',
    iconGradient: 'bg-gradient-to-br from-purple-400 to-purple-600',
    gradient: 'bg-gradient-to-br from-purple-500 to-purple-700',
    description: '–ö–∞–∂–¥—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –∏–º–µ–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥ –∏ –æ—Ç–∑—ã–≤—ã –æ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –í—ã –≤—Å–µ–≥–¥–∞ –∑–Ω–∞–µ—Ç–µ, –∫–æ–º—É –¥–æ–≤–µ—Ä—è–µ—Ç–µ.',
    features: [
      '–†–µ–π—Ç–∏–Ω–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–º–æ—â–Ω–∏–∫–æ–≤',
      '–†–µ–∞–ª—å–Ω—ã–µ –æ—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
      '–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤',
      '–ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤'
    ]
  }
])

// –î–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤
const extraCards = ref([
  {
    id: 'russia',
    icon: 'üìç',
    title: '–í—Å—è –†–æ—Å—Å–∏—è',
    subtitle: '100+ –≥–æ—Ä–æ–¥–æ–≤',
    gradient: 'bg-gradient-to-br from-red-500 to-orange-500',
    description: '–ù–∞—à —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏ - –æ—Ç –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥–∞ –¥–æ –í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫–∞. –ü–æ–º–æ—â–Ω–∏–∫–∏ –µ—Å—Ç—å –≤ –±–æ–ª–µ–µ —á–µ–º 100 –≥–æ—Ä–æ–¥–∞—Ö.',
    features: [
      '–ú–æ—Å–∫–≤–∞ –∏ –ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',
      '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',
      '–í—Å–µ –∫—Ä—É–ø–Ω—ã–µ –≥–æ—Ä–æ–¥–∞',
      '–§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–µ —Ç—Ä–∞—Å—Å—ã'
    ]
  },
  {
    id: 'secure',
    icon: 'üîí',
    title: '–ë–µ–∑–æ–ø–∞—Å–Ω–æ',
    subtitle: 'SSL —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ',
    gradient: 'bg-gradient-to-br from-green-600 to-teal-500',
    description: '–í—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞—â–∏—â–µ–Ω—ã —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º SSL —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º. –í–∞—à–∏ –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø–ª–∞—Ç–µ–∂–∏ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.',
    features: [
      'SSL/TLS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö',
      '–ó–∞—â–∏—â—ë–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏',
      '–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö',
      '–ó–∞—â–∏—Ç–∞ –æ—Ç –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞'
    ]
  },
  {
    id: 'chat',
    icon: 'üí¨',
    title: '–ß–∞—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏',
    subtitle: '–û–±—â–µ–Ω–∏–µ –±–µ–∑ –Ω–æ–º–µ—Ä–∞',
    gradient: 'bg-gradient-to-br from-blue-500 to-indigo-500',
    description: '–û–±—â–∞–π—Ç–µ—Å—å —Å –ø–æ–º–æ—â–Ω–∏–∫–∞–º–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—è —Å–≤–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.',
    features: [
      '–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —á–∞—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏',
      '–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ –∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏',
      '–ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–æ–∫',
      '–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö'
    ]
  },
  {
    id: 'pwa',
    icon: 'üì±',
    title: 'PWA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ',
    subtitle: '–†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞—Ç–∏–≤–Ω–æ–µ',
    gradient: 'bg-gradient-to-br from-purple-500 to-pink-500',
    description: '–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –¥–æ–º–∞—à–Ω–∏–π —ç–∫—Ä–∞–Ω –∏ –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–∞–∫ –æ–±—ã—á–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º - –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –º–∞–≥–∞–∑–∏–Ω–∞!',
    features: [
      '–†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω',
      'Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è',
      '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –æ–¥–∏–Ω –∫–ª–∏–∫',
      '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è'
    ]
  }
])

// –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
function openInfoModal(item) {
  selectedInfo.value = item
}

// –î–∞–Ω–Ω—ã–µ –æ–± —É—Å–ª—É–≥–∞—Ö —Å –∫—Ä–∞—Å–æ—á–Ω—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
const services = ref([
  {
    id: 'battery',
    icon: 'üîã',
    title: '–ü—Ä–∏–∫—É—Ä–∏–≤–∞–Ω–∏–µ',
    subtitle: '–ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –¥–≤–∏–≥–∞—Ç–µ–ª—è',
    description: '–°–µ–ª –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä –≤ —Å–∞–º—ã–π –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–π –º–æ–º–µ–Ω—Ç? –ù–µ –±–µ–¥–∞! –ù–∞—à–∏ –ø–æ–º–æ—â–Ω–∏–∫–∏ –ø—Ä–∏–µ–¥—É—Ç —Å –ø—É—Å–∫–æ-–∑–∞—Ä—è–¥–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º –∏–ª–∏ –ø—Ä–æ–≤–æ–¥–∞–º–∏ –¥–ª—è –ø—Ä–∏–∫—É—Ä–∏–≤–∞–Ω–∏—è –∏ –∑–∞–≤–µ–¥—É—Ç –≤–∞—à –∞–≤—Ç–æ–º–æ–±–∏–ª—å –∑–∞ —Å—á–∏—Ç–∞–Ω–Ω—ã–µ –º–∏–Ω—É—Ç—ã.',
    features: [
      '–ü—Ä–∏–∫—É—Ä–∏–≤–∞–Ω–∏–µ –æ—Ç –¥—Ä—É–≥–æ–≥–æ –∞–≤—Ç–æ',
      '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—É—Å–∫–æ–∑–∞—Ä—è–¥–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞',
      '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ê–ö–ë',
      '–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∑–∞–º–µ–Ω–µ'
    ],
    price: '300-800‚ÇΩ',
    time: '15-30 –º–∏–Ω',
    gradient: 'bg-gradient-to-br from-orange-500 via-red-500 to-yellow-500',
    illustration: `<svg viewBox="0 0 400 200" class="w-full h-full opacity-30">
      <defs>
        <linearGradient id="batteryGrad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#fbbf24"/>
          <stop offset="100%" style="stop-color:#ef4444"/>
        </linearGradient>
      </defs>
      <!-- –ë–∞—Ç–∞—Ä–µ—è -->
      <rect x="100" y="50" width="180" height="100" rx="10" fill="url(#batteryGrad)" opacity="0.8"/>
      <rect x="280" y="75" width="20" height="50" rx="5" fill="url(#batteryGrad)" opacity="0.8"/>
      <!-- –ú–æ–ª–Ω–∏–∏ -->
      <path d="M160 70 L140 100 L160 100 L140 130" stroke="#fff" stroke-width="4" fill="none"/>
      <path d="M200 70 L180 100 L200 100 L180 130" stroke="#fff" stroke-width="4" fill="none"/>
      <path d="M240 70 L220 100 L240 100 L220 130" stroke="#fff" stroke-width="4" fill="none"/>
      <!-- –ö–∞–±–µ–ª–∏ -->
      <path d="M50 80 Q80 80 100 90" stroke="#22c55e" stroke-width="6" fill="none"/>
      <path d="M50 120 Q80 120 100 110" stroke="#ef4444" stroke-width="6" fill="none"/>
      <circle cx="50" cy="80" r="12" fill="#22c55e"/>
      <circle cx="50" cy="120" r="12" fill="#ef4444"/>
    </svg>`
  },
  {
    id: 'fuel',
    icon: '‚õΩ',
    title: '–¢–æ–ø–ª–∏–≤–æ',
    subtitle: '–î–æ—Å—Ç–∞–≤–∫–∞ –±–µ–Ω–∑–∏–Ω–∞ –∏–ª–∏ –¥–∏–∑–µ–ª—è',
    description: '–ó–∞–∫–æ–Ω—á–∏–ª–æ—Å—å —Ç–æ–ø–ª–∏–≤–æ –ø–æ—Å—Ä–µ–¥–∏ –¥–æ—Ä–æ–≥–∏? –ù–∞—à–∏ –ø–æ–º–æ—â–Ω–∏–∫–∏ –ø—Ä–∏–≤–µ–∑—É—Ç –≤–∞–º –∫–∞–Ω–∏—Å—Ç—Ä—É —Å –±–µ–Ω–∑–∏–Ω–æ–º, –¥–∏–∑–µ–ª–µ–º –∏–ª–∏ –≥–∞–∑–æ–º. –ë—ã—Å—Ç—Ä–æ, —É–¥–æ–±–Ω–æ –∏ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–∫–∞—Ç—å –±–ª–∏–∂–∞–π—à—É—é –ê–ó–°.',
    features: [
      '–î–æ—Å—Ç–∞–≤–∫–∞ –±–µ–Ω–∑–∏–Ω–∞ –ê–ò-92, –ê–ò-95, –ê–ò-98',
      '–î–æ—Å—Ç–∞–≤–∫–∞ –¥–∏–∑–µ–ª—å–Ω–æ–≥–æ —Ç–æ–ø–ª–∏–≤–∞',
      '–ö–∞–Ω–∏—Å—Ç—Ä–∞ –æ—Ç 5 –¥–æ 20 –ª–∏—Ç—Ä–æ–≤',
      '–ü–æ–º–æ—â—å —Å –∑–∞–ø—Ä–∞–≤–∫–æ–π'
    ],
    price: '500-1500‚ÇΩ',
    time: '20-40 –º–∏–Ω',
    gradient: 'bg-gradient-to-br from-green-500 via-emerald-500 to-teal-500',
    illustration: `<svg viewBox="0 0 400 200" class="w-full h-full opacity-30">
      <defs>
        <linearGradient id="fuelGrad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#22c55e"/>
          <stop offset="100%" style="stop-color:#14b8a6"/>
        </linearGradient>
      </defs>
      <!-- –ö–æ–ª–æ–Ω–∫–∞ -->
      <rect x="150" y="30" width="100" height="140" rx="8" fill="url(#fuelGrad)" opacity="0.8"/>
      <rect x="160" y="45" width="80" height="40" rx="4" fill="#fff" opacity="0.3"/>
      <!-- –®–ª–∞–Ω–≥ -->
      <path d="M250 80 Q280 80 300 100 Q320 120 320 150" stroke="#1e3a5f" stroke-width="8" fill="none" stroke-linecap="round"/>
      <!-- –ü–∏—Å—Ç–æ–ª–µ—Ç -->
      <rect x="310" y="145" width="40" height="20" rx="4" fill="#1e3a5f"/>
      <rect x="345" y="140" width="15" height="30" rx="2" fill="#1e3a5f"/>
      <!-- –ö–∞–ø–ª–∏ -->
      <ellipse cx="355" cy="180" rx="4" ry="6" fill="#22c55e" opacity="0.8"/>
      <ellipse cx="350" cy="190" rx="3" ry="5" fill="#22c55e" opacity="0.6"/>
    </svg>`
  },
  {
    id: 'tire',
    icon: 'üõû',
    title: '–ö–æ–ª–µ—Å–æ',
    subtitle: '–ó–∞–º–µ–Ω–∞ –∏–ª–∏ —Ä–µ–º–æ–Ω—Ç —à–∏–Ω—ã',
    description: '–ü—Ä–æ–∫–æ–ª–æ–ª–∏ –∫–æ–ª–µ—Å–æ? –ù–µ—Ç –∑–∞–ø–∞—Å–∫–∏ –∏–ª–∏ –Ω–µ –∑–Ω–∞–µ—Ç–µ –∫–∞–∫ –µ—ë –ø–æ–º–µ–Ω—è—Ç—å? –ù–∞—à–∏ –ø–æ–º–æ—â–Ω–∏–∫–∏ –ø—Ä–∏–µ–¥—É—Ç —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –∏ –±—ã—Å—Ç—Ä–æ —Ä–µ—à–∞—Ç –ø—Ä–æ–±–ª–µ–º—É.',
    features: [
      '–ó–∞–º–µ–Ω–∞ –∫–æ–ª–µ—Å–∞ –Ω–∞ –∑–∞–ø–∞—Å–∫—É',
      '–†–µ–º–æ–Ω—Ç –ø—Ä–æ–∫–æ–ª–∞ –∂–≥—É—Ç–æ–º',
      '–ü–æ–¥–∫–∞—á–∫–∞ –∫–æ–ª–µ—Å–∞',
      '–ü–æ–º–æ—â—å —Å –¥–æ–º–∫—Ä–∞—Ç–æ–º'
    ],
    price: '400-1200‚ÇΩ',
    time: '15-45 –º–∏–Ω',
    gradient: 'bg-gradient-to-br from-purple-500 via-violet-500 to-indigo-500',
    illustration: `<svg viewBox="0 0 400 200" class="w-full h-full opacity-30">
      <defs>
        <linearGradient id="tireGrad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#8b5cf6"/>
          <stop offset="100%" style="stop-color:#6366f1"/>
        </linearGradient>
      </defs>
      <!-- –ö–æ–ª–µ—Å–æ -->
      <circle cx="200" cy="100" r="70" fill="#1e293b" stroke="url(#tireGrad)" stroke-width="25"/>
      <circle cx="200" cy="100" r="30" fill="#64748b"/>
      <circle cx="200" cy="100" r="15" fill="#1e293b"/>
      <!-- –ë–æ–ª—Ç—ã -->
      <circle cx="200" cy="80" r="4" fill="#94a3b8"/>
      <circle cx="218" cy="90" r="4" fill="#94a3b8"/>
      <circle cx="218" cy="110" r="4" fill="#94a3b8"/>
      <circle cx="200" cy="120" r="4" fill="#94a3b8"/>
      <circle cx="182" cy="110" r="4" fill="#94a3b8"/>
      <circle cx="182" cy="90" r="4" fill="#94a3b8"/>
      <!-- –ì–∞–µ—á–Ω—ã–π –∫–ª—é—á -->
      <rect x="300" y="60" width="60" height="12" rx="2" fill="#94a3b8" transform="rotate(45 330 66)"/>
      <circle cx="340" cy="95" r="15" fill="none" stroke="#94a3b8" stroke-width="5"/>
    </svg>`
  },
  {
    id: 'towing',
    icon: 'üöó',
    title: '–ë—É–∫—Å–∏—Ä–æ–≤–∫–∞',
    subtitle: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è',
    description: '–ê–≤—Ç–æ–º–æ–±–∏–ª—å —Å–ª–æ–º–∞–ª—Å—è –∏ –Ω–µ –º–æ–∂–µ—Ç –µ—Ö–∞—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ? –ù–∞—à–∏ –ø–æ–º–æ—â–Ω–∏–∫–∏ –æ—Ç–±—É–∫—Å–∏—Ä—É—é—Ç –≤–∞—Å –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –∏–ª–∏ –¥–æ –¥–æ–º–∞. –ë–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ.',
    features: [
      '–ë—É–∫—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞ –≥–∏–±–∫–æ–π —Å—Ü–µ–ø–∫–µ',
      '–ë—É–∫—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞ –∂—ë—Å—Ç–∫–æ–π —Å—Ü–µ–ø–∫–µ',
      '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–æ 50 –∫–º',
      '–ü–æ–º–æ—â—å –≤ –≤—ã–±–æ—Ä–µ –°–¢–û'
    ],
    price: '1000-3000‚ÇΩ',
    time: '20-60 –º–∏–Ω',
    gradient: 'bg-gradient-to-br from-blue-500 via-cyan-500 to-sky-500',
    illustration: `<svg viewBox="0 0 400 200" class="w-full h-full opacity-30">
      <defs>
        <linearGradient id="towGrad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#3b82f6"/>
          <stop offset="100%" style="stop-color:#0ea5e9"/>
        </linearGradient>
      </defs>
      <!-- –ú–∞—à–∏–Ω–∞ —Å–ø–µ—Ä–µ–¥–∏ -->
      <rect x="50" y="90" width="100" height="50" rx="8" fill="url(#towGrad)" opacity="0.8"/>
      <rect x="60" y="75" width="80" height="25" rx="5" fill="url(#towGrad)" opacity="0.8"/>
      <circle cx="75" cy="145" r="12" fill="#1e293b"/>
      <circle cx="135" cy="145" r="12" fill="#1e293b"/>
      <!-- –¢—Ä–æ—Å -->
      <line x1="150" y1="115" x2="230" y2="115" stroke="#fbbf24" stroke-width="4" stroke-dasharray="10,5"/>
      <!-- –ú–∞—à–∏–Ω–∞ —Å–∑–∞–¥–∏ -->
      <rect x="230" y="90" width="120" height="50" rx="8" fill="#64748b" opacity="0.6"/>
      <rect x="245" y="75" width="90" height="25" rx="5" fill="#64748b" opacity="0.6"/>
      <circle cx="255" cy="145" r="12" fill="#1e293b"/>
      <circle cx="325" cy="145" r="12" fill="#1e293b"/>
      <!-- –í–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫ -->
      <circle cx="290" cy="60" r="15" fill="#ef4444"/>
      <text x="290" y="66" text-anchor="middle" fill="#fff" font-size="20" font-weight="bold">!</text>
    </svg>`
  },
  {
    id: 'sober_driver',
    icon: 'üöï',
    title: '–¢—Ä–µ–∑–≤—ã–π –≤–æ–¥–∏—Ç–µ–ª—å',
    subtitle: '–î–æ–≤–µ–∑—ë–º –≤–∞—Å –∏ –≤–∞—à –∞–≤—Ç–æ',
    description: '–í—ã–ø–∏–ª–∏ –Ω–∞ –≤–µ—á–µ—Ä–∏–Ω–∫–µ? –ù–µ —Ä–∏—Å–∫—É–π—Ç–µ! –ù–∞—à —Ç—Ä–µ–∑–≤—ã–π –≤–æ–¥–∏—Ç–µ–ª—å –æ—Ç–≤–µ–∑—ë—Ç –≤–∞—Å –¥–æ–º–æ–π –Ω–∞ –≤–∞—à–µ–º –∂–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ. –ë–µ–∑–æ–ø–∞—Å–Ω–æ, –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ, –±–µ–∑ —à—Ç—Ä–∞—Ñ–æ–≤.',
    features: [
      '–í–æ–¥–∏—Ç–µ–ª—å —Å –ø—Ä–∞–≤–∞–º–∏ –∏ –æ–ø—ã—Ç–æ–º',
      '–î–æ—Å—Ç–∞–≤–∫–∞ –≤–∞—Å –∏ –∞–≤—Ç–æ –¥–æ–º–æ–π',
      '–ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å',
      '–†–∞–±–æ—Ç–∞–µ–º –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ'
    ],
    price: '800-2500‚ÇΩ',
    time: '15-45 –º–∏–Ω',
    gradient: 'bg-gradient-to-br from-yellow-500 via-amber-500 to-orange-500',
    illustration: `<svg viewBox="0 0 400 200" class="w-full h-full opacity-30">
      <defs>
        <linearGradient id="driverGrad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#eab308"/>
          <stop offset="100%" style="stop-color:#f97316"/>
        </linearGradient>
      </defs>
      <!-- –¢–∞–∫—Å–∏ -->
      <rect x="100" y="80" width="180" height="70" rx="10" fill="url(#driverGrad)" opacity="0.8"/>
      <rect x="130" y="55" width="120" height="35" rx="8" fill="url(#driverGrad)" opacity="0.8"/>
      <!-- –û–∫–Ω–∞ -->
      <rect x="140" y="62" width="45" height="22" rx="3" fill="#87ceeb" opacity="0.7"/>
      <rect x="195" y="62" width="45" height="22" rx="3" fill="#87ceeb" opacity="0.7"/>
      <!-- –ö–æ–ª—ë—Å–∞ -->
      <circle cx="145" cy="155" r="15" fill="#1e293b"/>
      <circle cx="235" cy="155" r="15" fill="#1e293b"/>
      <!-- –®–∞—à–µ—á–∫–∏ -->
      <rect x="150" y="95" width="80" height="15" fill="#1e293b"/>
      <rect x="150" y="95" width="10" height="15" fill="#fff"/>
      <rect x="170" y="95" width="10" height="15" fill="#fff"/>
      <rect x="190" y="95" width="10" height="15" fill="#fff"/>
      <rect x="210" y="95" width="10" height="15" fill="#fff"/>
      <!-- –ß–µ–ª–æ–≤–µ–∫ -->
      <circle cx="320" cy="100" r="20" fill="#64748b"/>
      <ellipse cx="320" cy="145" rx="15" ry="25" fill="#64748b"/>
      <!-- –£–ª—ã–±–∫–∞ -->
      <path d="M312 105 Q320 112 328 105" stroke="#fff" stroke-width="2" fill="none"/>
    </svg>`
  },
  {
    id: 'other',
    icon: 'üîß',
    title: '–î—Ä—É–≥–æ–µ',
    subtitle: '–õ—é–±–∞—è –ø–æ–º–æ—â—å –Ω–∞ –¥–æ—Ä–æ–≥–µ',
    description: '–í–∞—à–∞ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –ø–æ–¥ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏? –ù–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ! –û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é, –∏ –º—ã –Ω–∞–π–¥—ë–º –ø–æ–º–æ—â–Ω–∏–∫–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–º–æ–∂–µ—Ç –≤–∞–º –ø–æ–º–æ—á—å.',
    features: [
      '–ú–µ–ª–∫–∏–π —Ä–µ–º–æ–Ω—Ç –Ω–∞ –º–µ—Å—Ç–µ',
      '–ü–æ–º–æ—â—å —Å –∑–∞–º–∫–æ–º/–∫–ª—é—á–æ–º',
      '–ó–∞–º–µ–Ω–∞ –ª–∞–º–ø–æ—á–µ–∫ –∏ –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–π',
      '–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ –∞–≤—Ç–æ'
    ],
    price: '300-2000‚ÇΩ',
    time: '15-60 –º–∏–Ω',
    gradient: 'bg-gradient-to-br from-gray-500 via-slate-500 to-zinc-600',
    illustration: `<svg viewBox="0 0 400 200" class="w-full h-full opacity-30">
      <defs>
        <linearGradient id="toolGrad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#64748b"/>
          <stop offset="100%" style="stop-color:#475569"/>
        </linearGradient>
      </defs>
      <!-- –ì–∞–µ—á–Ω—ã–π –∫–ª—é—á -->
      <rect x="80" y="70" width="120" height="20" rx="3" fill="url(#toolGrad)" transform="rotate(-30 140 80)"/>
      <circle cx="95" cy="58" r="18" fill="none" stroke="url(#toolGrad)" stroke-width="10"/>
      <!-- –û—Ç–≤—ë—Ä—Ç–∫–∞ -->
      <rect x="220" y="50" width="15" height="100" rx="2" fill="#f97316"/>
      <rect x="215" y="140" width="25" height="40" rx="3" fill="#1e293b"/>
      <!-- –®–µ—Å—Ç–µ—Ä—ë–Ω–∫–∞ -->
      <circle cx="320" cy="100" r="35" fill="url(#toolGrad)"/>
      <circle cx="320" cy="100" r="15" fill="#1e293b"/>
      <rect x="315" y="60" width="10" height="15" fill="url(#toolGrad)"/>
      <rect x="315" y="125" width="10" height="15" fill="url(#toolGrad)"/>
      <rect x="280" y="95" width="15" height="10" fill="url(#toolGrad)"/>
      <rect x="345" y="95" width="15" height="10" fill="url(#toolGrad)"/>
    </svg>`
  }
])

function openServiceModal(service) {
  selectedService.value = service
}
const isLoadingList = ref(true)
const showSidebar = ref(false) // –°–æ—Å—Ç–æ—è–Ω–∏–µ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö

// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É
const activeType = ref('all')
const typeOptions = [
  { value: 'all', label: '–í—Å–µ' },
  { value: 'battery', label: '–ë–∞—Ç–∞—Ä–µ—è' },
  { value: 'fuel', label: '–¢–æ–ø–ª–∏–≤–æ' },
  { value: 'tire', label: '–ö–æ–ª–µ—Å–æ' },
  { value: 'towing', label: '–≠–≤–∞–∫—É–∞—Ç–æ—Ä' },
  { value: 'road_conflict', label: '–ö–æ–Ω—Ñ–ª–∏–∫—Ç' },
  { value: 'sober_driver', label: '–¢—Ä–µ–∑–≤—ã–π –≤–æ–¥–∏—Ç–µ–ª—å' },
  { value: 'other', label: '–î—Ä—É–≥–æ–µ' },
]

const filteredRequests = computed(() => {
  if (activeType.value === 'all') return liveRequests.value
  return liveRequests.value.filter(r => r.type === activeType.value)
})

// –ò–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞—è–≤–æ–∫
let refreshInterval = null

onMounted(async () => {
  // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞—è–≤–∫–∏ –∏–∑ API
  await loadRequests()
  // OpenStreetMap –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
  setTimeout(() => { isLoadingList.value = false }, 500)
  
  // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
  refreshInterval = setInterval(async () => {
    console.log('üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫...')
    await loadRequests()
  }, 30000) // 30 —Å–µ–∫—É–Ω–¥
  
  console.log('‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –≤–∫–ª—é—á–µ–Ω–æ (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫)')
})

onUnmounted(() => {
  // –û—á–∏—â–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–∏ —É—Ö–æ–¥–µ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  if (refreshInterval) {
    clearInterval(refreshInterval)
    console.log('üóëÔ∏è –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ')
  }
})

// –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫ —Å —Å–µ—Ä–≤–µ—Ä–∞
async function loadRequests() {
  try {
    isLoadingList.value = true
    console.log('üîÑ –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞—è–≤–∫–∏...')
    
    // –ü–æ–ª—É—á–∞–µ–º –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
    let userLat = null
    let userLon = null
    
    try {
      if (navigator.geolocation) {
        const position = await new Promise((resolve, reject) => {
          navigator.geolocation.getCurrentPosition(resolve, reject, {
            enableHighAccuracy: false,
            timeout: 5000,
            maximumAge: 300000 // –ö—ç—à 5 –º–∏–Ω—É—Ç
          })
        })
        userLat = position.coords.latitude
        userLon = position.coords.longitude
        console.log('üìç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', userLat, userLon)
      }
    } catch (geoError) {
      console.warn('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é:', geoError.message)
    }
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞—è–≤–∫–∏
    const response = await apiService.getHelpRequests({ status: 'active' })
    console.log('üì¶ –ü–æ–ª—É—á–µ–Ω–æ –∑–∞—è–≤–æ–∫:', response?.data?.length || response?.length || 0)
    
    const requestsData = response?.data || response
    if (requestsData && Array.isArray(requestsData)) {
      // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—É—é –∑–∞—è–≤–∫—É
      liveRequests.value = requestsData.map(request => {
        const problemTypeIcons = {
          battery: 'üîã',
          fuel: '‚õΩ',
          tire: 'üõû',
          towing: 'üöó',
          sober_driver: 'üöï',
          road_conflict: 'üö®',
          other: 'üîß'
        }
        
        const problemTypeNames = {
          battery: '–°–µ–≤—à–∞—è –±–∞—Ç–∞—Ä–µ—è',
          fuel: '–ù–µ—Ç —Ç–æ–ø–ª–∏–≤–∞',
          tire: '–ü—Ä–æ–∫–æ–ª –∫–æ–ª–µ—Å–∞',
          towing: '–ë—É–∫—Å–∏—Ä–æ–≤–∫–∞',
          sober_driver: '–¢—Ä–µ–∑–≤—ã–π –≤–æ–¥–∏—Ç–µ–ª—å',
          road_conflict: '–ö–æ–Ω—Ñ–ª–∏–∫—Ç –Ω–∞ –¥–æ—Ä–æ–≥–µ',
          other: '–î—Ä—É–≥–æ–µ'
        }
        
        const type = request.problem_type || request.type || 'other'
        const icon = problemTypeIcons[type] || '‚ùì'
        const typeName = problemTypeNames[type] || '–ü–æ–º–æ—â—å'
        
        // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –µ—Å–ª–∏ –µ—Å—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è
        let distance = '‚Äî'
        if (userLat && userLon && request.latitude && request.longitude) {
          const distKm = calculateDistance(
            userLat, userLon,
            parseFloat(request.latitude), parseFloat(request.longitude)
          )
          distance = distKm < 1 ? `${Math.round(distKm * 1000)} –º` : `${distKm.toFixed(1)} –∫–º`
        }
        
        // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –ø–æ–ª–µ –¥–∞—Ç—ã
        const createdDate = request.createdAt || request.created_at
        console.log('üìÖ –î–∞—Ç–∞ –∑–∞—è–≤–∫–∏:', request.id, '- createdAt:', request.createdAt, 'created_at:', request.created_at, 'parsed:', createdDate)
        
        return {
          id: request.id,
          user_id: request.user_id, // ID –∞–≤—Ç–æ—Ä–∞ –∑–∞—è–≤–∫–∏
          type: type,
          title: `${icon} ${typeName}`,
          description: request.description || '–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–º–æ—â—å',
          amount: request.amount || 0,
          distance: distance,
          lat: parseFloat(request.latitude),
          lon: parseFloat(request.longitude),
          address: request.address,
          created_at: createdDate,
          status: request.status
        }
      })
      
      // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
      liveRequests.value.sort((a, b) => {
        const dateA = new Date(a.created_at)
        const dateB = new Date(b.created_at)
        return dateB - dateA
      })
      
      console.log('‚úÖ –ó–∞—è–≤–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã:', liveRequests.value.length)
    }
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞—è–≤–æ–∫:', error)
    // –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –æ—Å—Ç–∞–≤–ª—è–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
    liveRequests.value = []
  } finally {
    isLoadingList.value = false
  }
}

// –ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –∑–∞–ø—Ä–æ—Å–∞ —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –∫–∞—Ä—Ç–µ
function showRequestDetails(request) {
  console.log('üéØ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª–∏ –∑–∞–ø—Ä–æ—Å–∞:', request.title)
  
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–æ—Ç–∫—Ä–æ–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ)
  selectedRequest.value = request
  
  // –ó–∞–∫—Ä—ã–≤–∞–µ–º –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏
  showSidebar.value = false
  
  // –ü—Ä–∏–±–ª–∏–∂–∞–µ–º –∫–∞—Ä—Ç—É –∫ –∑–∞–ø—Ä–æ—Å—É –≤ —Ñ–æ–Ω–µ
  if (mapRef.value && mapRef.value.focusOnRequest) {
    mapRef.value.focusOnRequest(request)
  }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞ –∑–∞–ø—Ä–æ—Å–µ (—Å—Ç–∞—Ä–∞—è, –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
// function focusOnRequest(request) {
//   showRequestDetails(request)
// }

function onMapReady() {
  // –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å toast –∏–ª–∏ —É–±—Ä–∞—Ç—å skeleton (handled by Suspense)
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –º–æ–¥–∞–ª–∫–∏ (–¥–µ–º–æ-—Å–∏–º—É–ª—è—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ –∫ –±—ç–∫—É)
const isLoadingModal = ref(false)

function _buildRouteToSelected() {
  if (!selectedRequest.value || !mapRef.value || !mapRef.value.buildRoute) return
  isLoadingModal.value = true
  // —ç–º—É–ª–∏—Ä—É–µ–º –ø–æ–¥–≥—Ä—É–∑–∫—É –¥–µ—Ç–∞–ª–µ–π
  setTimeout(async () => {
    try {
      if (navigator.geolocation) {
        const pos = await new Promise((resolve, reject) => {
          navigator.geolocation.getCurrentPosition(resolve, reject, { enableHighAccuracy: true, timeout: 10000 })
        })
        const from = [pos.coords.latitude, pos.coords.longitude]
        const to = [selectedRequest.value.lat, selectedRequest.value.lon]
        await mapRef.value.buildRoute(from, to)
      }
    } catch (error) {
      console.warn('Route build error:', error)
    }
    isLoadingModal.value = false
  }, 600)
}

async function shareSelected() {
  if (!selectedRequest.value) return
  const url = `${window.location.origin}/responses/${selectedRequest.value.id}`
  if (navigator.share) {
    try {
      await navigator.share({ title: selectedRequest.value.title, text: selectedRequest.value.description, url })
    } catch (err) {
      // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω–∏–ª –∏–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ - –ø—Ä–æ–±—É–µ–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –±—É—Ñ–µ—Ä
      if (err.name !== 'AbortError') {
        console.warn('Share failed, trying clipboard:', err)
        try {
          await navigator.clipboard.writeText(url)
          alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞')
        } catch (clipboardErr) {
          console.error('Clipboard write failed:', clipboardErr)
          alert('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –∏–ª–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É')
        }
      }
    }
  } else {
    try {
      await navigator.clipboard.writeText(url)
      alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞')
    } catch (err) {
      console.error('Clipboard write failed:', err)
      alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É')
    }
  }
}

function getIcon(type) {
  const icons = { battery: 'üîã', fuel: '‚õΩ', tire: 'üõû', towing: 'üöó', road_conflict: 'üö®', other: 'üîß' }
  return icons[type] || '‚ùì'
}

function getIconGradient(type) {
  const gradients = {
    battery: 'bg-gradient-to-br from-orange-400 to-red-600',
    fuel: 'bg-gradient-to-br from-green-400 to-green-600',
    tire: 'bg-gradient-to-br from-purple-400 to-purple-600',
    towing: 'bg-gradient-to-br from-blue-400 to-blue-600',
    road_conflict: 'bg-gradient-to-br from-red-400 to-red-600',
    other: 'bg-gradient-to-br from-gray-400 to-gray-600'
  }
  return gradients[type] || 'bg-gradient-to-br from-gray-400 to-gray-600'
}
</script>

<style scoped>
.cloud {
  position: absolute;
  background: rgba(255, 255, 255, 0.4);
  border-radius: 100px;
  height: 80px;
  width: 200px;
  animation: float-cloud 80s linear infinite;
}

.cloud::before, .cloud::after {
  content: '';
  position: absolute;
  background: rgba(255, 255, 255, 0.4);
  border-radius: 100px;
}

.cloud::before {
  width: 120px;
  height: 100px;
  top: -50px;
  left: 30px;
}

.cloud::after {
  width: 140px;
  height: 90px;
  top: -40px;
  right: 30px;
}

.cloud-1 {
  top: 15%;
  left: -15%;
  animation-delay: 0s;
}

.cloud-2 {
  top: 35%;
  left: -20%;
  animation-delay: 27s;
  transform: scale(0.8);
}

.cloud-3 {
  top: 55%;
  left: -25%;
  animation-delay: 54s;
  transform: scale(1.2);
}

@keyframes float-cloud {
  0% { transform: translateX(0); }
  100% { transform: translateX(calc(100vw + 300px)); }
}

@keyframes road-scroll {
  0% { background-position: 0 0; }
  100% { background-position: 100px 100px; }
}

@keyframes slide-up {
  0% { transform: translateY(100%); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
}

.animate-slide-up {
  animation: slide-up 0.5s ease-out;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
@keyframes fade-in {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}
.animate-fade-in { animation: fade-in 0.35s ease-out; }

/* –°–∫–µ–ª–µ—Ç–æ–Ω—ã */
.skeleton {
  position: relative;
  overflow: hidden;
}
.skeleton::after {
  content: '';
  position: absolute;
  inset: 0;
  transform: translateX(-100%);
  background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.6) 50%, rgba(255,255,255,0) 100%);
  animation: shimmer 1.4s infinite;
}
@keyframes shimmer {
  100% { transform: translateX(100%); }
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
.modal-enter-active {
  transition: opacity 0.25s ease-out;
}
.modal-enter-active > div {
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.25s ease-out;
}
.modal-leave-active {
  transition: opacity 0.2s ease-in;
}
.modal-leave-active > div {
  transition: transform 0.2s ease-in, opacity 0.2s ease-in;
}
.modal-enter-from {
  opacity: 0;
}
.modal-enter-from > div {
  transform: scale(0.9) translateY(20px);
  opacity: 0;
}
.modal-leave-to {
  opacity: 0;
}
.modal-leave-to > div {
  transform: scale(0.95) translateY(10px);
  opacity: 0;
}

/* Float animation */
@keyframes float {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-20px) rotate(5deg); }
}
.animate-float {
  animation: float 6s ease-in-out infinite;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —É—Å–ª—É–≥ */
.service-modal-enter-active {
  transition: opacity 0.3s ease-out;
}
.service-modal-enter-active > div {
  transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease-out;
}
.service-modal-leave-active {
  transition: opacity 0.2s ease-in;
}
.service-modal-leave-active > div {
  transition: transform 0.2s ease-in, opacity 0.2s ease-in;
}
.service-modal-enter-from {
  opacity: 0;
}
.service-modal-enter-from > div {
  transform: scale(0.8) translateY(40px);
  opacity: 0;
}
.service-modal-leave-to {
  opacity: 0;
}
.service-modal-leave-to > div {
  transform: scale(0.9) translateY(20px);
  opacity: 0;
}
</style>
