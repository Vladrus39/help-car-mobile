import{r as e,c as t,o as a,a as r,h as l,f as s,l as o,m as n,t as i,I as d,J as u,g as c,x as g,F as v,i as h,e as p,T as x,y as b,k as f,n as y,G as m,v as w,p as k}from"./vendor-mW7CftnD-v1766841230394.js";import{_,u as q,a as C,l as M}from"./index-BxfSuIcm-v1766841230394.js";import{_ as U}from"./NavigationHeader-RWEiOBJy-v1766841230394.js";import{P as j}from"./PremiumBadge-ZzvbDEU--v1766841230394.js";import"./utils-BASWCPVD-v1766841230394.js";import"./maps-CCq-KL9W-v1766841230394.js";const P={class:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors"},R={class:"max-w-4xl mx-auto py-4 sm:py-8 px-4"},A={class:"mb-6"},$={class:"flex items-center justify-between mb-4"},D={class:"flex items-center gap-2"},I={key:0,class:"px-3 py-1 bg-red-500 text-white text-sm font-bold rounded-full animate-pulse"},F={class:"relative"},L={class:"grid grid-cols-2 gap-3 mb-6"},T={class:"flex gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide"},S=["onClick"],z={key:0,class:"space-y-3"},B={key:1,class:"text-center py-16"},N={class:"text-8xl mb-6 animate-bounce"},V={class:"text-xl font-bold text-gray-900 dark:text-white mb-2"},G={class:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto"},H={class:"flex flex-wrap justify-center gap-3"},J={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},O=["onClick"],W={class:"p-4 flex items-center gap-4"},E={class:"relative flex-shrink-0"},K={key:0,class:"w-14 h-14 rounded-full overflow-hidden ring-2 ring-gray-200 dark:ring-gray-700 group-hover:ring-blue-500 transition"},Q=["src"],X={key:2,class:"absolute -bottom-0.5 -right-0.5 w-4 h-4 bg-green-500 border-2 border-white dark:border-gray-800 rounded-full",title:"Ğ“Ğ¾Ñ‚Ğ¾Ğ² Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ"},Y={class:"flex-1 min-w-0"},Z={class:"flex items-center gap-2 mb-1"},ee={class:"font-bold text-gray-900 dark:text-white truncate"},te={key:0,class:"text-yellow-500 text-sm"},ae={key:1,class:"text-blue-500",title:"ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞµĞ½Ğ½Ñ‹Ğ¹"},re={key:0,class:"mb-1"},le={class:"flex items-center gap-2"},se={key:0,class:"text-gray-400"},oe={key:1,class:"text-sm text-gray-400 italic truncate"},ne={key:2,class:"flex items-center gap-1 text-blue-500 text-sm"},ie={class:"flex flex-col items-end gap-2 flex-shrink-0"},de={class:"text-xs text-gray-400"},ue={key:0,class:"min-w-[24px] h-6 px-2 bg-blue-600 text-white text-xs font-bold rounded-full flex items-center justify-center"},ce={key:1,class:"text-yellow-500"},ge={class:"hidden sm:flex items-center gap-2 px-4 pb-3 opacity-0 group-hover:opacity-100 transition-opacity"},ve=["onClick"],he=["onClick"],pe=["onClick"],xe=_({__name:"MyChatsView",setup(_){const xe=b(),be=q(),fe=e([]),ye=e([]),me=e([]),we=e(!0),ke=e(""),_e=e("requests");let qe=null;const Ce=t(()=>{var e;return null==(e=be.user)?void 0:e.id}),Me=t(()=>[{id:"requests",label:"Ğ—Ğ°ÑĞ²ĞºĞ¸",icon:"ğŸ†˜",count:fe.value.filter(e=>e.unread_count>0).length},{id:"direct",label:"Ğ›Ğ¸Ñ‡Ğ½Ñ‹Ğµ",icon:"ğŸ‘¥",count:ye.value.filter(e=>e.unread_count>0).length},{id:"city",label:"Ğ“Ğ¾Ñ€Ğ¾Ğ´Ğ°",icon:"ğŸ™ï¸",count:me.value.filter(e=>e.unread_count>0).length}]),Ue=t(()=>fe.value.reduce((e,t)=>e+(t.unread_count||0),0)+ye.value.reduce((e,t)=>e+(t.unread_count||0),0)),je=t(()=>{let e=[];if("requests"===_e.value?e=fe.value:"direct"===_e.value?e=ye.value:"city"===_e.value&&(e=me.value),ke.value.trim()){const t=ke.value.toLowerCase();e=e.filter(e=>{var a,r,l,s,o,n;const i=(null==(r=null==(a=e.otherUser)?void 0:a.full_name)?void 0:r.toLowerCase())||"",d=(null==(s=null==(l=e.helpRequest)?void 0:l.problem_type)?void 0:s.toLowerCase())||"",u=(null==(n=null==(o=e.lastMessage)?void 0:o.content)?void 0:n.toLowerCase())||"";return i.includes(t)||d.includes(t)||u.includes(t)})}return[...e].sort((e,t)=>{var a,r;if(e.isPinned&&!t.isPinned)return-1;if(!e.isPinned&&t.isPinned)return 1;const l=new Date((null==(a=e.lastMessage)?void 0:a.createdAt)||e.last_message_at||e.created_at);return new Date((null==(r=t.lastMessage)?void 0:r.createdAt)||t.last_message_at||t.created_at)-l})}),Pe={battery:"ğŸ”‹ Ğ‘Ğ°Ñ‚Ğ°Ñ€ĞµÑ",fuel:"â›½ Ğ¢Ğ¾Ğ¿Ğ»Ğ¸Ğ²Ğ¾",tire:"ğŸ› ĞšĞ¾Ğ»ĞµÑĞ¾",towing:"ğŸš— Ğ‘ÑƒĞºÑĞ¸Ñ€",sober_driver:"ğŸš• Ğ¢Ñ€ĞµĞ·Ğ²Ñ‹Ğ¹",road_conflict:"ğŸš¨ ĞšĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚",other:"ğŸ”§ Ğ”Ñ€ÑƒĞ³Ğ¾Ğµ"},Re={battery:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",fuel:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",tire:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",towing:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",sober_driver:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",road_conflict:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",other:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400"},Ae=["bg-gradient-to-br from-blue-500 to-purple-600","bg-gradient-to-br from-green-500 to-teal-600","bg-gradient-to-br from-orange-500 to-red-600","bg-gradient-to-br from-pink-500 to-rose-600","bg-gradient-to-br from-indigo-500 to-blue-600","bg-gradient-to-br from-cyan-500 to-blue-600"];function $e(e){if(!e)return Ae[0];const t=e.charCodeAt(0)%Ae.length;return Ae[t]}function De(e){return Pe[e]||e}function Ie(e){return{active:"ğŸŸ¢ ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ°",accepted:"ğŸ¤ Ğ’ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ",completed:"âœ… Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°",cancelled:"âŒ ĞÑ‚Ğ¼ĞµĞ½ĞµĞ½Ğ°"}[e]||e}function Fe(e){if(!e)return null;if(e.startsWith("http"))return e;return"https://help-car.online/api/v1".replace("/api/v1","")+e}function Le(e){if(!e)return"";const t=new Date(e),a=new Date-t,r=Math.floor(a/6e4),l=Math.floor(a/36e5),s=Math.floor(a/864e5);return r<1?"ÑĞµĞ¹Ñ‡Ğ°Ñ":r<60?`${r} Ğ¼Ğ¸Ğ½`:l<24?`${l} Ñ‡`:s<7?`${s} Ğ´Ğ½`:t.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})}return a(async()=>{await async function(){try{we.value=!0;const[e,t]=await Promise.all([C.getMyChats().catch(e=>(console.error("Failed to load request chats:",e),{success:!1,data:[],error:e.message||"ĞÑˆĞ¸Ğ±ĞºĞ° Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ñ‡Ğ°Ñ‚Ğ¾Ğ² Ğ·Ğ°ÑĞ²Ğ¾Ğº"})),C.getDirectChats().catch(e=>(console.error("Failed to load direct chats:",e),{success:!1,data:[],error:e.message||"ĞÑˆĞ¸Ğ±ĞºĞ° Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ¿Ñ€ÑĞ¼Ñ‹Ñ… Ñ‡Ğ°Ñ‚Ğ¾Ğ²"}))]);console.log("Request chats response:",e),console.log("Direct chats response:",t),!1!==(null==e?void 0:e.success)?fe.value=Array.isArray(e)?e:(null==e?void 0:e.data)||[]:(fe.value=[],console.warn("Request chats failed:",null==e?void 0:e.error)),!1!==(null==t?void 0:t.success)?ye.value=Array.isArray(t)?t:(null==t?void 0:t.data)||[]:(ye.value=[],console.warn("Direct chats failed:",null==t?void 0:t.error)),console.log("Loaded request chats:",fe.value.length),console.log("Loaded direct chats:",ye.value.length)}catch(e){console.error("Failed to load chats:",e),fe.value=[],ye.value=[]}finally{we.value=!1}}(),function(){const e=localStorage.getItem("token");if(!e)return;const t="https:"===window.location.protocol?`wss://${window.location.host}`:`ws://${window.location.host}`;qe=M(t.replace(/^ws/,"http"),{auth:{token:e}}),qe.on("chat:newMessage",e=>{const t=fe.value.find(t=>t.id===e.chatId);t&&e.senderId!==Ce.value&&(t.unread_count=(t.unread_count||0)+1,t.lastMessage={content:e.content,createdAt:(new Date).toISOString(),sender:{id:e.senderId}})}),qe.on("chat:typing",e=>{const t=fe.value.find(t=>t.id===e.chatId);t&&e.userId!==Ce.value&&(t.isTyping=!0,setTimeout(()=>{t.isTyping=!1},3e3))})}()}),r(()=>{qe&&qe.disconnect()}),(e,t)=>{const a=g("router-link");return f(),l("div",P,[s(U),o("div",R,[o("div",A,[o("div",$,[t[2]||(t[2]=o("h1",{class:"text-2xl sm:text-3xl font-black text-gray-900 dark:text-white"}," ğŸ’¬ ĞœĞ¾Ğ¸ Ñ‡Ğ°Ñ‚Ñ‹ ",-1)),o("div",D,[Ue.value>0?(f(),l("span",I,i(Ue.value>99?"99+":Ue.value),1)):n("",!0)])]),o("div",F,[d(o("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>ke.value=e),type:"text",placeholder:"ğŸ” ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ñ‡Ğ°Ñ‚Ğ°Ğ¼...",class:"w-full px-4 py-3 pl-12 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"},null,512),[[u,ke.value]]),t[3]||(t[3]=o("svg",{class:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),ke.value?(f(),l("button",{key:0,class:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:t[1]||(t[1]=e=>ke.value="")}," âœ• ")):n("",!0)])]),o("div",L,[s(a,{to:"/global-chat",class:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-2xl p-4 hover:shadow-xl hover:scale-[1.02] transition-all"},{default:c(()=>[...t[4]||(t[4]=[o("div",{class:"flex items-center gap-3"},[o("div",{class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center text-2xl"}," ğŸŒ "),o("div",null,[o("h3",{class:"font-bold"},"ĞĞ±Ñ‰Ğ¸Ğ¹ Ñ‡Ğ°Ñ‚"),o("p",{class:"text-white/70 text-sm"},"Ğ’ÑĞµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸")])],-1)])]),_:1}),s(a,{to:"/city-chats",class:"bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-2xl p-4 hover:shadow-xl hover:scale-[1.02] transition-all"},{default:c(()=>[...t[5]||(t[5]=[o("div",{class:"flex items-center gap-3"},[o("div",{class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center text-2xl"}," ğŸ™ï¸ "),o("div",null,[o("h3",{class:"font-bold"},"Ğ“Ğ¾Ñ€Ğ¾Ğ´Ğ°"),o("p",{class:"text-white/70 text-sm"},"Ğ§Ğ°Ñ‚Ñ‹ Ğ¿Ğ¾ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ°Ğ¼")])],-1)])]),_:1})]),o("div",T,[(f(!0),l(v,null,h(Me.value,e=>(f(),l("button",{key:e.id,class:y(["flex items-center gap-2 px-4 py-2.5 rounded-xl font-semibold whitespace-nowrap transition-all",_e.value===e.id?"bg-blue-600 text-white shadow-lg shadow-blue-600/30":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"]),onClick:t=>_e.value=e.id},[o("span",null,i(e.icon),1),o("span",null,i(e.label),1),e.count>0?(f(),l("span",{key:0,class:y(["px-2 py-0.5 text-xs rounded-full font-bold",_e.value===e.id?"bg-white/20 text-white":"bg-red-500 text-white"])},i(e.count),3)):n("",!0)],10,S))),128))]),we.value?(f(),l("div",z,[(f(),l(v,null,h(5,e=>o("div",{key:e,class:"bg-white dark:bg-gray-800 rounded-2xl p-4 animate-pulse"},[...t[6]||(t[6]=[m('<div class="flex items-center gap-4" data-v-f0fcb705><div class="w-14 h-14 bg-gray-200 dark:bg-gray-700 rounded-full" data-v-f0fcb705></div><div class="flex-1 space-y-2" data-v-f0fcb705><div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3" data-v-f0fcb705></div><div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-2/3" data-v-f0fcb705></div><div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2" data-v-f0fcb705></div></div></div>',1)])])),64))])):0===je.value.length?(f(),l("div",B,[o("div",N,i(ke.value?"ğŸ”":"requests"===_e.value?"ğŸ†˜":"direct"===_e.value?"ğŸ‘¥":"ğŸ™ï¸"),1),o("h3",V,i(ke.value?"ĞĞ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾":"ĞŸĞ¾ĞºĞ° Ğ½ĞµÑ‚ Ñ‡Ğ°Ñ‚Ğ¾Ğ²"),1),o("p",G,i(ke.value?"ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ²Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ":"requests"===_e.value?"Ğ§Ğ°Ñ‚Ñ‹ Ğ¿Ğ¾ÑĞ²ÑÑ‚ÑÑ ĞºĞ¾Ğ³Ğ´Ğ° Ğ²Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°Ğ´Ğ¸Ñ‚Ğµ Ğ·Ğ°ÑĞ²ĞºÑƒ Ğ¸Ğ»Ğ¸ Ğ¾Ñ‚ĞºĞ»Ğ¸ĞºĞ½ĞµÑ‚ĞµÑÑŒ Ğ½Ğ° Ğ·Ğ°ÑĞ²ĞºÑƒ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ":"direct"===_e.value?"Ğ—Ğ´ĞµÑÑŒ Ğ±ÑƒĞ´ÑƒÑ‚ Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ‡Ğ°Ñ‚Ñ‹ Ñ Ğ´Ñ€ÑƒĞ·ÑŒÑĞ¼Ğ¸. Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ´Ñ€ÑƒĞ·ĞµĞ¹ Ñ‡ĞµÑ€ĞµĞ· Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ!":"city"===_e.value?"ĞŸÑ€Ğ¸ÑĞ¾ĞµĞ´Ğ¸Ğ½ÑĞ¹Ñ‚ĞµÑÑŒ Ğº Ñ‡Ğ°Ñ‚Ğ°Ğ¼ Ğ²Ğ°ÑˆĞµĞ³Ğ¾ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ° Ğ¸ Ğ¾Ğ±Ñ‰Ğ°Ğ¹Ñ‚ĞµÑÑŒ Ñ Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑĞ¼Ğ¸!":"ĞŸĞ¾ĞºĞ° Ğ½ĞµÑ‚ Ñ‡Ğ°Ñ‚Ğ¾Ğ²"),1),o("div",H,[ke.value||"requests"!==_e.value?n("",!0):(f(),p(a,{key:0,to:"/create-request",class:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl font-bold hover:from-blue-700 hover:to-blue-800 transition shadow-lg shadow-blue-600/30"},{default:c(()=>[...t[7]||(t[7]=[w(" ğŸ†˜ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°ÑĞ²ĞºÑƒ ",-1)])]),_:1})),ke.value||"city"!==_e.value?n("",!0):(f(),p(a,{key:1,to:"/city-chats",class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-xl font-bold hover:from-purple-700 hover:to-purple-800 transition shadow-lg shadow-purple-600/30"},{default:c(()=>[...t[8]||(t[8]=[w(" ğŸ™ï¸ Ğ“Ğ¾Ñ€Ğ¾Ğ´ÑĞºĞ¸Ğµ Ñ‡Ğ°Ñ‚Ñ‹ ",-1)])]),_:1})),ke.value||"direct"!==_e.value?n("",!0):(f(),p(a,{key:2,to:"/profile?addFriend=true",class:"px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl font-bold hover:from-green-700 hover:to-green-800 transition shadow-lg shadow-green-600/30"},{default:c(()=>[...t[9]||(t[9]=[w(" ğŸ‘¥ ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ´Ñ€ÑƒĞ·ĞµĞ¹ ",-1)])]),_:1}))])])):(f(),l("div",J,[s(x,{name:"chat-list"},{default:c(()=>[(f(!0),l(v,null,h(je.value,e=>{var a,r,d,u,c,g,v,h,p,x,b,m,_;return f(),l("div",{key:e.id,class:y(["bg-white dark:bg-gray-800 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 cursor-pointer overflow-hidden group",e.unread_count>0?"ring-2 ring-blue-500/50":""]),onClick:t=>function(e){"requests"===_e.value&&e.helpRequest?xe.push(`/chat/${e.helpRequest.id}`):"direct"===_e.value?xe.push(`/direct-chat/${e.id}`):"city"===_e.value&&xe.push("/city-chats")}(e)},[o("div",W,[o("div",E,[(null==(a=e.otherUser)?void 0:a.avatar_url)?(f(),l("div",K,[o("img",{src:Fe(e.otherUser.avatar_url),class:"w-full h-full object-cover"},null,8,Q)])):(f(),l("div",{key:1,class:y(["w-14 h-14 rounded-full flex items-center justify-center text-xl font-bold text-white",$e(null==(r=e.otherUser)?void 0:r.full_name)])},i((_=null==(d=e.otherUser)?void 0:d.full_name,_?_.charAt(0).toUpperCase():"ğŸ‘¤")),3)),(null==(u=e.otherUser)?void 0:u.is_available_to_help)?(f(),l("span",X)):n("",!0)]),o("div",Y,[o("div",Z,[o("span",ee,i((null==(c=e.otherUser)?void 0:c.full_name)||"ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ"),1),s(j,{status:null==(g=e.otherUser)?void 0:g.premium_status,size:"xs"},null,8,["status"]),(null==(v=e.otherUser)?void 0:v.rating)?(f(),l("span",te," â­ "+i(parseFloat(e.otherUser.rating||5).toFixed(1)),1)):n("",!0),(null==(h=e.otherUser)?void 0:h.is_verified)?(f(),l("span",ae,"âœ“")):n("",!0)]),e.helpRequest?(f(),l("div",re,[o("span",{class:y(["inline-block px-2 py-0.5 rounded-full text-xs font-medium",(m=e.helpRequest.problem_type,Re[m]||Re.other)])},i(De(e.helpRequest.problem_type)),3),e.helpRequest.status?(f(),l("span",{key:0,class:y(["ml-2 text-xs",(b=e.helpRequest.status,{active:"text-green-600",accepted:"text-blue-600",completed:"text-gray-500",cancelled:"text-red-500"}[b]||"text-gray-500")])},i(Ie(e.helpRequest.status)),3)):n("",!0)])):n("",!0),o("div",le,[e.lastMessage?(f(),l("p",{key:0,class:y(["text-sm truncate flex-1",e.unread_count>0?"text-gray-900 dark:text-white font-medium":"text-gray-500 dark:text-gray-400"])},[(null==(p=e.lastMessage.sender)?void 0:p.id)===Ce.value?(f(),l("span",se,"Ğ’Ñ‹: ")):n("",!0),w(" "+i(e.lastMessage.content),1)],2)):(f(),l("p",oe," ĞĞ°Ñ‡Ğ½Ğ¸Ñ‚Ğµ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ... ")),e.isTyping?(f(),l("span",ne,[...t[10]||(t[10]=[o("span",{class:"flex gap-0.5"},[o("span",{class:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-bounce",style:{"animation-delay":"0ms"}}),o("span",{class:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-bounce",style:{"animation-delay":"150ms"}}),o("span",{class:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-bounce",style:{"animation-delay":"300ms"}})],-1),w(" Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ°ĞµÑ‚ ",-1)])])):n("",!0)])]),o("div",ie,[o("span",de,i(Le((null==(x=e.lastMessage)?void 0:x.createdAt)||e.last_message_at||e.created_at)),1),e.unread_count>0?(f(),l("span",ue,i(e.unread_count>99?"99+":e.unread_count),1)):n("",!0),e.isPinned?(f(),l("span",ce,"ğŸ“Œ")):n("",!0)])]),o("div",ge,[o("button",{class:"px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition",onClick:k(t=>function(e){const t=!e.isPinned;C.post(`/chats/${e.id}/pin`).then(a=>{a.success&&(e.isPinned=t)}).catch(e=>{console.error("Pin chat error:",e)})}(e),["stop"])},i(e.isPinned?"ğŸ“Œ ĞÑ‚ĞºÑ€ĞµĞ¿Ğ¸Ñ‚ÑŒ":"ğŸ“Œ Ğ—Ğ°ĞºÑ€ĞµĞ¿Ğ¸Ñ‚ÑŒ"),9,ve),o("button",{class:"px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition",onClick:k(t=>function(e){const t=!e.isMuted;C.post(`/chats/${e.id}/mute`).then(a=>{a.success&&(e.isMuted=t)}).catch(e=>{console.error("Mute chat error:",e)})}(e),["stop"])},i(e.isMuted?"ğŸ”” Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ":"ğŸ”• Ğ’Ñ‹ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ"),9,he),e.otherUser?(f(),l("button",{key:0,class:"px-3 py-1 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full hover:bg-blue-200 dark:hover:bg-blue-900/50 transition",onClick:k(t=>{return a=e.otherUser.id,void xe.push(`/user/${a}`);var a},["stop"])}," ğŸ‘¤ ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ ",8,pe)):n("",!0)])],10,O)}),128))]),_:1})])),s(a,{to:"/city-chats",class:"fixed bottom-24 right-6 w-14 h-14 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-full shadow-2xl flex items-center justify-center text-2xl hover:scale-110 transition-transform md:hidden z-[1100]"},{default:c(()=>[...t[11]||(t[11]=[w(" ğŸ™ï¸ ",-1)])]),_:1})])])}}},[["__scopeId","data-v-f0fcb705"]]);export{xe as default};
