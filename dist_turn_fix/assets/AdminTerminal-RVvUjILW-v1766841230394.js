import{r as e,o as t,h as s,l as a,y as r,G as l,t as o,F as n,i as c,I as d,J as i,K as u,p,H as g,k as v,m as x,v as m}from"./vendor-mW7CftnD-v1766841230394.js";const y={class:"min-h-screen bg-gray-900 text-green-400"},b={class:"max-w-7xl mx-auto py-6 px-4"},h={class:"bg-gray-800 rounded-lg p-4 mb-4 border border-green-500"},f={class:"grid grid-cols-2 md:grid-cols-4 gap-2"},w={class:"bg-black rounded-lg shadow-2xl border-2 border-green-500 overflow-hidden"},k={class:"bg-gray-800 px-4 py-2 flex items-center justify-between border-b border-green-500"},$={class:"text-xs text-gray-500"},C={key:0,class:"text-green-400 mb-1"},_={key:1,class:"text-gray-300 whitespace-pre-wrap mb-1"},S={key:2,class:"text-red-400 whitespace-pre-wrap mb-1"},T={key:3,class:"text-green-400 whitespace-pre-wrap mb-1"},j={class:"flex items-center mt-2"},I=["onKeydown"],q={__name:"AdminTerminal",setup(q){const A=r(),P=e(null),B=e(null),R=e(""),D=e([]),H=e([]),z=e(-1),E=()=>A.push("/admin/dashboard"),K=()=>{D.value=[],L("success","–¢–µ—Ä–º–∏–Ω–∞–ª –æ—á–∏—â–µ–Ω")},L=(e,t)=>{D.value.push({type:e,text:t}),g(()=>{P.value&&(P.value.scrollTop=P.value.scrollHeight)})},O=e=>{R.value=e,U()},U=async()=>{const e=R.value.trim();if(e)if(L("command",e),H.value.unshift(e),z.value=-1,R.value="","help"!==e)if("clear"!==e)if("status"!==e)if("users"!==e)if("requests"!==e)try{const t=localStorage.getItem("adminToken");if(!t)return L("error","–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω"),void A.push("/admin/login");const s=await fetch("/api/v1/admin/terminal/execute",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({command:e})});if(!s.ok){if(401===s.status)return L("error","–°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞. –í–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞."),void A.push("/admin/login");if(404===s.status)return L("error","–¢–µ—Ä–º–∏–Ω–∞–ª API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ö–æ–º–∞–Ω–¥–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ."),void J(e);throw new Error(`HTTP ${s.status}`)}const a=await s.json();a.success?L("output",a.output||"–ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ"):L("error",a.error||"–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã")}catch(t){L("error",`–û—à–∏–±–∫–∞: ${t.message}`)}else await F();else await N();else await M();else K();else L("output","–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n  help - –°–ø—Ä–∞–≤–∫–∞\n  clear - –û—á–∏—Å—Ç–∏—Ç—å\n  docker ps - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã\n  docker logs [name] - –õ–æ–≥–∏\n  status - –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã\n  users - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏\n  requests - –ó–∞—è–≤–∫–∏")},J=e=>{L("output",`–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã: ${e}\n(–î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è API)`)},M=async()=>{try{const e=localStorage.getItem("adminToken"),t=await fetch("/api/v1/admin/dashboard",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=(await t.json()).dashboard||{};L("output",`–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã:\n  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ${e.totalUsers||0}\n  –ó–∞—è–≤–æ–∫: ${e.totalRequests||0}\n  –ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞—è–≤–æ–∫: ${e.activeRequests||0}`)}else L("error","–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å")}catch(e){L("error",`–û—à–∏–±–∫–∞: ${e.message}`)}},N=async()=>{try{const e=localStorage.getItem("adminToken"),t=await fetch("/api/v1/admin/users?limit=10",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){const e=await t.json(),s=e.users||e.data||[];let a=`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (${s.length}):\n`;s.forEach((e,t)=>{a+=`  ${t+1}. ${e.full_name||e.name} (${e.email}) - ${e.is_active?"‚úì":"‚úó"}\n`}),L("output",a)}else L("error","–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")}catch(e){L("error",`–û—à–∏–±–∫–∞: ${e.message}`)}},F=async()=>{try{const e=await fetch("/api/v1/help-requests?limit=10");if(e.ok){const t=(await e.json()).data||[];let s=`–ó–∞—è–≤–∫–∏ (${t.length}):\n`;t.forEach((e,t)=>{var a,r;s+=`  ${t+1}. ${r=e.problem_type,{battery:"–ë–∞—Ç–∞—Ä–µ—è",fuel:"–¢–æ–ø–ª–∏–≤–æ",towing:"–ë—É–∫—Å–∏—Ä–æ–≤–∫–∞",tire:"–ö–æ–ª–µ—Å–æ",sober_driver:"–¢—Ä–µ–∑–≤—ã–π –≤–æ–¥–∏—Ç–µ–ª—å",road_conflict:"–ö–æ–Ω—Ñ–ª–∏–∫—Ç",other:"–î—Ä—É–≥–æ–µ"}[r]||r} - ${e.description.substring(0,40)}... (${a=e.status,{active:"–ê–∫—Ç–∏–≤–Ω—ã–π",pending_acceptance:"–û–∂–∏–¥–∞–µ—Ç",accepted:"–ü—Ä–∏–Ω—è—Ç",in_progress:"–í –ø—Ä–æ—Ü–µ—Å—Å–µ",completed:"–ó–∞–≤–µ—Ä—à–µ–Ω",cancelled:"–û—Ç–º–µ–Ω–µ–Ω"}[a]||a})\n`}),L("output",s)}else L("error","–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫")}catch(e){L("error",`–û—à–∏–±–∫–∞: ${e.message}`)}},G=()=>{z.value<H.value.length-1&&(z.value++,R.value=H.value[z.value])},V=()=>{z.value>0?(z.value--,R.value=H.value[z.value]):0===z.value&&(z.value=-1,R.value="")},W=()=>{const e=["help","clear","docker ps","docker logs","status","users","requests"].filter(e=>e.startsWith(R.value));1===e.length&&(R.value=e[0])};return t(()=>{L("success","–ê–¥–º–∏–Ω –¢–µ—Ä–º–∏–Ω–∞–ª Help-Car v1.0"),L("output",'–í–≤–µ–¥–∏—Ç–µ "help" –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏'),B.value&&B.value.focus()}),(e,t)=>(v(),s("div",y,[a("nav",{class:"bg-gray-800 shadow-lg border-b border-green-500"},[a("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[a("div",{class:"flex justify-between h-16"},[a("div",{class:"flex items-center space-x-4"},[a("button",{class:"text-green-400 hover:text-green-300 font-medium",onClick:E}," ‚Üê –ù–∞–∑–∞–¥ –≤ –î–∞—à–±–æ—Ä–¥ "),t[9]||(t[9]=a("h1",{class:"text-xl font-bold text-green-400"}," üíª –ê–¥–º–∏–Ω –¢–µ—Ä–º–∏–Ω–∞–ª ",-1))]),a("div",{class:"flex items-center space-x-4"},[a("button",{class:"bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700",onClick:K}," üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å ")])])])]),a("div",b,[a("div",h,[t[10]||(t[10]=a("h3",{class:"text-sm font-bold mb-3 text-green-300"}," ‚ö° –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã: ",-1)),a("div",f,[a("button",{class:"bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded text-xs",onClick:t[0]||(t[0]=e=>O("docker ps"))}," üì¶ Docker PS "),a("button",{class:"bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded text-xs",onClick:t[1]||(t[1]=e=>O("docker logs roadhelp-backend --tail 50"))}," üìã Backend Logs "),a("button",{class:"bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded text-xs",onClick:t[2]||(t[2]=e=>O("docker stats --no-stream"))}," üìä Docker Stats "),a("button",{class:"bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded text-xs",onClick:t[3]||(t[3]=e=>O("free -h"))}," üíæ Memory Info "),a("button",{class:"bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded text-xs",onClick:t[4]||(t[4]=e=>O("df -h"))}," üíø Disk Space "),a("button",{class:"bg-yellow-600 hover:bg-yellow-700 px-3 py-2 rounded text-xs text-white",onClick:t[5]||(t[5]=e=>O("docker restart roadhelp-backend"))}," üîÑ Restart Backend "),a("button",{class:"bg-yellow-600 hover:bg-yellow-700 px-3 py-2 rounded text-xs text-white",onClick:t[6]||(t[6]=e=>O("docker restart roadhelp-nginx"))}," üîÑ Restart Nginx "),a("button",{class:"bg-gray-700 hover:bg-gray-600 px-3 py-2 rounded text-xs",onClick:t[7]||(t[7]=e=>O("pm2 list"))}," üìã PM2 List ")])]),a("div",w,[a("div",k,[t[11]||(t[11]=l('<div class="flex items-center space-x-2"><div class="w-3 h-3 rounded-full bg-red-500"></div><div class="w-3 h-3 rounded-full bg-yellow-500"></div><div class="w-3 h-3 rounded-full bg-green-500"></div><span class="ml-4 text-sm text-gray-400">admin@help-car.online</span></div>',1)),a("div",$,o((new Date).toLocaleString("ru-RU")),1)]),a("div",{ref_key:"terminalOutput",ref:P,class:"p-4 h-96 overflow-y-auto font-mono text-sm",style:{background:"#0d1117"}},[(v(!0),s(n,null,c(D.value,(e,r)=>(v(),s("div",{key:r},["command"===e.type?(v(),s("div",C,[t[12]||(t[12]=a("span",{class:"text-blue-400"},"admin@server",-1)),t[13]||(t[13]=a("span",{class:"text-gray-500"},":",-1)),t[14]||(t[14]=a("span",{class:"text-purple-400"},"~",-1)),t[15]||(t[15]=a("span",{class:"text-gray-500"},"$",-1)),m(" "+o(e.text),1)])):"output"===e.type?(v(),s("div",_,o(e.text),1)):"error"===e.type?(v(),s("div",S,o(e.text),1)):"success"===e.type?(v(),s("div",T," ‚úÖ "+o(e.text),1)):x("",!0)]))),128)),a("div",j,[t[16]||(t[16]=a("span",{class:"text-blue-400"},"admin@server",-1)),t[17]||(t[17]=a("span",{class:"text-gray-500"},":",-1)),t[18]||(t[18]=a("span",{class:"text-purple-400"},"~",-1)),t[19]||(t[19]=a("span",{class:"text-gray-500"},"$",-1)),d(a("input",{ref_key:"commandInput",ref:B,"onUpdate:modelValue":t[8]||(t[8]=e=>R.value=e),class:"ml-2 flex-1 bg-transparent outline-none text-green-400",placeholder:"–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É...",autofocus:"",onKeydown:[u(U,["enter"]),u(G,["up"]),u(V,["down"]),u(p(W,["prevent"]),["tab"])]},null,40,I),[[i,R.value]])])],512)]),t[20]||(t[20]=l('<div class="mt-4 bg-gray-800 rounded-lg p-4 border border-green-500"><h3 class="text-sm font-bold mb-2 text-green-300"> üí° –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã: </h3><div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-xs"><div><span class="text-yellow-400">help</span> - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É</div><div><span class="text-yellow-400">clear</span> - –û—á–∏—Å—Ç–∏—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª</div><div><span class="text-yellow-400">docker ps</span> - –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤</div><div><span class="text-yellow-400">docker logs [container]</span> - –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞</div><div><span class="text-yellow-400">docker restart [container]</span> - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫</div><div><span class="text-yellow-400">status</span> - –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</div><div><span class="text-yellow-400">users</span> - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div><div><span class="text-yellow-400">requests</span> - –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫</div></div></div>',1))])]))}};export{q as default};
