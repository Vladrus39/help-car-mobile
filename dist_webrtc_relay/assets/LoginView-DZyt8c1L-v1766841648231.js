import{r as e,y as t,h as l,l as a,G as s,p as r,m as o,I as n,J as i,f as c,g as d,x as u,t as p,v as b,s as v,k as m}from"./vendor-mW7CftnD-v1766841648231.js";import{_ as x}from"./night-road-BdXYRt4G-v1766841648231.js";import{u as g,r as h}from"./index-BT06tprM-v1766841648231.js";import"./utils-BM9RleeF-v1766841648231.js";import"./maps-CCq-KL9W-v1766841648231.js";const f={class:"min-h-screen flex items-center justify-center relative overflow-hidden py-12 px-4"},w={class:"max-w-md w-full relative z-10"},y={class:"bg-white/95 dark:bg-slate-800/95 backdrop-blur-xl rounded-3xl shadow-2xl p-10"},k={class:"text-center"},j={key:0,class:"p-4 bg-red-50 border-2 border-red-200 rounded-xl"},S={class:"text-base text-red-700 font-bold"},O=["disabled"],P={key:0},z={key:1,class:"flex items-center justify-center"},C={class:"mt-8 text-center"},L={class:"text-gray-700 dark:text-gray-200 font-semibold"},M={__name:"LoginView",setup(M){const U=t(),I=v(),V=g(),_=e(!1);console.log("LoginView mounted, router:",U);const q=e({emailOrPhone:"",password:""}),H=e(!1),J=e(null);async function B(){var e,t,l,a;H.value=!0,J.value=null;try{const e=q.value.emailOrPhone.trim(),t=e.includes("@"),l=/^\+?\d{10,12}$/.test(e.replace(/[\s\-()]/g,""));if(!t&&!l)throw new Error("–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email –∏–ª–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞");console.log("–í—Ö–æ–¥:",t?"–ø–æ email":"–ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É",e);const a={password:q.value.password};t?a.email=e:l&&(a.phone=e),console.log("üöÄ Starting login process with:",{...a,password:"***"});const r=await V.login(a,_.value);console.log("‚úÖ Login successful:",r),localStorage.setItem("rememberMe",String(_.value)),localStorage.setItem("savedUser",JSON.stringify({emailOrPhone:e})),console.log("üíæ User preferences saved");try{const e=await h();console.log("üîî Push notifications:",e?"enabled":"disabled")}catch(s){console.warn("‚ö†Ô∏è Push notifications not available:",s)}console.log("üîÑ Redirecting to /...");const o=I.query.redirect;o?U.push(o):U.push("/map"),console.log("‚úÖ Redirect completed")}catch(r){console.error("‚ùå Login error:",r),J.value=r.userMessage||(null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.error)||(null==(a=null==(l=r.response)?void 0:l.data)?void 0:a.message)||V.error||"–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞"}finally{H.value=!1}}return(()=>{try{const e=localStorage.getItem("savedUser");if(!e)return;const t=JSON.parse(e);t&&"object"==typeof t&&(q.value.emailOrPhone=t.emailOrPhone||"")}catch(e){localStorage.removeItem("savedUser")}})(),(e,t)=>{const v=u("router-link");return m(),l("div",f,[t[10]||(t[10]=a("div",{class:"absolute inset-0"},[a("img",{src:x,alt:"",class:"w-full h-full object-cover opacity-40"})],-1)),t[11]||(t[11]=a("div",{class:"absolute inset-0 bg-gradient-to-br from-blue-900/80 via-indigo-900/70 to-purple-900/80"},null,-1)),t[12]||(t[12]=a("div",{class:"absolute top-0 left-1/3 w-96 h-96 bg-yellow-400/10 rounded-full blur-3xl animate-pulse"},null,-1)),a("div",w,[a("div",y,[t[9]||(t[9]=s('<div class="text-center mb-10"><div class="flex items-center justify-center space-x-3 mb-6"><div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg"><svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z"></path></svg></div><h1 class="text-4xl font-black text-gray-900 dark:text-white"> Help-Car </h1></div><h2 class="text-3xl font-black text-gray-900 dark:text-white mb-3"> –í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç </h2><p class="text-lg text-gray-700 dark:text-gray-200 font-semibold"> –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ! </p></div>',1)),a("form",{class:"space-y-7",onSubmit:r(B,["prevent"])},[a("div",null,[t[2]||(t[2]=a("label",{class:"block text-base font-black text-gray-900 dark:text-white mb-3"},"üìß Email –∏–ª–∏ üì± –¢–µ–ª–µ—Ñ–æ–Ω",-1)),n(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>q.value.emailOrPhone=e),type:"text",autocomplete:"username",required:"",class:"w-full px-5 py-4 text-lg rounded-xl border-2 border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-4 focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"your@email.com –∏–ª–∏ +79001234567"},null,512),[[i,q.value.emailOrPhone]]),t[3]||(t[3]=a("p",{class:"text-sm text-gray-600 dark:text-gray-300 mt-2 font-semibold"}," –ú–æ–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ email –∏–ª–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ ",-1))]),a("div",null,[t[4]||(t[4]=a("label",{class:"block text-base font-black text-gray-900 dark:text-white mb-3"},"üîí –ü–∞—Ä–æ–ª—å",-1)),n(a("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>q.value.password=e),type:"password",autocomplete:"current-password",required:"",class:"w-full px-5 py-4 text-lg rounded-xl border-2 border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white focus:ring-4 focus:ring-blue-500 focus:border-blue-500 transition",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"},null,512),[[i,q.value.password]])]),a("div",k,[c(v,{to:"/forgot-password",class:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-bold text-base"},{default:d(()=>[...t[5]||(t[5]=[b(" üîë –ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å? ",-1)])]),_:1})]),J.value?(m(),l("div",j,[a("p",S," ‚ö†Ô∏è "+p(J.value),1)])):o("",!0),a("button",{type:"submit",disabled:H.value,class:"w-full py-5 px-6 text-xl bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-black rounded-xl transition-all transform hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed"},[H.value?(m(),l("span",z,[...t[6]||(t[6]=[a("svg",{class:"animate-spin h-6 w-6 mr-3",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),b(" –í—Ö–æ–¥... ",-1)])])):(m(),l("span",P,"üöÄ –í–æ–π—Ç–∏"))],8,O)],32),a("div",C,[a("p",L,[t[8]||(t[8]=b(" –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? ",-1)),c(v,{to:"/register",class:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-black"},{default:d(()=>[...t[7]||(t[7]=[b(" –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è ",-1)])]),_:1})])])])])])}}};export{M as default};
