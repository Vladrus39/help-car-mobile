import{r as e,o as t,h as l,l as a,I as s,L as o,J as d,t as i,F as n,i as r,y as u,k as c}from"./vendor-mW7CftnD-v1766841648231.js";const b={class:"min-h-screen bg-gray-100"},v={class:"bg-white shadow-lg"},m={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},p={class:"flex justify-between h-16"},x={class:"flex items-center"},y={class:"max-w-4xl mx-auto py-6 px-4"},g={class:"bg-white rounded-lg shadow p-6 mb-6"},f={class:"space-y-4"},h={class:"flex gap-2"},w=["disabled"],k={class:"bg-white rounded-lg shadow p-6 mb-6"},C={class:"grid grid-cols-2 gap-2"},_={class:"bg-white rounded-lg shadow p-6"},U={class:"space-y-3"},j={class:"flex-1"},S={class:"font-medium"},V={class:"text-sm text-gray-700"},D={class:"text-xs text-gray-700 mt-1"},R={__name:"AdminNotifications",setup(R){u();const T=e(!1),A=e({target:"all",title:"",body:"",url:""}),F=e([]),H={welcome:{title:"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!",body:"–°–ø–∞—Å–∏–±–æ –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ RoadHelp. –ú—ã –≤—Å–µ–≥–¥–∞ —Ä—è–¥–æ–º!"},maintenance:{title:"–¢–µ—Ö–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ",body:"–°–µ–≥–æ–¥–Ω—è —Å 00:00 –¥–æ 02:00 –±—É–¥—É—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã."},update:{title:"–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏!",body:"–ú—ã –¥–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –≤–∞—à–µ–≥–æ —É–¥–æ–±—Å—Ç–≤–∞."},promo:{title:"–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ",body:"–¢–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è —Å–∫–∏–¥–∫–∞ 20% –Ω–∞ –≤—Å–µ —É—Å–ª—É–≥–∏!"}},I=async()=>{if(A.value.title&&A.value.body){T.value=!0;try{const e=localStorage.getItem("adminToken"),t=await fetch("/api/v1/admin/notifications/send",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(A.value)});if(!t.ok&&404!==t.status)throw new Error("Failed");alert("‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!"),F.value.unshift({id:Date.now(),...A.value,sent_at:new Date,recipients:150}),L()}catch(e){alert("–û—à–∏–±–∫–∞: "+e.message)}finally{T.value=!1}}else alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ!")},J=e=>{const t=H[e];A.value.title=t.title,A.value.body=t.body},L=()=>{A.value={target:"all",title:"",body:"",url:""}};return t(()=>{}),(e,t)=>(c(),l("div",b,[a("nav",v,[a("div",m,[a("div",p,[a("div",x,[a("button",{class:"text-blue-600 hover:text-blue-800 font-medium mr-4",onClick:t[0]||(t[0]=t=>e.$router.push("/admin/dashboard"))}," ‚Üê –î–∞—à–±–æ—Ä–¥ "),t[9]||(t[9]=a("h1",{class:"text-xl font-bold"}," üîî Push-–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ",-1))])])])]),a("div",y,[a("div",g,[t[15]||(t[15]=a("h3",{class:"font-bold mb-4"}," ‚úâÔ∏è –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ ",-1)),a("div",f,[a("div",null,[t[11]||(t[11]=a("label",{class:"block text-sm font-medium mb-2"},"–ü–æ–ª—É—á–∞—Ç–µ–ª–∏",-1)),s(a("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>A.value.target=e),class:"w-full px-3 py-2 border rounded"},[...t[10]||(t[10]=[a("option",{value:"all"}," –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ",-1),a("option",{value:"active"}," –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ ",-1),a("option",{value:"helpers"}," –ü–æ–º–æ—â–Ω–∏–∫–∏ ",-1),a("option",{value:"users_with_requests"}," –° –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∑–∞—è–≤–∫–∞–º–∏ ",-1)])],512),[[o,A.value.target]])]),a("div",null,[t[12]||(t[12]=a("label",{class:"block text-sm font-medium mb-2"},"–ó–∞–≥–æ–ª–æ–≤–æ–∫",-1)),s(a("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>A.value.title=e),type:"text",class:"w-full px-3 py-2 border rounded",placeholder:"–í–∞–∂–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"},null,512),[[d,A.value.title]])]),a("div",null,[t[13]||(t[13]=a("label",{class:"block text-sm font-medium mb-2"},"–°–æ–æ–±—â–µ–Ω–∏–µ",-1)),s(a("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>A.value.body=e),class:"w-full px-3 py-2 border rounded",rows:"4",placeholder:"–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è..."},null,512),[[d,A.value.body]])]),a("div",null,[t[14]||(t[14]=a("label",{class:"block text-sm font-medium mb-2"},"–°—Å—ã–ª–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)",-1)),s(a("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>A.value.url=e),type:"text",class:"w-full px-3 py-2 border rounded",placeholder:"/map"},null,512),[[d,A.value.url]])]),a("div",h,[a("button",{disabled:T.value,class:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 disabled:opacity-50",onClick:I},i(T.value?"üì§ –û—Ç–ø—Ä–∞–≤–∫–∞...":"üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å"),9,w),a("button",{class:"bg-gray-600 text-white px-6 py-2 rounded hover:bg-gray-700",onClick:L}," üîÑ –°–±—Ä–æ—Å–∏—Ç—å ")])])]),a("div",k,[t[20]||(t[20]=a("h3",{class:"font-bold mb-4"}," üìã –ë—ã—Å—Ç—Ä—ã–µ —à–∞–±–ª–æ–Ω—ã ",-1)),a("div",C,[a("button",{class:"p-3 border rounded text-left hover:bg-gray-50",onClick:t[5]||(t[5]=e=>J("welcome"))},[...t[16]||(t[16]=[a("div",{class:"font-medium"}," –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ ",-1),a("div",{class:"text-xs text-gray-700"}," –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ RoadHelp! ",-1)])]),a("button",{class:"p-3 border rounded text-left hover:bg-gray-50",onClick:t[6]||(t[6]=e=>J("maintenance"))},[...t[17]||(t[17]=[a("div",{class:"font-medium"}," –¢–µ—Ö–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ ",-1),a("div",{class:"text-xs text-gray-700"}," –ü–ª–∞–Ω–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã ",-1)])]),a("button",{class:"p-3 border rounded text-left hover:bg-gray-50",onClick:t[7]||(t[7]=e=>J("update"))},[...t[18]||(t[18]=[a("div",{class:"font-medium"}," –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ",-1),a("div",{class:"text-xs text-gray-700"}," –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ",-1)])]),a("button",{class:"p-3 border rounded text-left hover:bg-gray-50",onClick:t[8]||(t[8]=e=>J("promo"))},[...t[19]||(t[19]=[a("div",{class:"font-medium"}," –ê–∫—Ü–∏—è ",-1),a("div",{class:"text-xs text-gray-700"}," –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ ",-1)])])])]),a("div",_,[t[22]||(t[22]=a("h3",{class:"font-bold mb-4"}," üìú –ò—Å—Ç–æ—Ä–∏—è –æ—Ç–ø—Ä–∞–≤–æ–∫ ",-1)),a("div",U,[(c(!0),l(n,null,r(F.value,e=>(c(),l("div",{key:e.id,class:"flex items-center justify-between border-b pb-3"},[a("div",j,[a("div",S,i(e.title),1),a("div",V,i(e.body),1),a("div",D,i(new Date(e.sent_at).toLocaleString("ru-RU"))+" ‚Ä¢ "+i(e.recipients)+" –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π ",1)]),t[21]||(t[21]=a("div",{class:"text-sm text-green-600"}," ‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ ",-1))]))),128))])])])]))}};export{R as default};
