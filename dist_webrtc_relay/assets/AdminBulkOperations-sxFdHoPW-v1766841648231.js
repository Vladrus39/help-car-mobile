import{r as e,w as t,o as a,h as s,l,m as n,t as r,n as i,F as u,i as o,y as d,k as c,I as p,W as x}from"./vendor-mW7CftnD-v1766841648231.js";const h={class:"min-h-screen bg-gray-100"},v={class:"bg-white shadow-lg"},m={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},g={class:"flex justify-between h-16"},y={class:"flex items-center space-x-4"},b={class:"flex items-center space-x-4"},f={key:0,class:"text-sm text-gray-800 font-medium"},w={class:"max-w-7xl mx-auto py-6 px-4"},k={class:"bg-white rounded-lg shadow p-4 mb-6"},$={class:"flex gap-4"},C={key:0,class:"bg-yellow-50 border-2 border-yellow-400 rounded-lg p-4 mb-6"},_={class:"font-bold mb-3"},S={class:"flex flex-wrap gap-2"},E={key:1,class:"bg-white rounded-lg shadow overflow-hidden"},O={class:"p-4 border-b flex items-center gap-4"},T=["checked"],j={class:"min-w-full"},q={class:"divide-y divide-gray-200"},B={class:"px-6 py-4"},A=["value"],F={class:"px-6 py-4 text-sm"},I={class:"px-6 py-4 text-sm"},z={class:"px-6 py-4 text-sm"},U={key:2,class:"bg-white rounded-lg shadow overflow-hidden"},V={class:"p-4 border-b flex items-center gap-4"},D=["checked"],J={class:"min-w-full"},N={class:"divide-y divide-gray-200"},P={class:"px-6 py-4"},L=["value"],R={class:"px-6 py-4 text-sm"},W={class:"px-6 py-4 text-sm"},G={class:"px-6 py-4 text-sm"},H={__name:"AdminBulkOperations",setup(H){const K=d(),M=e("users"),Q=e([]),X=e([]),Y=e=>({battery:"Ð¡ÐµÐ²ÑˆÐ°Ñ Ð±Ð°Ñ‚Ð°Ñ€ÐµÑ",fuel:"ÐÐµÑ‚ Ñ‚Ð¾Ð¿Ð»Ð¸Ð²Ð°",towing:"Ð‘ÑƒÐºÑÐ¸Ñ€Ð¾Ð²ÐºÐ°",tire:"ÐŸÑ€Ð¾ÐºÐ¾Ð» ÐºÐ¾Ð»ÐµÑÐ°",sober_driver:"Ð¢Ñ€ÐµÐ·Ð²Ñ‹Ð¹ Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒ",road_conflict:"ÐšÐ¾Ð½Ñ„Ð»Ð¸ÐºÑ‚ Ð½Ð° Ð´Ð¾Ñ€Ð¾Ð³Ðµ",other:"Ð”Ñ€ÑƒÐ³Ð¾Ðµ"}[e]||e||"ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾"),Z=e=>({active:"ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹",pending_acceptance:"ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚ Ð¿Ñ€Ð¸Ð½ÑÑ‚Ð¸Ñ",accepted:"ÐŸÑ€Ð¸Ð½ÑÑ‚",in_progress:"Ð’ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ",completed:"Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½",cancelled:"ÐžÑ‚Ð¼ÐµÐ½ÐµÐ½"}[e]||e||"ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð¾"),ee=()=>localStorage.getItem("adminToken"),te=async()=>{try{const e=ee();if(!e)return void K.push("/admin/login");const t="users"===M.value?"/api/v1/admin/users":"/api/v1/admin/requests",a=await fetch(t+"?limit=100",{headers:{Authorization:`Bearer ${e}`}});if(!a.ok)throw new Error("Failed to load");const s=await a.json();Q.value=s.users||s.requests||[],X.value=[]}catch(e){alert("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸: "+e.message)}},ae=()=>{X.value.length===Q.value.length?X.value=[]:X.value=Q.value.map(e=>e.id)},se=async()=>{if(confirm(`Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ${X.value.length} Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹?`))try{const e=ee();if(!(await fetch("/api/v1/admin/users/bulk/block",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({ids:X.value})})).ok)throw new Error("Failed");alert("âœ… ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹!"),await te()}catch(e){alert("ÐžÑˆÐ¸Ð±ÐºÐ°: "+e.message)}},le=async()=>{if(confirm(`ÐÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ${X.value.length} Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹?`))try{const e=ee();if(!(await fetch("/api/v1/admin/users/bulk/activate",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({ids:X.value})})).ok)throw new Error("Failed");alert("âœ… ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ Ð°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹!"),await te()}catch(e){alert("ÐžÑˆÐ¸Ð±ÐºÐ°: "+e.message)}},ne=async()=>{if(confirm(`âš ï¸ Ð£Ð”ÐÐ›Ð˜Ð¢Ð¬ ${X.value.length} Ð·Ð°Ð¿Ð¸ÑÐµÐ¹? Ð­Ñ‚Ð¾ Ð½ÐµÐ¾Ð±Ñ€Ð°Ñ‚Ð¸Ð¼Ð¾!`))try{const e=ee(),t="users"===M.value?"/api/v1/admin/users/bulk/delete":"/api/v1/admin/requests/bulk/delete";if(!(await fetch(t,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({ids:X.value})})).ok)throw new Error("Failed");alert("âœ… Ð£Ð´Ð°Ð»ÐµÐ½Ð¾!"),await te()}catch(e){alert("ÐžÑˆÐ¸Ð±ÐºÐ°: "+e.message)}},re=()=>{const e=Q.value.filter(e=>X.value.includes(e.id));let t="";"users"===M.value?(t="ID,Ð˜Ð¼Ñ,Email,Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½,Ð¡Ñ‚Ð°Ñ‚ÑƒÑ\n",e.forEach(e=>{t+=`"${e.id}","${e.full_name}","${e.email}","${e.phone}","${e.is_active?"ÐÐºÑ‚Ð¸Ð²ÐµÐ½":"Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½"}"\n`})):(t="ID,ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ,Ð¢Ð¸Ð¿,Ð¡Ñ‚Ð°Ñ‚ÑƒÑ,Ð¡ÑƒÐ¼Ð¼Ð°\n",e.forEach(e=>{t+=`"${e.id}","${e.description}","${Y(e.problem_type)}","${Z(e.status)}","${e.amount}"\n`}));const a=new Blob([t],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");s.href=URL.createObjectURL(a),s.download=`export_${M.value}_${(new Date).toISOString().split("T")[0]}.csv`,s.click(),alert("âœ… CSV Ñ„Ð°Ð¹Ð» Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½!")};return t(M,()=>{X.value=[],te()}),a(()=>{te()}),(e,t)=>(c(),s("div",h,[l("nav",v,[l("div",m,[l("div",g,[l("div",y,[l("button",{class:"text-blue-600 hover:text-blue-800 font-medium",onClick:t[0]||(t[0]=t=>e.$router.push("/admin/dashboard"))}," â† Ð”Ð°ÑˆÐ±Ð¾Ñ€Ð´ "),t[6]||(t[6]=l("h1",{class:"text-xl font-bold text-gray-900"}," ðŸ”„ ÐœÐ°ÑÑÐ¾Ð²Ñ‹Ðµ ÐžÐ¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ ",-1))]),l("div",b,[X.value.length?(c(),s("span",f," Ð’Ñ‹Ð±Ñ€Ð°Ð½Ð¾: "+r(X.value.length),1)):n("",!0)])])])]),l("div",w,[l("div",k,[l("div",$,[l("button",{class:i(["users"===M.value?"bg-blue-600 text-white":"bg-gray-200","px-4 py-2 rounded"]),onClick:t[1]||(t[1]=e=>M.value="users")}," ðŸ‘¥ ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ ",2),l("button",{class:i(["requests"===M.value?"bg-blue-600 text-white":"bg-gray-200","px-4 py-2 rounded"]),onClick:t[2]||(t[2]=e=>M.value="requests")}," ðŸš— Ð—Ð°ÑÐ²ÐºÐ¸ ",2)])]),X.value.length?(c(),s("div",C,[l("h3",_," ÐœÐ°ÑÑÐ¾Ð²Ñ‹Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ñ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ñ‹Ð¼Ð¸ ("+r(X.value.length)+" ÑˆÑ‚.): ",1),l("div",S,["users"===M.value?(c(),s("button",{key:0,class:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",onClick:se}," ðŸš« Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð²ÑÐµÑ… ")):n("",!0),"users"===M.value?(c(),s("button",{key:1,class:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",onClick:le}," âœ… ÐÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð²ÑÐµÑ… ")):n("",!0),l("button",{class:"bg-red-700 text-white px-4 py-2 rounded hover:bg-red-800",onClick:ne}," ðŸ—‘ï¸ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð²ÑÐµÑ… "),l("button",{class:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:re}," ðŸ“¥ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð² CSV "),l("button",{class:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",onClick:t[3]||(t[3]=e=>X.value=[])}," âŒ ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð²Ñ‹Ð±Ð¾Ñ€ ")])])):n("",!0),"users"===M.value?(c(),s("div",E,[l("div",O,[l("input",{type:"checkbox",checked:X.value.length===Q.value.length&&Q.value.length>0,class:"rounded",onChange:ae},null,40,T),t[7]||(t[7]=l("span",{class:"text-sm font-medium"},"Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð²ÑÐµ",-1)),l("button",{class:"ml-auto bg-blue-600 text-white px-4 py-2 rounded text-sm",onClick:te}," ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ")]),l("table",j,[t[8]||(t[8]=l("thead",{class:"bg-gray-50"},[l("tr",null,[l("th",{class:"px-6 py-3 text-left"}," âœ“ "),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"}," Ð˜Ð¼Ñ "),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"}," Email "),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"}," Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ")])],-1)),l("tbody",q,[(c(!0),s(u,null,o(Q.value,e=>(c(),s("tr",{key:e.id,class:i(X.value.includes(e.id)?"bg-blue-50":"")},[l("td",B,[p(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>X.value=e),type:"checkbox",value:e.id,class:"rounded"},null,8,A),[[x,X.value]])]),l("td",F,r(e.full_name),1),l("td",I,r(e.email),1),l("td",z,[l("span",{class:i(e.is_active?"text-green-600":"text-red-600")},r(e.is_active?"âœ… ÐÐºÑ‚Ð¸Ð²ÐµÐ½":"ðŸš« Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½"),3)])],2))),128))])])])):n("",!0),"requests"===M.value?(c(),s("div",U,[l("div",V,[l("input",{type:"checkbox",checked:X.value.length===Q.value.length&&Q.value.length>0,class:"rounded",onChange:ae},null,40,D),t[9]||(t[9]=l("span",{class:"text-sm font-medium"},"Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð²ÑÐµ",-1)),l("button",{class:"ml-auto bg-blue-600 text-white px-4 py-2 rounded text-sm",onClick:te}," ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ")]),l("table",J,[t[10]||(t[10]=l("thead",{class:"bg-gray-50"},[l("tr",null,[l("th",{class:"px-6 py-3 text-left"}," âœ“ "),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"}," ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ "),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"}," Ð¢Ð¸Ð¿ "),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase"}," Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ")])],-1)),l("tbody",N,[(c(!0),s(u,null,o(Q.value,e=>{var a;return c(),s("tr",{key:e.id,class:i(X.value.includes(e.id)?"bg-blue-50":"")},[l("td",P,[p(l("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>X.value=e),type:"checkbox",value:e.id,class:"rounded"},null,8,L),[[x,X.value]])]),l("td",R,r(null==(a=e.description)?void 0:a.substring(0,50))+"... ",1),l("td",W,r(Y(e.problem_type)),1),l("td",G,r(Z(e.status)),1)],2)}),128))])])])):n("",!0)])]))}};export{H as default};
